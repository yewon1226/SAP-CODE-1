## <  핵심 개념 >
- **1) ABAP 타입 정의 위치별 차이와 Nested/Flat 구조 비교**
- **2) Eclipse에서 Type 생성 절차**
- **3) Eclipse에서 CDS View / View Entity 생성 절차**
- **4) CDS View / View Entity 어노테이션 설정**
- **5) CDS SAP GUI OData 서비스 생성 및 활성화 절차**
</br>
</br>

---

</br>

## < Annotation Propagation >
- 필드(Element) 애노테이션은 상위 View로 자동 전파되고, View Entity 애노테이션은 전파되지 않음
- `@Metadata.ignorePropagatedAnnotations: ` : false는 하위 View의 필드 애노테이션을 그대로 전파하고, true는 그 전파를 무시함
- 상위 View에서는 이미 하위 View에서 정의된 별칭(Carrid, Price 등)을 그대로 필드명으로 사용하기 때문에 다시 as를 쓸 필요가 없음
  
</br>

- R_Employee (하위 View)

```abap
@AccessControl.authorizationCheck: #MANDATORY
@EndUserText.label: 'Root Employee View'

define view entity R_Employee
  as select from zemployee
{
  key EmployeeID,
      Name,
      CurrencyCode,

  @Semantics.amount.currencyCode: 'CurrencyCode'
      AnnualSalary
}
```

- C_Employee (상위 View)
```abap
@EndUserText.label: 'Consumption Employee View'

define view entity C_Employee
  as select from R_Employee
{
  key EmployeeID,
      Name,
      AnnualSalary
}
```
</br>

- 기존 CDS View(ZCDSFLIGHT_B03)를 참조해서 새로운 CDS View를 생성하는 화면
<img width="481" height="321" alt="image" src="https://github.com/user-attachments/assets/f07b8aed-5a99-4b47-825c-6fc46fbdc8a5" />
</br>
</br>

- CDS View에서 현재 적용된 Annotation을 확인하기 위해 “Open With → Active Annotations”를 여는 메뉴
<img width="611" height="252" alt="image" src="https://github.com/user-attachments/assets/b822fc3b-2292-4481-b4f3-c287314841fa" />
</br>
</br>

- 해당 CDS View에 실제로 적용·전파된 Annotation 목록을 보여주는 확인 화면
<img width="689" height="349" alt="image" src="https://github.com/user-attachments/assets/d458b047-4524-4156-911d-4e02c99bd134" />
</br>
</br>

- ZCDSFLIGHT_B03 (하위 View)
```abap
@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Flight CDS View'
@Metadata.ignorePropagatedAnnotations: true
define view entity ZCDSFLIGHT_B03 as select from sflight
{
    key carrid as Carrid,
    key connid as Connid,
    key fldate as Fldate,
    
    @Semantics.amount.currencyCode: 'Currency'
    price as Price,
    currency as Currency,
    planetype as Planetype,
    seatsmax as Seatsmax,
    seatsocc as Seatsocc,
    @Semantics.amount.currencyCode: 'Currency'
    paymentsum as Paymentsum
}
```
- ZCDSFLIGHT_PROPA_B03 (상위 View)
```abap
@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Flight CDS Propagated'
@Metadata.ignorePropagatedAnnotations: false
define view entity ZCDSFLIGHT_PROPA_B03 as select from ZCDSFLIGHT_B03
{
    key Carrid,
    key Connid,
    key Fldate,
    Price,
    Currency,
    Planetype,
    Seatsmax,
    Seatsocc,
    Paymentsum
}
```
</br>
</br>

---

</br>

## < 실습 코드 >
</br>

### 실습 1
- Annotation Propagation 실습
</br>

<img width="474" height="297" alt="image" src="https://github.com/user-attachments/assets/4cc81c0b-2eac-449b-8cd6-7156687d1495" />
</br>
</br>

- Z03_R_Employee (하위 View)
```abap
@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Z03_R_Employee'
@Metadata.ignorePropagatedAnnotations: true
define view entity Z03_R_Employee as select from z03employ
{
    key employee_id as EmployeeId,
    first_name as FirstName,
    last_name as LastName,
    birth_date as BirthDate,
    entry_date as EntryDate,
    @Semantics.amount.currencyCode: 'CurrencyCode'
    annual_salary         as AnnualSalary,
    @EndUserText.label: 'Currency Key'
    currency_code         as CurrencyCode,
    created_by as CreatedBy,
    created_at as CreatedAt,
    local_last_changed_by as LocalLastChangedBy,
    local_last_changed_at as LocalLastChangedAt,
    last_changed_at as LastChangedAt
}
```
- Z03_C_Employee (하위 View)
```abap
@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Z03_C_Employee'
@Metadata.ignorePropagatedAnnotations: true
define view entity Z03_C_Employee as select from Z03_R_Employee
{
    key EmployeeId,
    FirstName,
    LastName,
    BirthDate,
    EntryDate,
    @Semantics.amount.currencyCode: 'CurrencyCode'
    AnnualSalary,
    CurrencyCode,
    CreatedBy,
    CreatedAt,
    LocalLastChangedBy,
    LocalLastChangedAt,
    LastChangedAt
}
```
</br>
</br>
</br>

### 실습 2

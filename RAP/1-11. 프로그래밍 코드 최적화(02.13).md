# < 멘토멘티 정리>
</br>

### 1) Controller 안에서의 this 정리
</br>

**1) `.controller.js` 파일 내부에서의 `this`**
- 현재 View를 제어하고 있는 컨트롤러 자기 자신

**2) `this.getView()`**
- 내(컨트롤러)가 관리하는 현재 화면(View) 가져오기. 특정 화면의 컨트롤 접근할 때 사용.
```html
this.getView().byId("idInput")
```

**3) success 함수 안에서의 this**
- 바로 실행되는 함수가 아니라 나중에 서버에서 데이터가 오면 그 때 실행되는 함수
- 그래서 이 함수가 실행될 때 this가 뭐였는지 잊어버림
- 해결방안
```java
// 1. let that = this => 미리 this를 복사해두기
let that = this;
success: function() {
   that.getView();
}

// 2. .bind(this) => success 실행 시 this를 강제로 현재 컨트롤러에 묶음
success: function() {
   this.getView();
}.bind(this)
```
</br>
</br>
</br>

### 2) `getView()` vs `getOwnerComponent()`
</br>

**1) `this.getView()`**
- 컨트롤러가 관리하는 특정 화면에 접근할 때 사용

**2) `this.getOwnerComponent()`**
- 프로젝트 전체를 관리하는 Component.js 접근
- 모델, 라우터 등 접근 가능
```java
this.getOwnerComponent().getModel()
this.getOwnerComponent().getRouter()
```
- `this.getView().getRouter()` : View에는 라우터를 직접 가져오는 기능이 없음
- 다른 View의 컨트롤 접근 불가능 → 모델과 바인딩되지 않은 버튼, 입력창 등은 접근 불가
</br>
</br>
</br>

### 3) `ui.table` vs `m.table`
</br>

**1) `sap.m.Table`**
- 데이터 양이 아주 많지 않을 때(약 100건 내외) 사용
- 선택된 행 자체(객체)를 바로 가져옴 (Item 기반 접근)
</br>

1. 테이블 ID(`this.byId`)로 직접 접근할 때
```java
// [1] 가장 표준 (선택된 단일 아이템에서 데이터 추출)
let oData = this.byId("idMobileTable").getSelectedItem().getBindingContext().getObject();

// [2] 선택된 모든 아이템 배열 중 첫 번째[0]에서 추출
let oData = this.byId("idMobileTable").getSelectedItems()[0].getBindingContext().getObject();

// [3] 모델과 경로(Path)를 조합해서 모델에서 직접 읽기
let oTable = this.byId("idMobileTable");
let sPath = oTable.getSelectedItem().getBindingContext().getPath();
let oData = oTable.getModel().getProperty(sPath);
```

2. 이벤트(`selectionChange`)의 oEvent를 활용할 때
```java
// [4] 파라미터에서 선택된 아이템(listItem)을 바로 꺼내기
let oData = oEvent.getParameter("listItem").getBindingContext().getObject();

// [5] 이벤트 소스(테이블 자신)의 '선택된 아이템' 함수로 가져오기
let oData = oEvent.getSource().getSelectedItem().getBindingContext().getObject();

// [6] 파라미터 묶음(getParameters)을 통해 아이템에 접근
let oData = oEvent.getParameters().listItem.getBindingContext().getObject();
```

3. 행(Row) 내부에 심어둔 버튼을 눌렀을 때
```java
// [7] 버튼의 바인딩 컨텍스트에서 바로 데이터 추출 (가장 많이 씀)
let oData = oEvent.getSource().getBindingContext().getObject();

// [8] 버튼의 부모(ColumnListItem)를 찾아가서 데이터 추출
let oData = oEvent.getSource().getParent().getBindingContext().getObject();

// [9] 버튼이 연결된 모델에서 경로(Path) 정보를 사용하여 추출
let oBtn = oEvent.getSource();
let oData = oBtn.getModel().getProperty(oBtn.getBindingContext().getPath());
```
</br>

**2) `sap.ui.table.Table`**
- 대량의 데이터를 다루는 관리자용 화면이나 복잡한 그리드에 사용
- 몇 번째 줄인지 번호를 먼저 알아내서 데이터를 찾아와야 함(Index 기반 접근)
</br>

1. `oEvent` 을 활용하는 경우 (이벤트 발생 시)
```java
// [1] 가장 권장: 클릭된 행의 주소(Context)에서 바로 데이터 추출
let oData = oEvent.getParameter("rowContext").getObject();

// [2] 클릭된 행 번호(rowIndex)를 얻은 후 소스(테이블)에서 데이터 추출
let oData = oEvent.getSource().getContextByIndex(oEvent.getParameter("rowIndex")).getObject();

// [3] 이벤트 소스(테이블 자신)의 현재 선택된 인덱스(대표 번호)로 추출
let oData = oEvent.getSource().getContextByIndex(oEvent.getSource().getSelectedIndex()).getObject();

// [4] 파라미터 묶음 전체(getParameters)를 통해 rowContext 접근
let oData = oEvent.getParameters().rowContext.getObject();
```

2. 테이블 ID(`this.byId`)를 직접 활용하는 경우 (어디서든 가능)
```java
// [5] 테이블 ID로 접근하여 현재 선택된 인덱스(대표 번호)로 추출
let oData = this.byId("idEmployeeTable").getContextByIndex(this.byId("idEmployeeTable").getSelectedIndex()).getObject();

// [6] 선택된 모든 인덱스 배열(Indices) 중 첫 번째[0] 번호로 추출
let oData = this.byId("idEmployeeTable").getContextByIndex(this.byId("idEmployeeTable").getSelectedIndices()[0]).getObject();

// [7] 테이블의 경로(Path)를 알아낸 뒤 모델(Model)에서 직접 데이터 읽기
let oTable = this.byId("idEmployeeTable");
let sPath = oTable.getContextByIndex(oTable.getSelectedIndex()).getPath();
let oData = oTable.getModel().getProperty(sPath);
```

3. 행(Row) 안에 심어둔 버튼을 눌렀을 때
```java
// [8] 버튼 자체의 바인딩 컨텍스트(주소)에서 바로 데이터 추출
let oData = oEvent.getSource().getBindingContext().getObject();

// [9] 버튼의 부모(Row) 객체를 찾아가서 그 행의 데이터를 추출
let oData = oEvent.getSource().getParent().getBindingContext().getObject();

// [10] 버튼이 속한 모델과 경로(Path) 정보를 조합하여 데이터 추출
let oBtnSource = oEvent.getSource();
let oData = oBtnSource.getModel().getProperty(oBtnSource.getBindingContext().getPath());
```

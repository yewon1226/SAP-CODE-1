# 정상 코드
### 1) 객체 안에 객체 배열
- 가장 일반적인 형태
- 모델 생성 코드
- ```java
  { list: [ {name: "A"}, {name: "B"} ] }
  ```
- XML 바인딩 방법
- ```html
  items="{model>/list}"
  ```
- Text 바인딩
- ```html
  {model>name}
  ```
</br>

### 2) 객체 안에 배열
- 숫자, 문자열은 `{.}`
- 모델 생성 코드
- ```java
  { list: [1, 2, 3] }
  ```
- XML 바인딩 방법
- ```html
  items="{model>/list}"
  ```
- Text 바인딩
- ```html
  {.}
  ```
</br>

### 3) 루트가 배열
- 루트 배열은 `/`로 접근
- 모델 생성 코드
- ```java
  [ {name: "A"}, {name: "B"} ]
  ```
- XML 바인딩 방법
- ```html
  items="{model>/}"
  ```
- Text 바인딩
- ```html
  {model>name}
  ```
</br>

### 4) 루트가 배열
- 가장 단순한 형태
- 모델 생성 코드
- ```java
  [1, 2, 3]
  ```
- XML 바인딩 방법
- ```html
  items="{model>/}"
  ```
- Text 바인딩
- ```html
  {.}
  ```
</br>

# 잘못된 코드
### 1) 객체 자체가 배열처럼 생긴 객체
- 문법 오류
- ```java
  {[1, 2]}
  ```
</br>

### 2) 바인딩 경로 틀림
- 존재하지 않는 경로
- ```java
  [1, 2, 3]인데 items="{model>/list}"
  ```
</br>
</br>
</br>

# SAPUI5 바인딩·이벤트 핵심정리
### < oEvent 객체 정보 2가지 >
1) `oEvent.getSource()`
   - 이벤트를 일으킨 놈 (컨트롤 자체)
   - 누가 이벤트를 발생시켰는지

2) `oEvent.getParameter("...")`
   - 이벤트가 들고 온 데이터
   - 이벤트와 함께 전달된 정보
</br>

### < 컨트롤 찾는 3단계 >
1) `this.byId("idName")`
   - View에 있는 컨트롤(ID로 직접 찾기)
   - 버튼, 테이블, 입력창 등 가져올 때

2) `oEvent.getSource()`
   - 지금 이벤트를 일으킨 놈
   - “지금 누른 버튼” 같은 거

3) `oEvent.getSource().getParent()`
   - 이벤트 일으킨 놈의 상위 컨트롤
   - 버튼이 들어있는 행(Row) 가져올 때
</br>

### < 이벤트 객체 구조 >
- 모든 이벤트는 `oEvent` 하나로 들어옴
- 그 안에서 필요한 정보 꺼내는 방식만 달라짐

| 함수 | 리턴값 | 쓰임 |
|------|---------|------|
| `getSource()` | 이벤트 발생한 컨트롤 | 버튼 / 콤보박스 / 차트 등 |
| `getParameters()` | 이벤트 파라미터 전체 묶음 | 선택한 아이템 / 입력값 등 |
| `getParameter("value")` | Input, ComboBox의 입력값 | `"apple"` 같은 값 |
| `getParameter("selectedItem")` | ComboBox 선택 아이템 | ListItem 객체 |
| `getParameter("data")` | 차트 선택 이벤트(selectData) | 선택된 데이터 묶음 |
</br>

### < 바인딩이란? (쉽게 말하면 “데이터 연결선”) >
- 화면(UI)과 뒤의 데이터가 실시간으로 연결되어 움직이는 것
- 한 줄 데이터 : `text="{필드}"`
- 여러 줄 데이터 : `items="{경로}"`
- 특정 객체 하나 : `bindElement({ path: "경로" })`
</br>

### < Row 선택 시 데이터 꺼내는 공식 >
```java
onSelectionChange: function(oEvent) {
  // 선택한 Row 객체
  let oRow = oEvent.getParameters().listItem;

  // Row가 연결된 데이터의 경로 정보
  let oContext = oRow.getBindingContext(); 
  let sPath = oContext.getPath();  // "/customers/1"

  // 실제 데이터 꺼내기
  let oData = oContext.getObject(); // {name: "강호동"}
  console.log(oData.name); // "강호동"
}
```
</br>

### < source parameter 비교 >
| 상황 | 이벤트 | 가져올 방법 | 이유 |
|------|---------|--------------|------|
| 버튼 클릭 | `press` | `getSource()` | 버튼이 이벤트 주체, 데이터는 없음 |
| 테이블 Row 선택 | `selectionChange` | `getParameters().listItem` | 선택한 행(Row)이 파라미터에 포함됨 |
| Input 입력 | `change` | `getParameter("value")` | 입력값이 이벤트 파라미터로 전달됨 |
| 차트 클릭 | `selectData` | `getParameter("data")` | 선택된 데이터 묶음이 파라미터로 전달됨 |

</br>

### < 이벤트별 `oEvent` 구조 비교표 >
| 이벤트 | 주요 파라미터 | `getSource()` 결과 | `getParameter()` 예시 | 설명 |
|--------|----------------|--------------------|-----------------------|------|
| `press` | (없음) | 버튼(`sap.m.Button`) | X | 버튼이 직접 이벤트 발생 |
| `selectionChange` | `listItem` | 테이블(`sap.m.Table`) | `oEvent.getParameters().listItem` | 선택된 Row 객체 포함 |
| `change` | `value` | 인풋(`sap.m.Input`) | `oEvent.getParameter("value")` | 입력된 텍스트 값 전달 |
| `selectData` | `data` | 차트(`sap.viz.ui5.controls.VizFrame`) | `oEvent.getParameter("data")` | 선택된 데이터 묶음 배열로 전달 |
</br>

---
</br>

### SAPUI5 실전 종합 모의시험

### 문제 1. (이벤트 객체 구조 구분)
- 다음 네 가지 이벤트에서 각각 값 또는 데이터를 가져오는 코드를 작성하시오.
- (ComboBox, Input, Table Row, VizFrame 차트 클릭)
```java
// ComboBox 선택
let oItem = oEvent.getParameter("selectedItem");
console.log(oItem.getKey());

// Input 입력
let sValue = oEvent.getParameter("value");
console.log(sValue);

// Table Row 선택
let oRow = oEvent.getParameters().listItem;
let oData = oRow.getBindingContext("customer").getObject();
console.log(oData.Name);

// 차트 클릭
let aData = oEvent.getParameter("data");
let sOrderID = aData[0].data.OrderID;
console.log(sOrderID);
```
</br>

### 문제 2. (라우팅 전체 흐름 완성)
- Main → Detail 페이지 이동 시 OrderID, ProductID 전달
- (1) pattern (2) navTo (3) attachPatternMatched (4) bindElement 순서로 작성하시오.
```json
// manifest.json
"pattern": "Detail/{param1}/{param2}"
```
```java
// Main.controller.js
onSelectData: function(oEvent) {
  let aData = oEvent.getParameter("data");
  let sOrderID = aData[0].data.OrderID;
  let sProductID = aData[0].data.ProductID;

  let oRouter = this.getOwnerComponent().getRouter();
  oRouter.navTo("RouteDetail", {
    param1: sOrderID,
    param2: sProductID
  });
}
```
```java
// Detail.controller.js
onInit() {
  let oRouter = this.getOwnerComponent().getRouter();
  oRouter.getRoute("RouteDetail").attachPatternMatched(this._onMatched, this);
},

_onMatched: function(oEvent) {
  let sOrder = oEvent.getParameters().arguments.param1;
  let sProd = oEvent.getParameters().arguments.param2;
  this.byId("ObjectPageLayout").bindElement({
    path: `/Order_Details(OrderID=${sOrder},ProductID=${sProd})`
  });
}
```
</br>

### 문제 3. (FilterBar + Chart 필터 적용)
- 검색 버튼 클릭 시 ComboBox에서 선택한 OrderID로 차트 데이터 필터링하는 코드를 작성하시오.
- 필터는 Dataset의 "data" 바인딩에만 적용 가능
- getSelectedItem() → getBindingContext() → getObject() 순서 중요
```java
onSearch: function() {
  let oCombo = this.byId("idOrderID");
  let oItem = oCombo.getSelectedItem();
  if (!oItem) return;

  let oContext = oItem.getBindingContext();
  let sOrderID = oContext.getObject().OrderID;

  let oDataset = this.byId("idFlattenedDataset");
  let oBinding = oDataset.getBinding("data");

  let aFilter = [
    new sap.ui.model.Filter("OrderID", "EQ", sOrderID)
  ];

  oBinding.filter(aFilter);
}
```
</br>

### 문제 4. (Chart Type 변경 + Validation)
- ComboBox에서 선택한 타입(bar, line, donut)으로 차트 형태를 바꾸되, 입력값이 잘못되면 오류 상태를 표시하는 코드를 작성하시오.
```java
onChange: function(oEvent) {
  let sValue = oEvent.getParameter("value");
  let oInput = oEvent.getSource();
  let oChart = this.byId("idViewChart");

  if (["bar","line","donut"].includes(sValue)) {
    oInput.setValueState("None");
    oChart.setVizType(sValue);
  } else {
    oInput.setValueState("Error");
    oInput.setValueStateText("올바른 차트 타입을 입력하세요.");
  }
}
```
</br>

### 문제 5. (버튼 이벤트로 Row 데이터 접근)
- 테이블 안에 있는 버튼 클릭 시, 그 버튼이 속한 Row의 CustomerID를 콘솔에 출력하시오.
- getSource() → 버튼, getParent() → 버튼이 포함된 Row, getBindingContext() → Row의 데이터 연결 정보, getObject() → 실제 JSON 데이터
```java
onPress: function(oEvent) {
  let oRow = oEvent.getSource().getParent();
  let oData = oRow.getBindingContext("customer").getObject();
  console.log(oData.CustomerID);
}
```
</br>

### 문제 6. (ComboBox 초기값 설정)
- 화면이 실행될 때 ComboBox에 “bar” 값을 자동 선택되도록 하시오.
- 초기값은 Model이 아닌 UI컨트롤에서 setSelectedKey()로 직접 지정 가능
```java
onInit() {
  let oCombo = this.byId("idType");
  oCombo.setSelectedKey("bar");
}
```
</br>

### 문제 7. (다중 모델 혼합 바인딩)
- 하나의 View에 OData 모델(default)과 JSON 모델(typeList)을 함께 사용하는 경우, 각각의 컨트롤에 올바르게 바인딩하는 방법을 코드로 작성하시오.
```java
<ComboBox items="{typeList>/Key}">
  <core:ListItem text="{typeList>type}" />
</ComboBox>

<Table items="{/Orders}">
  <columns>
    <Column><Text text="OrderID"/></Column>
  </columns>
  <items>
    <ColumnListItem>
      <cells>
        <Text text="{OrderID}" />
      </cells>
    </ColumnListItem>
  </items>
</Table>
```
</br>

### 문제 8. (데이터 경로와 바인딩Context 이해)
- 테이블에서 선택한 행(Row)의 모델 경로(/Customers/1)를 얻고, 그 경로로 데이터를 직접 읽는 코드를 작성하시오.
```java
onSelectionChange: function(oEvent) {
  let oRow = oEvent.getParameters().listItem;
  let oContext = oRow.getBindingContext("customer");
  let sPath = oContext.getPath();
  let oModel = this.getView().getModel("customer");
  let oData = oModel.getProperty(sPath);
  console.log(oData.Name);
}
```
</br>

### 문제 9. (Fragment 로드 + 컨트롤 접근)
- 다이얼로그 Fragment를 열 때, Fragment 내부의 Input 컨트롤에 접근하여 초기값을 설정하는 코드를 작성하시오.
- Fragment는 별도 scope라서 `sap.ui.getCore().byId()`로 접근
```java
onOpenDialog: function() {
  if (!this._oDialog) {
    this._oDialog = sap.ui.xmlfragment("sap.btp.ux410solving.view.fragment.MyDialog", this);
    this.getView().addDependent(this._oDialog);
  }
  this._oDialog.open();
  let oInput = sap.ui.getCore().byId("idDialogInput");
  oInput.setValue("초기값");
}
```
</br>

### 문제 10. (조건부 필터 + 차트 동적 변경)
- 검색 시 ComboBox에 선택된 OrderID가 없으면 전체 차트 표시, 있으면 해당 OrderID만 표시되도록 구현하시오.
```java
onSearch: function() {
  let oCombo = this.byId("idOrderID");
  let oItem = oCombo.getSelectedItem();
  let oDataset = this.byId("idFlattenedDataset");
  let oBinding = oDataset.getBinding("data");

  if (!oItem) {
    oBinding.filter([]); // 전체 표시
    return;
  }

  let sOrderID = oItem.getBindingContext().getObject().OrderID;
  let aFilter = [ new sap.ui.model.Filter("OrderID", "EQ", sOrderID) ];
  oBinding.filter(aFilter);
}
```
</br>
</br>
</br>

---
</br>

---

</br>
</br>

# 개념정리 
</br>

# 10/23(목) 기록
# 웹 UI 프레임워크 활용한 개발 1-1
- Fiori :  SAP 디자인 가이드라인
- Fiori Launchpad : SAP의 통합 대시보드 환경. 여러 개의 SAP UI5 앱을 한 화면에서 실행 가능.
- UI5 : SAP가 권장하는 최적의 UI Application을 만들 수 있는 Javascript 프레임워크 (내부 구조는 JS + XML + JSON)

* 참고 사이트 : UI5 SDK 사이트(UI5 API 사이트: ui5.sap.com), SAP BTP Trial 사이트
* https://<host>:<port>/sap/public/bc/ui5_ui5/index.html
</br>

### 템플릿 리터럴
- 기존의 "Hello " + name + "!" 대신 사용
- 백틱(``)으로 문자열 감싸고, ${} 안에 변수나 표현식 삽입
```java
let name = "Hong";
let age = 25;

console.log(`안녕하세요, ${name}님! 나이는 ${age}살입니다.`);
// 출력: 안녕하세요, Hong님! 나이는 25살입니다.
```
</br>

### UI5 종류
- SAPUI5 : SAP 내부 시스템 전용 (SAP BTP 등에서 사용)
- OpenUI5 : 오픈소스 버전 (무료로 사용 가능)
</br>

### MVC 패턴 구조
- UI5는 세 가지 구조로 나뉨. UI5는 다양한 브라우저에서 지원.
- View : 사용자 UI (XML, HTML, JS로 정의 가능)
- Controller : View의 동작 제어 (이벤트 처리, 로직 구현)
- Model : 데이터 관리 및 CRUD 처리 (JSON, oData)
</br>

### SAP에서 주로 사용되는 라이브러리
- sap.m
- sap.ui.comp
- sap.ui.table
- sap.ui.layout
- sap.ui.core
</br>

### SAP 개발 환경
- SAP Business Application Studio (BAS) : 클라우드 기반 IDE (SAP 공식 개발 환경)
- Visual Studio Code : 로컬 개발 시 많이 사용
</br>

### 터미널 실행절차
```bash
터미널

cd 프로젝트명              # 경로 맞추기
cd ..                      # 뒤로가기

프로젝트명> npm install    # 설치 완료되면 node_modules 폴더가 생김
프로젝트명> npm run satrt  # 서버 실행
```
</br>

### index.html 파일
- SAP UI5 프레임워크의 핵심(JavaScript) 라이브러리를 불러오는 코드
- data-sap-ui-resource-roots : 앱의 네임스페이스(sap.ui5.yui5project01)는 실제 파일 경로상에서는 현재 폴더(./)에 있음
- data-sap-ui-resource-roots 가 없으면, UI5가 Controller, View, Component.js 파일의 실제 경로를 찾지 못해 앱이 실행되지 않음
```html
<script
        id="sap-ui-bootstrap"
        src="resources/sap-ui-core.js"
        data-sap-ui-theme="sap_horizon"
        data-sap-ui-resource-roots='{
            "sap.ui5.yui5project01": "./"      <!-- NameSpace.project 이름, ./ : 현재위치 -->
        }'
        data-sap-ui-on-init="module:sap/ui/core/ComponentSupport"
        data-sap-ui-compat-version="edge"
        data-sap-ui-async="true"
        data-sap-ui-frame-options="trusted"
    ></script>
```
</br>

### UI5 실행 순서
- Component.js, index.html, manifest.json은 설정 파일 (프로젝트 구동 시 필요한 파일들. App 초기 설정을 담당.)
- SAPUI5 실행 순서 : index.html -> Component.js -> manifest.json -> App.view.xml (rootview에 의해) -> App.controller.js (controllername에 의해) -> Main.view.xml -> Main.controller.js
- manifest.json 안의 "sap.ui5": { "rootView": { ... } } 부분이 앱의 첫 화면을 결정함. 이후 모든 View 전환은 Routing(routing.config)으로 관리.
- view.xml, controller.js : 확장자(확장자는 전부 소문자)
</br>

### View & Controller (MVC 연결)
- Main.view.xml 파일
- ns : namespace
- View 파일명은 반드시 대문자로 시작 (Main.view.xml)
- Controller 파일명은 반드시 같은 이름의 .controller.js
```html
<mvc:View controllerName="sap.ui5.yui5project01.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"   <!-- :mvc => 별칭. 다른 namespace를 추가하고 싶을 때 사용. -->
    xmlns="sap.m">                <!-- 기본 namespace(1개): sap.m 라이브러리 사용 -->
    <Page id="page" title="{i18n>title}">
    </Page>
</mvc:View>


<!-- 기본 namespace 바꾸고 싶을 때 -->
<View controllerName="sap.ui5.yui5project01.controller.Main"
    xmlns="sap.ui.core.mvc"  
    xmlns:m="sap.m">               
    <m:Page id="page" title="{i18n>title}">
            <!-- 이런식으로 m:과 같이 태그에 붙여줘야함 -->
    </m:Page>
</View>
```
</br>
</br>
</br>

# 10/24(금) 기록
# Git 브랜치 관리

```bash
git branch      // * main
```
- 현재 로컬 저장소의 브랜치를 확인
- 현재 작업 중인 브랜치 앞에 * 표시

```bash
git branch -a
```
- 로컬 브랜치뿐 아니라 원격(origin) 브랜치도 확인 가능
- 원격 브랜치 앞에는 remotes/origin/브랜치명으로 표시됨
- 종료 : Q

```bash
git checkout <브랜치명>
```
- 브랜치 전환. 해당 브랜치로 워킹 디렉터리가 변경되고, 그 브랜치의 코드로 작업할 수 있게 됨.

```bash
npm install
```
- 패키지 설치

```bash
git add .
```
- 현재 폴더와 하위 파일을 모두 스테이지에 올림

```bash
git commit -m "커밋 메시지"
```
- 변경 사항을 로컬 저장소에 기록

```bash
git log
```
- 커밋 히스토리 확인
- 종료 : Q
</br>

### Aggregation
- 상위 컨트롤이 하위 컨트롤을 포함하는 구조 : `App → Page → Button`
  
```
content(default) 0..1
```
- content 생략 가능하지만, 한 개만 포함 가능
  
```
content(default) 0..n
```
- 여러 페이지(Page) 가능
- <pages> 생략해도 됨 (default aggregation이기 때문)
```html
<App>
	<pages>        <!-- Aggregation 이름 → 소문자 시작 -->
		<content>   
			<Page>
				<Button />
			</Page>
		</content>
	</pages>
</App>
```

</br>

### Method
- 객체가 할 수 있는 행동
- 객체 : UI에서 하나의 부품 또는 요소
- 속성 : 객체가 가진 특징, 상태, 값을 의미
</br>

1) getValue()
```java
let value = oInput.getValue();
```
- 소속 클래스: `sap.m.Input`
- 사용자가 입력한 값을 읽음
</br>

2) setValue(value)
```java
oInput.setValue("SAPUI5");
```
- 소속 클래스: `sap.m.Input`
- Input에 표시될 값을 설정함
</br>

3) getText()
```java
let sText = oButton.getText();
```
- 소속 클래스: `sap.m.Text`, `sap.m.Button` 등
- 현재 표시 중인 텍스트를 읽어옴
</br>

4) setText(text)
```java
oButton.setText("완료");
```
- 소속 클래스: `sap.m.Text`, `sap.m.Button` 등
- 버튼이나 텍스트 컨트롤의 글자를 변경함
</br>

5) getView()
```java
let oView = this.getView();
```
- 소속 클래스: `sap.ui.core.mvc.Controller`
- Controller와 연결된 View(XML View)를 반환
</br>

6) byId(id)
```java
let oInput = this.getView().byId("idInput1");
```
- 소속 클래스: `sap.ui.core.mvc.View`
- View 내부에서 해당 id를 가진 Control을 찾음
</br>
</br>

### Button 객체
- 속성(property): text, icon, type, …
- 이벤트(event): press → Controller(JS)에서 구현
```html
<Button text="저장" press="onSave"/>
```
</br>

### Controller 구조(JS)
- onInit 함수는 무조건 사용됨
```java
sap.ui.define([
	"sap/ui/core/mvc/Controller",
	"sap/m/Button"
  ], function(Controller, Button) {
	      return Controller.extend("resourceRootPath.controller.Main", {
		
      		onInit: function() { ... },            // ① 초기 실행
      		onBeforeRendering: function() { ... }, // ② 렌더링 전
      		onAfterRendering: function() { ... },  // ③ 렌더링 후
      		onClick: function() { ... },           // ④ 버튼 등 이벤트
      		onExit: function() { ... }             // ⑤ 화면 종료 시
	      });
});
```
</br>

### VerticalLayout
- 역할: 컨트롤들을 위에서 아래로 단순 세로 배치
- 특징: 고정형, 반응형 지원 안 함
```html
<l:VerticalLayout>
</ l:VerticalLayout>
```
</br>

### VBox
- 역할: 컨트롤들을 위에서 아래로 세로 배치
- 특징: Flexbox 기반, 반응형 지원, 정렬 제어 가능
```html
<VBox>
</VBox>
```
</br>

### < 실습 1 >

### 1. Controller 코드
- View1.controller.js 파일
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/m/Button"
], 
// 위 배열에서 가져온 js파일들을 순서대로 파라미터에 넣어줌
(Controller, Button) => {    
    // 파라미터 변수들을 아래 로직에서 사용할 수 있음
    // 파라미터 순서 맞추기
    "use strict";   // 엄격모드 Javascript

    return Controller.extend("ycl2project01.controller.View1", {
        count : 10,
        onInit: function() {
        },
        onPress: function() {
            // this는 controller를 가리킴
            // .getView()는 Controller와 연결된 view를 가져옴
            // .byId(<아이디>)는 해당 아이디에 맞는 Control을 가져옴
            let oButton = this.getView().byId("idButton");

            // sap.m.Button의 Method인 .setText()를 활용하여
            // 버튼 클릭시 버튼의 Text 속성을 변경
            oButton.setText("Yes");
        },
        onClick: function() {
            // 버튼 클릭(press) 시 동작하는 이벤트 함수
            // 구현 내용
            // Input에 사용자가 입력한 값을 얻어, Text에 적용하고자 함
            //  1. sap.m.Input에 담긴 값을 가져온다.
            //  2. sap.m.Text에 해당 값을 적용한다.
            //  3. 가져온 값을 sap.m.Text 객체의 
            let oInput = this.getView().byId("idInput1");
            let sValue = oInput.getValue();
            let oText = this.getView().byId("idText");
            oText.setText(sValue);
        }
    });
});
```
</br>

### 2. View 코드
- View1.view.xml 파일
```html
<mvc:View controllerName="ycl2project01.controller.View1"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:l="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">  <!-- 태그 사이에 주석을 달면 오류 -->
    <Page id="page" title="{i18n>title}">
        <content> <!-- content는 sap.m.page의 Aggregation -->
            <l:VerticalLayout>
                <!-- 이런 객체 하나하나를 "Control" 이라고 부름 -->
                <Input id="idInput1" value="Hello world" />
                <Button id="idButton" text="OK" press="onClick" />
                <Text id="idText" text="안녕하세요" />
            </l:VerticalLayout>
        </content>
    </Page>
</mvc:View>
```
</br>

### < 실습 2 >

### 1. Controller 코드
- Practice.controller.js 파일
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project02.controller.Practice", {
        onInit() {
        },
        onClick: function() {
            let checkbox1 = this.getView().byId("idCheckBox1");
            let checkbox2 = this.getView().byId("idCheckBox2");
            let textbox1 = checkbox1.getText();
            let textbox2 = checkbox2.getText();
            let selectbox1 = checkbox1.getSelected();
            let selectbox2 = checkbox2.getSelected();
            let oText = this.getView().byId("idText");

            if(selectbox1 && selectbox2) {
                oText.setText(textbox1+textbox2);
            }
            else if(selectbox1) {
                oText.setText(textbox1);
            }
            else if(selectbox2) {
                oText.setText(textbox2);
            }
        }
    });
});
```
</br>

### 2. View 코드
- Practice.view.xml 파일
```html
<mvc:View controllerName="ycl2project02.controller.Practice"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <VBox>
			<CheckBox id="idCheckBox1" text="option 1" selected="true"/>
			<CheckBox id="idCheckBox2" text="option 2" selected="false"/>
			<Button id="idButton" text="Button" press="onClick"/>
			<Text id="idText" text="안녕하세요!"/>
		</VBox>
    </Page>
</mvc:View>
```
</br>
</br>
</br>

# 10/27 기록
### Grid
- 여러 UI 요소를 격자(그리드) 형태로 반응형 배치하는 레이아웃 컨트롤
```java
new sap.ui.layout.Grid({
  defaultSpan: "L6 M6 S12",
  content: [
    new sap.m.Label({ text: "이름" }),
    new sap.m.Input({ placeholder: "이름을 입력하세요" }),
    new sap.m.Label({ text: "이메일" }),
    new sap.m.Input({ placeholder: "example@email.com" })
  ]
});
```
</br>

### Label - Input
- Label은 필드 이름을 표시하고, Input은 사용자의 텍스트 입력을 받는 컨트롤
```java
new sap.m.Label({
  text: "사용자 ID",
  labelFor: "userInput"
});

new sap.m.Input({
  id: "userInput",
  placeholder: "ID를 입력하세요"
});
```
</br>

### Panel
- 관련된 콘텐츠를 하나의 접이식 영역으로 묶는 컨테이너
```java
new sap.m.Panel({
  headerText: "사용자 정보",
  expandable: true,
  expanded: true,
  content: [
    new sap.m.Label({ text: "이름" }),
    new sap.m.Input({ placeholder: "이름 입력" }),
    new sap.m.Label({ text: "직급" }),
    new sap.m.Input({ placeholder: "직급 입력" })
  ]
});
```
</br>

### ToolbarSpacer
- 툴바에서 버튼이나 아이콘을 가운데 또는 오른쪽으로 띄울 때 사용
```html
<Toolbar>
    <Button text="왼쪽"/>
    <ToolbarSpacer/>   <!-- 이 공간 때문에 다음 버튼이 오른쪽으로 밀림 -->
    <Button text="오른쪽"/>
</Toolbar>
```
</br>

### Page
- 앱의 하나의 화면 단위를 정의하는 컨테이너
- 상단에 홈 화면이라는 제목 표시, 뒤로가기 버튼 표시, 버튼 클릭 시 onNavBack 함수 실행
```html
<Page title="홈 화면" showNavButton="true" navButtonPress="onNavBack">
    <Text text="메인 컨텐츠"/>
</Page>
```
</br>

- border: 테두리
- padding: 내용물과 테두리 사이의 내부 여백
- margin: 다른 요소와의 외부 간격
</br>

### < 예제 1 >
- `class` : CSS 문법에서 스타일을 적용할 때 요소에 이름을 붙이는 속성
- `<ComboBox>` : 사용자가 입력하거나 목록에서 선택할 수 있는 드롭다운
- `<Select>` : 목록에서 항목만 선택할 수 있는 드롭다운
```html
<mvc:View controllerName="ycl2project03.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:l="sap.ui.layout"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <!-- <l:VerticalLayout class="sapUiContentPadding">   
            <Input value="input Value"/>
            <Text text="text" />
            <StepInput />
            <ComboBox ></ComboBox>     
            <Select />                  
            <DatePicker displayFormat="yyyy-MM-dd" />
            <DateRangeSelection />
            <Label text="label" />
        </l:VerticalLayout> -->

        <!-- sap.m.VBox 또는 sap.m.HBox로 대체 사용 가능 -->
        
        <!-- <l:HorizontalLayout >
            <Input value="input Value"/>
            <Text text="text" />
            <StepInput />
            <ComboBox ></ComboBox>      
            <Select />                  
            <DatePicker displayFormat="yyyy-MM-dd" />
            <DateRangeSelection />
            <Label text="label" />
        </l:HorizontalLayout> -->

    </Page>
</mvc:View>
```
</br>

### MessageToast
- 화면 하단에 잠깐 나타나는 간단 알림용 메시지
- 숫자도 자동으로 문자열로 변환되어 표시 → 별도 변환 불필요
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/m/MessageToast"
], function(Controller, MessageToast) { ... });
```
```java
MessageToast.show("메시지 내용");
```
</br>

### MessageBox
- 팝업 형태로 표시되며 사용자 확인이 필요한 중요한 메시지
- 숫자나 객체는 문자열로 변환해서 전달해야 안전하게 표시 가능
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/m/MessageBox"
], function(Controller, MessageBox) { ... });
```
```
MessageBox.show("메시지 내용");
```
</br>

### < 실습 1 >
</br>

### 1. Controller 코드
- Main.controller.js 파일
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/m/MessageBox",
    "sap/m/MessageToast"
], (Controller, MessageBox, MessageToast) => {
    "use strict";

    return Controller.extend("ycl2project04.controller.Main", {
        onInit() {
        },
        onCalc: function() {
            // this.getView() 에서 .getView() 생략 가능! (버전업)
            //let oSelect = this.byId("idSelect");  oSelect = {bAllowTextSelection: true};
            let Number1 = Number(this.byId("idNumber1").getValue());
            let Number2 = Number(this.byId("idNumber2").getValue());

            let oSelect = this.byId("idselect").getSelectedItem().getKey();

            if(oSelect === "PLUS") {
                MessageBox.show(String(Number1+Number2));
                MessageToast.show(Number1+Number2);
            }
            else if(oSelect === "MINUS") {
                MessageBox.show(String(Number1-Number2));
                MessageToast.show(Number1-Number2);
            }
            else if(oSelect == "MULTIPL") {
                MessageBox.show(String(Number1*Number2));
                MessageToast.show(Number1*Number2);
            }
            else if(oSelect === "DIVIDE") {
                MessageBox.show(String(Number1/Number2));
                MessageToast.show(Number1/Number2);
            }

            //debugger;       
            // break-point 라고 부름. 로직 실행중 debugger를 만나면
            // 디버깅이 걸려서 해당 구간에서 멈춰서 진행사항을 확인할 수 있다 (=디버깅이 걸렸다고 표현)
            // debugger를 동작시키기 위해선 개발자도구(F12)가 켜진 상태여야함

        }
    });
});
```
</br>

### 2. View 코드
- Main.view.xml 파일
```java
<mvc:View controllerName="ycl2project04.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <FlexBox justifyContent="Center" alignItems="Center">
            <VBox width="30%" class="sapUiSmallMargin">
                <Input id="idNumber1" width="100%" />
                <Select id="idselect" width="100%" showSecondaryValues="true">
                    <items>
                        <core:ListItem key="PLUS" text="+" additionalText="PLUS"/>
                        <core:ListItem key="MINUS" text="-" additionalText="MINUS"/>
                        <core:ListItem key="MULTIPL" text="*" additionalText="MULTIPL"/>
                        <core:ListItem key="DIVIDE" text="/" additionalText="DIVIDE"/>
                    </items>
                </Select>
                <Input id="idNumber2" width="100%" />
                <Button text="계산하기" press="onCalc"
                        width="100%" type="Emphasized" />
            </VBox>
        </FlexBox>
    </Page>
</mvc:View>
```
</br>

### Fragment (조각 View)
- View 일부를 별도 파일로 분리해서 관리
- 장점: 재사용 가능, 유지보수 용이
```
<파일명1>.fragment.xml
<파일명2>.fragment.xml
<파일명3>.fragment.xml
```
- Fragment 로드 함수:
```java
this.loadFragment({ name: "sap.training.exc.view.Dialog" });
// 또는
sap.ui.core.Fragment.load({ name: "sap.training.exc.view.Dialog" });
```
</br>

### Dialog
- 사용자 입력이나 정보를 받는 팝업 창
- Fragment로 구현하면 재사용 가능
- Controller에서 this.pDialog에 저장 → 한 번만 생성, 계속 재사용 가능
- Dialog는 비동기 로딩되므로 로딩 완료 후에 open()을 호출하려면 반드시 then() 안에서 열어야 함
```java
anyControllerMethod: function() {
    if(!this.pDialog) {                        // dialog는 한 번만 로드(재사용)
        this.pDialog = this.loadFragment({
            name: "sap.training.exc.view.Dialog"
        });
    }
    this.pDialog.open(); // 팝업 열기
}
```
</br>

### Fragment 파일 위치
1. webapp/fragment 폴더
2. webapp/view/fragment 폴더 (권장 ✅)
3. webapp/view 안에 직접 생성
</br>

### < 예제 2 >
- .then()은 Promise(프로미스) 라는 객체에서 작업이 끝난 다음에 실행할 코드
```
[버튼 클릭]
   ↓
onClick() 실행
   ↓
Dialog 있으면 open()
   ↓
Dialog 없으면 Fragment.load()
   ↓
Fragment.load()가 XML 파일을 불러옴 (비동기)
   ↓
다 불러온 다음 .then() 실행 → oDialog.open()
```
- .then()이 필요한 이유 : XML 파일 가져오고 Dialog를 실행해야 하므로
```java
// Fragment.load()가 끝나야 Dialog를 사용할 수 있음
Fragment.load({...})
    .then(function(oDialog) {
        oDialog.open();  // 로드 완료 후 Dialog 열기
    });
```
- 이미 만들어진 Dialog가 있는지 Core(전역 공간)에서 찾아봄
- Fragment는 View랑 분리되어 있어서 Core로 접근해야 함
```java
let oDialog = sap.ui.getCore().byId("idDialog");
```
- 없으면 Fragment.load() 로 Dialog를 불러오고
- .then() 안에서 oDialog.open() 실행 (로드 끝난 뒤에만 가능)
```java
if (oDialog) {
    oDialog.open();   // 이미 있으면 바로 열기
} else {
    Fragment.load({
        name: "ycl2project05.view.fragment.Dialog",
        type: "XML",
        controller: this
    }).then(function(oDialog) {
        oDialog.open();   // 로드 끝난 후 열기
    });
}
```
</br>

### SAPUI5 컨트롤러 라이프사이클 메서드
- `onInit` : 컨트롤러가 처음 생성될 때 실행, 모델 설정이나 초기 데이터 로딩에 사용
- `onBeforerendering` : 뷰가 렌더링되기 직전에 실행, UI를 동적으로 수정할 때 사용
- `onAfterRendering` : 뷰가 렌더링된 후 실행, DOM 접근이나 jQuery 작업에 사용
- `onExit` : 컨트롤러가 종료될 때 실행, 리소스 해제나 이벤트 해제에 사용
</br>

### SAP Fiori UI 밀도 설정: Compact와 Cozy
1) Compact (PC용)
- 클래스: sapUiSizeCompact
- 특징: 요소가 작고 촘촘하게 표시 → 한눈에 많은 정보 확인 가능
2) Cozy (모바일용)
- 클래스: sapUiSizeCozy
- 특징: 요소가 크고 여유 있게 표시 → 터치 시 오타 방지, 사용 편리
</br>

### PC/모바일 환경에 맞춰 UI 크기 조절
- View가 Compact/Cozy에 맞게 스타일 적용됨
- Controller → Component → View
```java
onInit: function() {
    // Component에서 화면 밀도(UI Density) 클래스 가져오기
    var sClass = this.getOwnerComponent().getContentDensityClass();

    // 가져온 클래스(Compact / Cozy)를 현재 View에 적용
    this.getView().addStyleClass(sClass);
}
```
</br>
</br>
</br>
</br>

# 10/28 기록
### SAPUI5 Model 정리
- Model: 데이터를 관리해주는 역할
- 클라이언트(Client) 모델
  - 종류: JSON, XML, Resource (i18n: 다국어처리)
  - 특징: 프로젝트 내부에서만 사용, 서버 요청 없음 → 바로 화면에 사용 가능 (데이터가 이미 로컬에 있음)
- 서버(Server) 모델
  - 종류: OData V2, OData V4
  - 특징: 서버와 통신, 서버에 요청 필요 → 서버 응답 받아 화면에 사용
</br>

### getModel(name)
- 해당 컨트롤(View, Dialog 등)에 연결된 모델을 가져옴
```java
컨트롤.getModel("모델이름");
```
```java
let oDialogModel = sap.ui.getCore().byId("idDialog").getModel("dialog");
```
</br>

### setModel(model, name)
- 컨트롤(예: View, Dialog, Fragment)에 모델을 연결함
```java
컨트롤.setModel(모델객체, "모델이름");
```
```java
mDialog.setModel(oModel, "dialog");
```
</br>

### SAPUI5 모델의 범위와 정의 방식(지역 vs 전역)

- 모듈 정의 및 불러오기
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel"
], function(Controller, JSONModel) {
    "use strict";
});
```
</br>

- 컨트롤러에서 생성한 모델
- 다른 View에서는 접근 불가 → 컨트롤러/해당 View 내부에서만 사용 가능 (local(지역) 모델)
- `setModel(oModel)` → 기본 모델, 이름 없이 접근 가능
- `setModel(oModel, "customer")` → View에서 "customer"라는 이름으로 접근
```java
onInit: function() {
    // 1. JSONModel 생성
    var oModel = new sap.ui.model.json.JSONModel({
        name: "홍길동",
        age: 30
    });

    // 2. 현재 View에 모델 연결 (컨트롤러 전용)
    this.getView().setModel(oModel, "customer");
}
```
</br>

- manifest.json에서 정의한 모델
- manifest.json에서 정의 → 앱 전체에서 전역 모델(Global Model)
- `this.getView().getModel()` → 기본 모델(""). 이름 없이 접근 가능. 
- `this.getView().getModel("customer")` →  이름 있는 모델. "customer" 같은 이름으로 접근.
```java
{
  "sap.ui5": {
    "models": {
      "": { // 기본 모델
        "type": "sap.ui.model.json.JSONModel",
        "settings": {
          "data": { "name": "홍길동", "age": 30 }
        }
      },
      "customer": { // 이름 있는 전역 모델
        "type": "sap.ui.model.json.JSONModel",
        "settings": {}
      }
    }
  }
}
```
</br>

### 바인딩(Binding)
- 모델(Model)과 화면(View)을 연결하여 데이터를 자동으로 표시하고 동기화하는 기능
- 모든 객체의 키 이름이 동일해야만 바인딩이 제대로 작동
</br>

### 바인딩 방식(mode)
- one-time : 모델 → 뷰, 일회성 바인딩(최초 1회만 화면에 표시)
- one-way : 모델 → 뷰, 단방향 바인딩(모델 데이터 변경 시 화면 자동 갱신)
- two-way : 모델 ↔ 뷰, 양방향 바인딩(모델과 화면 모두 동기화, 뷰 변경 시 모델에도 반영)
</br>

### 모델 종류
- JSON Model: 클라이언트 데이터(JSON) 관리, 기본 two-way
- XML Model: 클라이언트 XML 데이터 관리, 기본 two-way
- Resource Model: 다국어(i18n) 문자열 관리, 기본 one-way
- OData V2 Model: 서버 데이터 통신, 기본 one-way
- OData V4 Model: 최신 서버 데이터 통신, 기본 one-way
</br>

### SAPUI5 JSON Model 바인딩 접근
- 컨트롤러에서 생성한 모델 (Local Model)
```java
onInit() {
    // 객체 데이터
    let oData = { 
        inputValue: {
            firstName: "Park",
            lastName: "Gildong"
        }
    };

    // 배열 데이터
    let aData = { 
        inputValue: [{
            firstName: "Park",
            lastName: "Gildong"
        }]
    };

    // JSONModel 생성
    let oModel = new JSONModel(oData);
    let aModel = new JSONModel(aData);
    let nModel = new JSONModel(oData);

    // View에 모델 연결
    this.getView().setModel(oModel, "local");
    this.getView().setModel(aModel, "array");
    this.getView().setModel(nModel);
}
```
</br>
</br>


- 배열 데이터 접근
```html
<Page id="page" title="{array>/inputValue/0/firstName}">
    <!-- array의 name 배열 첫 번째 객체(인덱스 0번)의 firstName -->
</Page>
```
- 객체 데이터 접근
```html
<Page id="page" title="{local>/inputValue/firstName}">
    <!-- local의 firstName -->
</Page>
```
- 단일 속성 바인딩
```html
<Page id="page" title="{/inputValue/firstName}">
    <!-- 기본 모델의 inputValue.firstName -->
</Page>
```
- 다중 속성 바인딩
```html
<Page id="page" title="{local>/inputValue/firstName} {local>/inputValue/lastName}">
    <!-- local 모델의 name 객체 속성 firstName과 lastName 바인딩 -->
</Page>
```
</br>

### Property Binding
- 단일 데이터 값을 UI 컨트롤에 연결하는 방식
- 예시: `{과일들: [{이름: 사과, 가격: 5000}]}`
- 접근: `/과일들/0/이름` → "사과", `/과일들/0/가격` → 5000
- 형식: `{모델명>/경로}` 또는 상대경로 `{필드명}`
- 특징: 단순, 하나의 컨트롤에 하나의 데이터 필드 연결

### Aggregation Binding (List / Table Binding)
- 컬렉션(배열)을 UI 컨트롤(리스트, 테이블 등)에 연결
- 접근: `/과일들` → 전체 배열 바인딩
- 형식 : `items="{모델명>/배열경로}"`
- 특징: 반복 UI 요소 자동 생성 가능 (ex. 테이블 row)
</br>
</br>

### Table Aggregation Binding (sap.m.Table) 예제 
- `sap.m.Table`은 `items`
- `items="{모델명>/경로}"` → 배열 전체를 바인딩 (반복 구조 생성됨)
- Column은 데이터 표시용이 아니라 구조(제목) 정의용
- 셀 안의 바인딩은 상대경로({모델명>필드명}) → 이미 상위 items가 배열을 잡고 있기 때문
</br>

- controller.js 파일
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/m/Table"
], (Controller, JSONModel) => {
    "use strict";

    return Controller.extend("ycl2project06.controller.Main", {
        onInit() {
            let oData = { inputValue: { firstName: "Park", lastName: "Gildong"},
                          persons : [
                            { name: "김예원", age: 23, tel: "010-8952-0763"},
                            { name: "김형동", age: 10, tel: "010-1234-0763"},
                            { name: "박근철", age: 23, tel: "010-6379-6174"}
                          ]
                        };
            let oModel = new JSONModel(oData);
            this.getView().setModel(oModel, "local");
        },
    });
});
```
</br>


- view.xml 파일
```html
<Table items="{local>/persons}">
    <columns>
        <Column><Text text="Name"/></Column>
        <Column><Text text="Age"/></Column>
        <Column><Text text="Tel"/></Column>
    </columns>
    <items>
        <ColumnListItem>
            <cells>
                <Text text="{local>name}" />
                <Input value="{local>age}" />
                <Text text="{local>tel}" />
            </cells>
        </ColumnListItem>
    </items>
</Table>
```
</br>

### Table Aggregation Binding (sap.ui.table.Table) 예제 
- `sap.ui.table.Table`은 `rows`
- `rows="{모델명>/경로}"` → 배열 전체를 바인딩 (반복 구조 생성됨)
- `<t:Column>`은 데이터 표시용이 아니라 구조(제목) 정의용
- `<t:template>` 안의 바인딩은 상대경로 (`{모델명>필드명}`) → 이미 상위 `rows`가 배열을 잡고 있기 때문

- view.xml 파일
```html
<t:Table rows="{local>/persons}">
    <t:columns>

        <t:Column>
            <Label text="Name" />
            <t:template>
                <Text text="{local>name}" />
            </t:template>
        </t:Column>

        <t:Column>
            <Label text="Age" />
            <t:template>
                <Text text="{local>age}" />
            </t:template>
        </t:Column>

        <t:Column>
            <Label text="Tel" />
            <t:template>
                <Text text="{local>tel}" />
            </t:template>
        </t:Column>

    </t:columns>
</t:Table>
```
</br>

### SAPUI5 Dialog Fragment 모델 바인딩 예제 
- onInit에서 "dialog"라는 이름으로 JSONModel 생성
- Fragment를 열 때 onPress에서 기존 "dialog" 모델을 Fragment에 연결
- 이렇게 해야 Fragment 안의 바인딩({dialog>/inputValue1} 등)이 정상 작동
</br>

- Main.controller.js 파일
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/ui/core/Fragment"
], (Controller, JSONModel, Fragment) => {
    "use strict";

    return Controller.extend("ycl2project07.controller.Main", {
        onInit() {
            let oData = {
                name : {
                    firstName : "Hong",
                    lastName : "Gildong"
                },
                inpvalue : "hihi"
            };
            let oModel = new JSONModel(oData);
            this.getView().setModel(oModel);

            this.getView().setModel(new JSONModel({
                inputValue1: "1",
                inputValue2: "2",
                inputValue3: "3"
            }), "dialog");
        },
        onPress() {
            let oModel = this.getView().getModel("dialog");
            let oDialog = sap.ui.getCore().byId("idDialog");

            if(oDialog) {
                oDialog.open();
            }
            else {
                Fragment.load({
                    name: "ycl2project07.view.fragment.DataChange",
                    type: "XML",
                    controller: this
                }).then(function(inputDiolog) {
                    inputDiolog.setModel(oModel, "dialog");
                    inputDiolog.open();
                })
            }
        },
        onClose: function() {
            sap.ui.getCore().byId("idDialog").close();
        }
    });
});
```
</br>

- DataChange.fragment.xml 파일
```html
<Dialog id="idDialog" title="First Dialog">
    <content>
        <Text text="팝업 띄우기 완료!" />
        <SimpleForm>
            <Label text="First Name" /><Input value="{dialog>/inputValue1}" />
            <Label text="Last Name" /><Input value="{dialog>/inputValue2}" />
            <Label text="Input Value" /><Input value="{dialog>/inputValue3}" />
        </SimpleForm>
    </content>
    <buttons>
        <Button text="OK" press=".onDialogOKPress" />
        <Button text="Close" press=".onClose" />
    </buttons>
</Dialog>
```
</br>
</br>
</br>

# 10/29 기록
### getData()
- 모델이 가지고 있는 전체 데이터를 JavaScript 객체 형태로 가져오는 함수
```java
oModel.getData();
```
```java
let oModel = this.getView().getModel("local");
let oData = oModel.getData();
console.log(oData);
```
</br>

### getProperty(path)
- 모델 안의 특정 경로(`path`)에 있는 데이터만 가져옴
```java
oModel.getProperty("/경로");
```
```java
let firstName = oModel.getProperty("/name/firstName");
console.log(firstName); // "Hong"
```
</br>

### setData(data, merge)
- 모델의 데이터를 전체 교체하거나, 기존 데이터와 병합
- 병합여부 → true면 기존 데이터 유지하면서 합침. false면 전체 교체 (기본값)
- true일 때 새로 전달한 속성이 기존 데이터에 있으면 덮어쓰고, 새로 전달한 속성이 없으면 기존 값 그대로 유지
```java
oModel.setData(새로운데이터객체, 병합여부);
```
```java
oModel.setData({
    name: { firstName: "Kim", lastName: "Yuna" },
    inpValue: "NewValue"
}, true);
```
</br>

### setProperty(path, value)
- 모델 안의 특정 경로(`path`)에 있는 데이터만 부분 변경
```java
oModel.setProperty("/경로", 변경할값);
```
```java
oModel.setProperty("/name/firstName", "Park");
oModel.setProperty("/inpValue", "Hello!");
```
</br>

### < 예제 1 >
- 아래는 같은 기능을 하는 코드
```java
oModel.setProperty("/name/firstName", oModel.getProperty("/dialogFirstName"));
oModel.setProperty("/name/lastName", oModel.getProperty("/dialogLastName"));
oModel.setProperty("/inpValue", oModel.getProperty("/dialogInputValue"));

let allDatas = oModel.getData();
allDatas.name.firstName = allDatas.dialogFirstName;
allDatas.name.lastName = allDatas.dialogLastName;
allDatas.inpValue = allDatas.dialogInputValue;
oModel.setData(allDatas, true);
```
</br>

### < 실습 1 >
- 계산기 : 계산한 내역을 모델에 추가하여 table에서 조회함
</br>

- controller.js 파일
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/m/MessageBox"
], (Controller, JSONModel, MessageBox) => {
    "use strict";

    return Controller.extend("ycl2project082.controller.Main", {
        onInit() {
        let oData = { 
                calcDatas : [ 
                    { key : "PLUS", text : "+"},
                    { key : "MINUS", text : "-"},
                    { key : "MULTIPL", text : "*"},
                    { key : "DIVIDE", text : "/"}
                ],
                total_result : []
            };
            let oModel = new JSONModel(oData);
            this.getView().setModel(oModel, "select");
        },
        onCalc: function() {
            let oModel = this.getView().getModel("select");
            let Number1 = Number(this.byId("idNumber1").getValue());
            let Number2 = Number(this.byId("idNumber2").getValue());

            let oSelect = this.byId("idselect").getSelectedItem().getKey();
            let result;

            if(oSelect === "PLUS") {
                oSelect="+";
                result = Number1+Number2;
            }
            else if(oSelect === "MINUS") {
                oSelect="-";
                result = Number1-Number2;
            }
            else if(oSelect == "MULTIPL") {
                oSelect="*";
                result = Number1*Number2;
            }
            else if(oSelect === "DIVIDE") {
                oSelect="/";
                result = Number1/Number2;
            }

            let total_result = oModel.getProperty("/total_result");
            total_result.push({
                number1: Number1,
                number2: Number2,
                key: oSelect,
                result: result
            });
            oModel.setProperty("/total_result", total_result);
            MessageBox.show(`계산 결과는 ${result} 입니다!`);
        }
    });
});
```
</br>

- view.xml 파일
```html
<mvc:View controllerName="ycl2project083.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:t="sap.ui.table"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <Input id="idNumber1" width="100%" />
            <Select 
                id="idselect" 
                items="{select>/calcDatas}"
                width="100%" 
                showSecondaryValues="true">
                <core:ListItem 
                    key="{select>key}" 
                    text="{select>text}" 
                    additionalText="{select>key}"/>
            </Select>
            <Input id="idNumber2" width="100%" />
            <Button text="계산하기" press="onCalc"
                    width="100%" type="Emphasized" />

            <t:Table rows="{select>/total_result}">
                <t:columns>
                    <t:Column>
                        <Label text="Number1" />
                        <t:template>
                            <Text text="{select>number1}" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="key" />
                        <t:template>
                            <Text text="{select>key}" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Number2" />
                        <t:template>
                            <Text text="{select>number2}" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="=" />
                        <t:template>
                            <Text text="=" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Result" />
                        <t:template>
                            <Text text="{select>result}" />
                        </t:template>
                    </t:Column>
                </t:columns>
            </t:Table>
    </Page>
</mvc:View>
```
</br>
</br>
</br>

# 10/30 기록
### 1) Property Binding (속성 바인딩)
- 컨트롤의 단일 속성을 모델 값에 연결. 모델 값이 변경되면 UI 속성도 자동 업데이트.
```html
<Text text="{모델명>/경로}" />

<Text text="{customer>/CustomerName}" />
<Text text="{main>/state}" />
```
</br>

### 2) Aggregation Binding (집합 바인딩)
- 컨트롤의 자식 집합(aggregation)에 모델 데이터를 연결. 주로 리스트, 테이블, VBox 등 반복되는 UI 생성에 사용.
- Table, list 등 반복적인 객체 출력 용도 사용시
```html
<Table items="{모델명>경로}">
    <columns>...</columns>
    <items>
        <ColumnListItem>
            <cells>
                <Text text="{모델명>속성}" />
            </cells>
        </ColumnListItem>
    </items>
</Table>

<Table id="idCustomers" items="{customer>/Customers}">
    <columns>
        <Column><Text text="이름" /></Column>
        <Column><Text text="나이" /></Column>
    </columns>
    <items>
        <ColumnListItem>
            <cells>
                <Text text="{customer>CustomerName}" />
                <Text text="{customer>Age}" />
            </cells>
        </ColumnListItem>
    </items>
</Table>
```
</br>

### 3) Element Binding (바인딩 컨텍스트)
- 컨트롤 전체(Element)를 특정 모델 경로에 바인딩. 하위 속성들은 상대 경로로 접근 가능.
- 특정 control에 특정 경로 데이터를 상대 바인딩 시킬 수 있게 하기 위함.
```java
this.byId("idVBox").bindElement({
    path: "/company",
    model: "main"
});
```
```html
<VBox id="idVBox" class="sapUiSmallMargin">
    <Text text="{main>name}" />
    <Text text="{main>city}" />
</VBox>
```
</br>

### 4) Expression Binding (표현식 바인딩)
- 단순 바인딩이 아니라, 모델 데이터를 기반으로 계산/조건 처리 후 UI 속성에 반영.
- view에 바인딩 시 간단한 로직처리 가능
- 꺽새 '<'는 `&lt;` 그리고 '&&'는 `&amp;&amp;`
```html
{= ${model>/arr} >= 100}

<Text text="{= ${모델명>속성} > 18 ? '성인' : '청소년'}" />

<Text text="{= ${customer>Age} >= 20 ? '성인' 
                  : ${customer>Age} >= 14 ? '청소년' 
                  : '어린이' }" />
```
</br>
</br>

### Element Binding
- UI 요소를 모델의 특정 데이터(객체)에 연결

### Context
- 바인딩 시 자동 생성되는 객체로 모델 정보, 데이터 경로, 현재 인덱스 등을 가짐
- 리스트 구조(List, Table)에서 각 항목마다 개별 context 생성
</br>

### JSONModel.loadData
- 외부 JSON 파일을 모델에 불러와 데이터로 채우는 함수
```java
oModel.loadData("파일 경로");
```
```java
let oModel = new JSONModel();
oModel.loadData(sap.ui.require.toUrl("ycl2project082/model/data.json"));
this.getView().setModel(oModel, "main");
```
</br>

### Element Binding (`bindElement`)
- 컨테이너(VBox 등)에 모델 객체를 연결해, 자식 컨트롤이 해당 객체를 기준으로 데이터를 참조하게 함
- JS 함수 형식
```java
control.bindElement({
    path: "모델 경로",
    model: "모델 이름"
});
```
</br>

### 직접 경로 바인딩 (bindElement 불필요한 경우)
- bindElement 필요 없음
```html
<Text binding="{/company}" text="{state}" />    // 모델명 x
```
```html
<Text text="{main>/company/state}" />           // 모델명 o
```
</br>

### 컨텍스트 바인딩 (bindElement 필요한 경우)
- 여러 속성을 바인딩할 때 사용
</br>
  
1) 이름 없는 기본 모델
- controller.js 파일
```java
onInit() {
            let oModel = new JSONModel();
            oModel.loadData(sap.ui.require.toUrl("ycl2project082/model/data.json"));
            this.getView().setModel(oModel);

            this.byId("idVBox").bindElement("/company");
}
```
- view.xml 파일
```html
<VBox id="idVBox" class="sapUiSmallMargin">
    <Text text="VBox안에 데이터 : {name}" />
    <Text text="VBox안에 데이터 : {street}" />
    <Text text="VBox안에 데이터 : {city}" />
    <Text text="VBox안에 데이터 : {state}" />
</VBox>
```
</br>
</br>

2) 이름 있는 모델
- controller.js 파일
```java
onInit() {
            let oModel = new JSONModel();
            oModel.loadData(sap.ui.require.toUrl("ycl2project082/model/data.json"));
            this.getView().setModel(oModel, "main");

            this.byId("idVBox").bindElement({
                path : "/company",
                model : "main"
            });
}
```
- view.xml 파일
```html
<VBox id="idVBox" class="sapUiSmallMargin">
    <Text text="VBox안에 데이터 : {main>name}" />
    <Text text="VBox안에 데이터 : {main>street}" />
    <Text text="VBox안에 데이터 : {main>city}" />
    <Text text="VBox안에 데이터 : {main>state}" />
</VBox>
```
</br>
</br>

### onSelectionChange
- `sap.m.Table`에서 사용자가 행(Row)을 선택할 때 실행되는 이벤트
```java
onSelectionChange: function(oEvent) {
    // 이벤트 처리 로직
}
```
</br>

### getSource()
- 이벤트를 발생시킨 컨트롤 객체를 반환
```java
let oTable = oEvent.getSource(); // 클릭한 테이블 객체
```
</br>

### getParameters()
- 이벤트 객체에 담긴 파라미터 정보 반환. Row 선택 이벤트에서는 선택된 항목, 인덱스 등이 포함됨.
```java
let oParams = oEvent.getParameters();
let oSelectedItem = oParams.listItem; // 선택된 Row
```
</br>

### getBindingContext()
- 컨트롤 또는 Row가 참조하는 모델과 경로를 반환
```java
let oBindingContext = oSelectedItem.getBindingContext("customer");
```
</br>

### setBindingContext()
- 컨트롤에 특정 모델의 컨텍스트를 바인딩. 다른 테이블, Form 등에서 데이터 표시할 때 사용
```java
oControl.setBindingContext(oBindingContext, "모델명")/;
```
```java
this.byId("idBookings").setBindingContext(oBindingContext, "customer");
```
</br>

### getPath()
- 바인딩 컨텍스트(BindingContext)가 참조하는 모델 내 경로(Path)를 반환
```java
let sPath = oBindingContext.getPath();
```
</br>

- 사용자가 sap.m.Table에서 행(Row)을 클릭했을 때 자동으로 호출되는 이벤트 함수
- 고객을 선택하면 그 고객의 _Bookings 데이터가 아래 테이블에 자동 표시됨
- oEvent.getParameters() → 이벤트에 포함된 여러 값들을 가져옴.
- .listItem → 사용자가 선택한 그 행(ColumnListItem) 객체
- .getBindingContext("customer") → 선택된 아이템이 바인딩된 모델 경로(Context)를 가져옴.
```java
onSelectionChange: function(oEvent) {
    // 이벤트 함수는 이벤트 객체가 파라미터로 들어온다
    // 이벤트 객체는 이벤트마다 다르다
    // .getSource : 이벤트를 일으킨 객체
    // .getParameters : 이벤트에 들어있는 파라미터 정보 (요게 다름)
    let oBindingContext = oEvent.getParameters().listItem.getBindingContext("customer");
    let sPath = oBindingContext.getPath();  // 현재 선택한 Item의 모델 경로

    this.byId("idBookings").setBindingContext(oBindingContext, "customer");
}
```
</br>

### formatter (포매터 함수)
- 바인딩 값이 화면에 표시되기 전에 데이터를 변환할 때 사용
- 파라미터 값이 있을 때만 처리(if(sValue) {})
- 파라미터에 undefined 이런 애들도 들어오기 때문
```java
<Text text="{path: '모델명>속성', formatter: '.포매터함수명'}" />
```
- view.xml 파일
```java
<Text text="{
    path: 'customer>Age',
    formatter: '.fnFormatter'
}" />
```
- controller.js 파일
```java
fnFormatter: function(sValue) {
    let result;
    // formatter 사용시 if문으로 value가 있는 경우를 체크하여
    // 처리하는게 좋다. value 값만 들어오는게 아니기 때문
    if(sValue) {    
        let oModel = this.getView().getModel("customer");

        if(sValue >= 20) result = "성인";
        else if(sValue >= 17) result = "중학생";
        else if(sValue >= 14) result = "초등학생";
        else if(sValue >= 8) result = "초등학생";
        else result = "아동";
        return result;
    }
}
```
</br>

### < 실습 1 >
```java
onPress: function(oEvent) {
    let oRow = oEvent.getSource().getParent();
    let oBindingContext = oRow.getBindingContext("customer");
    let sPath = oBindingContext.getPath();

    let oModel = this.getView().getModel("customer");
    let oData = oModel.getProperty(sPath);
    let phone_num = oData.PhoneNumber;
    sap.m.MessageToast.show(phone_num);
}
```
</br>
</br>
</br>

# 11/03 기록
### 클라이언트 vs 서버 모델
1) Client (Local) Model
   - JSONModel을 사용
   - 로컬 데이터(이미 가지고 있는 데이터)를 화면과 연결할 때 사용

2) Server Model
   - ODataModel V2를 사용
   - 서버에 있는 데이터를 OData 서비스로 요청하고, 응답을 화면에 바인딩할 때 사용
</br>

### OData 서비스 활용
- 샘플 Northwind 서비스와 연결하여 프로그램 생성 가능
- 연결 시 OData Model이 자동 생성됨
- 이름 없이 `기본 모델(Default Model)`로 설정
- 모델 설정 정보는 `manifest.json`에 기록됨
</br>

### 🌐 OData 기본 개념 정리

| 용어 | 의미 | 예시 |
|------|------|------|
| **Entity Set** | 여러 개의 데이터를 모아둔 데이터 집합 (즉, 하나의 테이블) | 예: **Orders** 테이블 |
| **Entity** | Entity Set 안에 들어 있는 한 줄의 데이터 (레코드. Row 1건) | 예: 주문번호가 1001인 주문 데이터 |
| **Property** | Entity 안에 포함된 각각의 필드 (Field 1개) | 예: OrderID, CustomerName, OrderDate |
| **Entity Type** | Entity의 전체 구조와 필드 정의 (Structure) | 예: Orders 테이블의 필드 구조 정의 |
</br>

### OData 요청 예시
```bash
https://port8081-workspaces-ws-kzwp3.us10.trial.applicationstudio.cloud.sap/northwind/northwind.svc/Customers?$format=json&$filter=CustomerID eq 'ALFKI'
```
- 서버(Northwind 서비스)에 CustomerID가 'ALFKI'인 고객 데이터를 요청함
- 응답(Response)은 JSON 형식으로 받음
</br>

### 데이터 처리 방식
1) 로컬(Local) 데이터
   - 이미 가지고 있는 데이터는 `.getData()` 또는 `.getProperty()`로 접근하여 사용

   
2) 서버(Server) 데이터
   - 필요한 데이터를 요청(Request) 해서 응답(Response) 으로 받음
   - 받은 데이터는 JSON 형식이며, 이를 JSONModel 에 담아 활용할 수 있음
   - 모델에 데이터를 넣거나 수정할 때는 setData() 또는 setProperty()를 사용함
</br>

### DynamicPage 구성
- `<DynamicPage>`의 `<content>` 영역에는 하나의 컨텐츠만 들어갈 수 있음
- 여러 UI 요소(Button, Table 등)를 함께 넣고 싶다면 `<VBox>`로 감싸서 하나의 컨텐츠로 구성해야 함
</br>
</br>

### getOwnerComponent()
- 컨트롤러가 속한 앱(Component)을 가져옴.
- getView()는 현재 컨트롤러의 뷰, getOwnerComponent()는 앱 전체를 가져옴
```java
let oModel = this.getOwnerComponent().getModel(); // 기본 OData 모델 가져오기
```
</br>

### oModel.read()
- OData 서버에서 데이터를 조회(read)함
- 단 건 조회: 하나의 레코드 조회 시 `oReturn`에 바로 객체로 데이터가 들어옴.
- 다 건 조회: 여러 레코드 조회 시 `oReturn.results` 배열 안에 객체들이 들어 있음.
```java
oModel.read("EntitySet", {
    filters: [oFilter],            // 조건
    urlParameters: { "$expand": "Relation" }, // 관련 데이터 확장
    success: function(oData) {},   // 조회 성공 시 실행
    error: function(oError) {}     // 조회 실패 시 실행
});
```
</br>

### oModel.createKey(sPath, oParameters);
- OData 엔티티의 고유 경로(Key Path)를 생성하는 함수
- `sPath` : 엔티티 세트 이름
- `oParameters` : 엔티티 키(Primary Key) 이름과 값의 쌍
```java
oModel.createKey(sPath, oParameters);
```
- 단일 키
```java
var oModel = this.getView().getModel();

var sKeyPath = oModel.createKey("/Products", {
   ProductID: 1
});

console.log(sKeyPath);
// 출력: "/Products(ProductID=1)"
```
- 복합 키
```java
var sKeyPath = oModel.createKey("/SalesOrderItems", {
   SalesOrderID: "SO123",
   ItemPosition: "10"
});

console.log(sKeyPath);
// 출력: "/SalesOrderItems(SalesOrderID='SO123',ItemPosition='10')"
```
</br>

```java
let oLocalModel = this.getView().getModel("local");
let oModel = this.getOwnerComponent().getModel();   // OData Model. 이름없는 기본모델
let oFilter = new Filter({
    path : "ProductID",
    operator : "BT",
    value1 : 10,
    value2 : 20
});

oModel.createKey("/Products", {
   OrderID : "1",
   ProductID : "2"
});
// sPath => "Order_Details(OrderID=1, ProductID=2)"

// .create() 생성 .read() 조회 .update() 업데이트 .remove() 삭제 
// oModel.read("경로", {});
oModel.read("/Products", {            // oModel.read("/Products(${변수})" => 특정 엔티티(데이터 한 건)를 읽기
    urlParameters: {
        "$expand" : "Supplier"
    },
    filters: [oFilter],
    // sorters: [],
    success: function(oReturn) {
        // 단 건 조회 : oReturn 자체에 데이터가 들어옴
        // 다 건 조회 : oReturn.results 해서 배열 접근

        // oLocalModel.setProperty("경로", 세팅할데이터);
        let oData = [];
        for(let i=0; i<oReturn.results.length; i++) {
            let item = oReturn.results[i];
            oData.push({
                ProductID: item.ProductID,
                ProductName: item.ProductName,
                SupplierID: item.SupplierID,
                UnitsInStock: item.UnitsInStock
            });
        }
        oLocalModel.setProperty("/results", oData);
    },
    error: function() {}
});
```
</br>

### this 문제 해결 방법 (SAPUI5 비동기 함수 내부)
- `success`, `error` 같은 콜백 함수 안에서는 `this`가 Controller를 잃어버림 → 해결 필요
</br>

1) `.bind(this)` 사용
```java
success: function(oReturn) {
    this.getView(); // 정상 작동
}.bind(this);
```
2) `let that = this;` 사용
```java
let that = this;
success: function(oReturn) {
    that.getView(); // that으로 컨트롤러 접근
}
```
3) 필요한 변수 미리 선언
```java
let oView = this.getView();
success: function(oReturn) {
    oView.getModel().setData(...);
}
```
</br>

### OData URL
- 전체 엔티티 조회: `/Products?$`
- 특정 엔티티 조회 + JSON + 확장: `/Products(1)?$format=json&$expand=Supplier`
- 복합 키 조회: `/EntitySet(key1=값,key2=값)`
- 단일 키 조회: `/EntitySet(key1=값)` 또는 `/EntitySet(값)`
</br>

### 뷰(View)와 라우터(Router)
- 애플리케이션 시작 → RootView (App.view.xml) 실행
- 라우터 역할 → URL 관리, 기본 URL → Main.view.xml
- 라우터 구성: config → 라우터 정의, routes → 라우터 객체 생성, targets → 화면 출력 위치 지정
</br>

### 라우터 파라미터
- URL 형식: `"detail/{필수파라미터}/:옵션파라미터:"`
- 주의: 라우터를 2개 이상 만들면 첫 번째 라우터만 적용됨 → 명확히 구분 필요
</br>

### 화면 전환 애니메이션
- 지원 애니메이션: `slide`(기본), `flip`, `show`, `fade`
</br>
</br>

## < 라우터 선언 >

### 1) manifest.json 파일
- `manifest.json`에서 라우터는 `sap.ui5.routing` 안에 선언
- `config` → 라우터 기본 설정
- `routes` → URL 패턴과 라우터 이름
- `targets` → 어떤 뷰(View)를 보여줄지 연결
```java
"sap.ui5": {
    "routing": {
        "config": { ... },
        "routes": [ ... ],
        "targets": { ... }
    }
}
```
- routes 선언 형식
- `name` → navTo에서 사용할 라우터 이름
- `pattern` → 브라우저 URL 경로
  - {param} → 필수 파라미터
  - :param: → 선택 파라미터
- `target` → 연결할 targets ID 배열 (1개 이상 가능)
```java
"routes": [
    {
        "name": "<라우터 이름>",
        "pattern": "<URL 패턴>",
        "target": ["<타겟 ID>"]
    },
    ...
]
```

- targets 선언 형식
- `id` → 뷰의 고유 ID, 화면 전환 시 참조 가능
- `name` → 실제 XML 뷰 파일 이름
```java
"targets": {
    "<타겟 ID>": {
        "id": "<뷰 컨트롤 ID>",
        "name": "<뷰 파일 이름>"
    },
    ...
}
```
</br>

- `pattern: ""` → 앱 실행 시 기본으로 표시될 화면
```java
"routing": {
   "config": {
     "routerClass": "sap.m.routing.Router",
     "controlAggregation": "pages",
     "controlId": "app",
     "transition": "slide",
     "type": "View",
     "viewType": "XML",
     "path": "ycl2project10.view",
     "async": true,
     "viewPath": "ycl2project10.view"
   },
   "routes": [
     {
       "name": "RouteMain",
       "pattern": "",
       "target": [
         "TargetMain"
       ]
     },
     {
       "name": "RouteDetail",
       "pattern": "detail/{param1}/:param2:",
       "target": [
         "TargetDetail"
       ]
     }
   ],
   "targets": {
     "TargetMain": {
       "id": "Main",
       "name": "Main"
     },
     "TargetDetail": {
       "id": "Detail",
       "name": "Detail"
     }
   }
 }
```
</br>

### 2) view.xml 파일
- Main.view.xml 파일
- showNavButton="true" → 상단 왼쪽에 뒤로가기 버튼 표시
- navButtonPress="onNavButtonPress" → 뒤로가기 버튼 클릭 시 실행될 함수 지정
```html
<mvc:View controllerName="ycl2project10.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text text="Main page" />
        <Button text="화면 이동" press="onPress" />
    </Page>
</mvc:View>
```

- Detail.view.xml 파일
```html
<mvc:View controllerName="ycl2project10.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page2" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text id="idText" text="Detail page" />
    </Page>
</mvc:View>
```
</br>

### 3) controller.js 파일
</br>

### getRouter()
- 현재 Component에서 사용하는 Router 객체 전체를 가져옴
- Router 전체를 가져와서 `navTo`, `getRoute` 등 메서드를 사용 가능
```java
let oRouter = this.getOwnerComponent().getRouter();
oRouter.navTo("RouteDetail", { param1: "hihi" });
```
</br>

### getRoute(routeName)
- Router 안에서 특정 Route 객체 하나를 가져옴
- 해당 라우트의 URL 패턴 매칭 이벤트 처리 등
```java
let oRoute = this.getOwnerComponent().getRouter().getRoute("RouteDetail");
oRoute.attachPatternMatched(this._onMatched, this);
```
</br>

### navTo
- 다른 화면(Route)으로 이동
```java
router.navTo(routeName, parameters?, replace?);
```
- `routeName`: 이동할 라우트 이름
- `parameters`: URL에 전달할 파라미터 {param1: "값", param2: "값"}
- `replace`: true → 히스토리 초기화, false → 뒤로가기 유지
```java
let oRouter = this.getOwnerComponent().getRouter();
oRouter.navTo("RouteDetail", { param1: "hihi", param2: "okok" }, false);
```
- `/detail/hihi/okok` 화면으로 이동, 뒤로가기 가능

</br>

### attachPatternMatched
- URL 패턴과 일치할 때 특정 함수 실행
- `onInit` → 컨트롤러 최초 생성 시 1번 실행, `attachPatternMatched` → URL 패턴 매칭될 때마다 실행
```java
route.attachPatternMatched(handlerFunction, context?);
```
- `handlerFunction`: URL이 패턴과 맞을 때 실행할 함수
- `context`: 함수 내부에서 this 바인딩
```java
oRouter.getRoute("RouteDetail")
       .attachPatternMatched(this._onPatternMatched, this);

_onPatternMatched: function(oEvent) {
    let param1 = oEvent.getParameter("arguments").param1;
    this.byId("idText").setText(param1);
}
```
- `/detail/hihi`로 이동하면 `_onPatternMatched` 실행, 화면에 `"hihi"` 표시
</br>
</br>
</br>

# 11/03(화) 기록
# chart 생성 - view 버전
### 1) `<viz:VizFrame>`
- 차트를 그리는 핵심 컨트롤
- `<Page>`나 `<Panel>` 안에 배치, 내부에 `<dataset>`와 `<feeds>` 포함
- 속성:
  - `vizType` : 차트 종류 (`line`, `bar`, `donut` 등)
  - `vizProperties` : 제목, 레이블 등 차트 속성 설정
  - `uiConfig` : Fiori UI 스타일 적용
  - `width/height` : 차트 크기 지정
```html
<viz:VizFrame 
    id="idViewChart"
    width="300px"
    height="300px"
    vizType="donut"
    uiConfig="{'applicationSet':'fiori'}"
    vizProperties="{
        title : { visible : true, text : 'My Chart' },
        plotArea : {
            drawingEffect: 'glowsy',
            dataLabel: { visible: true },
            colorPalette: ['#FAED7D', '#FFB2D9', '#FFC19E']
        }
    }">
```
</br>

### 2) `<viz:dataset>` + `<FlattenedDataset>`
- 차트에 표시할 데이터 집합을 정의
- 이 안에서 dimensions와 measures를 정의하여 차트에 어떤 데이터를 표시할지 결정
- `<VizFrame>` 내부에 배치
- 속성:
  - `data="{view>/list}"` : JSONModel(view)의 list 배열 데이터를 바인딩
```html
<viz:dataset>
    <viz.data:FlattenedDataset data="{view>/list}">
        <!-- 차원/측정값 정의 -->
    </viz.data:FlattenedDataset>
</viz:dataset>
```
</br>

### 3-1) `<viz.data:dimensions>`
- 차트의 범주(Category) 역할, X축이나 색상 구분에 사용
- 여러 개 정의 가능, 도넛 차트에서는 색상을 구분하는 기준이 되기도 함
- `<FlattenedDataset>` 안에 배치
- 속성:
  - `name` : 차트에서 표시될 항목 이름(예: "이름")
  - `value` : 모델 필드와 연결 (`{view>name}`)
```html
<viz.data:dimensions>
    <viz.data:DimensionDefinition 
        name="이름" 
        value="{view>name}" />
</viz.data:dimensions>
```
</br>

### 3-2) `<viz.data:measures>`
- 차트의 값(Value) 역할, Y축 또는 크기에 사용
- 여러 개 정의 가능, 도넛 차트에서는 조각의 크기를 결정
- 숫자 여러개 표시하고 싶을 때 Measure 추가
- `<FlattenedDataset>` 안에 배치
- 속성:
  - `name` : 차트에서 표시될 값 이름(예: "숫자")
  - `value` : 모델 필드와 연결 ({view>rate})
```html
<viz.data:measures>
    <viz.data:MeasureDefinition 
        name="숫자" 
        value="{view>rate}" />
</viz.data:measures>
```
 </br>

### 4) `<viz:feeds>` + `<viz.feeds:FeedItem>`
- 차트 데이터와 시각적 요소를 연결
- 도넛/파이 차트는 color(조각 색상)와 size(조각 크기)
- 막대/라인 차트는 CategoryAxi와 valueAxis 사용
- `<VizFrame>` 내부에 배치
- 속성:
  - `uid` : 차트에서 피드 역할 지정 (color, size, categoryAxis, valueAxis 등)
  - `type` : Dimension 또는 Measure 지정
  - `values` : 매핑할 데이터 이름(Dimension/Measure에서 정의한 name)
```html
<viz:feeds>
    <viz.feeds:FeedItem 
        uid="color" 
        type="Dimension" 
        values="이름" />
    <viz.feeds:FeedItem 
        uid="size" 
        type="Measure" 
        values="숫자" />
</viz:feeds>
```
</br>

---

# chart 생성 - controller 버전
### 1) FlattenedDataset
- VizFrame(차트)에 바인딩할 데이터 구조 정의
- `dimension` → X축 / 분류 기준 (예: 제품명)
- `measures` → Y축 / 수치 값 (예: 매출, 수량)
- `data.path` → 모델의 데이터 경로
```java
let oDataset = new FlattenedDataset({
    dimensions: [
        { name: "차원이름", value: "{모델명>필드명}" }
    ],
    measures: [
        { name: "측정값이름", value: "{모델명>필드명}" }
    ],
    data: { path: "모델명>/데이터경로" }
});
```
```java
let oChart = this.byId("idControllerChart");

// dataset 만들기
let oDataSet = new FlattenedDataset({
    dimensions: [{ name : "Product", value : "{cont>product}" }],
    measures: [{ name : "Amount", value : "{cont>amount}" }],
    data: { path : "cont>/sales" }
});
oChart.setDataset(oDataSet);
```
</br>

### 2) FeedItem
- VizFrame 차트에서 데이터와 시각적 요소(축, 색상 등) 를 연결하는 역할
- FeedItem 여러 개를 추가할 수 있음
```java
let oFeed = new FeedItem({
    uid: "feed유형",      // 예: valueAxis, categoryAxis, color, size
    type: "Dimension" or "Measure",
    values: ["데이터이름"]
});
```
```java
let feedValueAxis = new FeedItem({
    uid: "valueAxis",
    type: "Measure",
    values: ["Amount"]
});
let feedCategoryAxis = new FeedItem({
    uid: "categoryAxis",
    type: "Dimension",
    values: ["Product"]
});

oChart.addFeed(feedValueAxis);
oChart.addFeed(feedCategoryAxis);

oChart.setVizProperties({
    title: { test : '막대차트', visible : true }
})
oChart.setVizType("line");
```
</br>
</br>

### ODataModel.read() 정리

### 1) 기본 형식
- 경로의 데이터를 읽고 성공하면 success 실행, 실패하면 error 실행
- sPath : 읽을 대상의 경로 (엔티티셋 또는 키값 포함 경로)
- success : 요청 성공 시 실행되는 콜백 함수
- error : 요청 실패 시 실행되는 콜백 함수
```java
oModel.read(sPath, {
  success: function(oData, response) {},
  error: function(oError) {}
});
```
</br>

### 2) 단일 데이터 (단일 Key 조회)
- Products(1) → Products 엔티티셋에서 ProductID = 1인 레코드 조회
- 조회 결과는 단일 객체(oReturn)로 반환
- 배열이 아니라 단일 객체이므로 바로 oReturn.Property 사용 가능
```java
oModel.read("/Products(1)", {  // ProductID가 1인 단건 조회
    success: function(oReturn){
        console.log(oReturn.ProductName); // 조회된 데이터 사용
    },
    error: function(err){
        console.error(err);
    }
});
```
```java
oModel.read("/esConDetailSet(Carrid='AA')", {
    success: function(oReturn) {
        console.log(oReturn); // 단일 객체
    }
});
```
</br>

### 3) 단일 데이터 (복합 Key 조회)
- Key가 여러 개일 경우 (Key1='값1',Key2='값2') 형태
- 선택된 항목을 기반으로 특정 행 단건 조회 가능
- `"/EntitySetName(Key1='값',Key2='값')"`
```java
oModel.read("/esConDetailSet(Carrid='AA',Connid='0017')", {
  success: function(oReturn) {
    console.log(oReturn);
  }
});
```
- oReturn 결과 예시
```java
{
  Carrid: "AA",
  Connid: "0017",
  Airpto: "ICN"
}
```
- 실습 예제
```java
onSelectionChange: function() {
    let table = this.byId("idesConListSet");  
    let oRow = table.getSelectedItem();     
    let oBindingContext = oRow.getBindingContext("local");
    let sPath = oBindingContext.getPath();

    let oModel = this.getView().getModel("local");
    let inputCarrid = oModel.getProperty(sPath).Carrid;  
    let inputConnid = oModel.getProperty(sPath).Connid; 
    
    let aModel = this.getView().getModel("aModel");
    
    oModel.read(`/esConDetailSet(Carrid='${inputCarrid}',Connid='${inputConnid}')`, {            
        success: function(oReturn) {
            aModel.setProperty("/data", [{ Airpto: oReturn.Airpto }]);
        },
        error: function() {
            
        }
    });
}
```
</br>

### 4) 여러 건 (전체 조회)
- 키값 없이 엔티티셋만 지정하면 전체 데이터를 읽음
```java
oModel.read("/esConDetailSet", {
  success: function(oReturn) {
    console.log(oReturn.results);
  }
});
```
- 결과 데이터 구조
```java
{
  results: [
    { Carrid: "AA", Connid: "0017", Airpto: "ICN" },
    { Carrid: "LH", Connid: "0400", Airpto: "FRA" }
  ]
}
```
</br>

### 4) 조건 조회 (Filter 사용)
- 특정 조건만 조회하고 싶을 때는 filters 옵션을 사용
```java
oModel.read("/esConDetailSet", {
  filters: [
    new sap.ui.model.Filter("Carrid", "EQ", "AA")
  ],
  success: function(oData) {
    console.log(oData.results);
  }
});
```
</br>

### setProperty 헷갈리는 부분
- 초기 상태
```java
let oModel = new JSONModel({
  data: [
    { name: "A" },
    { name: "B" }
  ]
});
```
- 이때 이렇게 하면
```java
oModel.setProperty("/data", { name: "C" });
```
- 결과
```java
{
  data: { name: "C" }   // 배열이었던 부분이 객체로 바뀜
}
```
</br>
</br>
</br>

---
</br>

---

</br>
</br>

# 실습 코드 모음
</br>

### 실습 1 : 입력창의 값을 버튼 클릭 시 아래 텍스트에 표시하는 SAPUI5 기본 이벤트 처리 실습
- 버튼 클릭 시 입력창의 내용을 화면의 텍스트로 표시하는 간단한 SAPUI5 UI 이벤트 처리 기능을 개발함
</br>
<img width="426" height="216" alt="image" src="https://github.com/user-attachments/assets/52829eec-7190-4fa0-88e7-bebeb3fdb3df" />
</br>
</br>
</br>

- View1.view.xml
```html
<mvc:View controllerName="ycl2project01.controller.View1"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:l="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">  <!-- 태그 사이에 주석을 달면 오류 -->
    <Page id="page" title="{i18n>title}">
        <content> <!-- content는 sap.m.page의 Aggregation -->
            <l:VerticalLayout>
                <!-- 이런 객체 하나하나를 "Control" 이라고 부름 -->
                <Input id="idInput1" value="Hello world" />
                <Button id="idButton" text="OK" press="onClick" />
                <Text id="idText" text="안녕하세요" />
            </l:VerticalLayout>
        </content>
    </Page>
</mvc:View>
```
</br>

- View1.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/m/Button"
], 
// 위 배열에서 가져온 js파일들을 순서대로 파라미터에 넣어줌
(Controller, Button) => {    
    // 파라미터 변수들을 아래 로직에서 사용할 수 있음
    // 파라미터 순서 맞추기
    "use strict";   // 엄격모드 Javascript

    return Controller.extend("ycl2project01.controller.View1", {
        count : 10,
        onInit: function() {
        },
        onPress: function() {
            // this는 controller를 가리킴
            // .getView()는 Controller와 연결된 view를 가져옴
            // .byId(<아이디>)는 해당 아이디에 맞는 Control을 가져옴
            let oButton = this.getView().byId("idButton");

            // sap.m.Button의 Method인 .setText()를 활용하여
            // 버튼 클릭시 버튼의 Text 속성을 변경
            oButton.setText("Yes");
        },
        onClick: function() {
            // 버튼 클릭(press) 시 동작하는 이벤트 함수
            // 구현 내용
            // Input에 사용자가 입력한 값을 얻어, Text에 적용하고자 함
            //  1. sap.m.Input에 담긴 값을 가져온다.
            //  2. sap.m.Text에 해당 값을 적용한다.
            //  3. 가져온 값을 sap.m.Text 객체의 text 속성에 적용

            //  테스트: input 값 변경 후 버튼 클릭 시 Text 값도 동일하게 변경
            let oInput = this.getView().byId("idInput1");
            let sValue = oInput.getValue();
            let oText = this.getView().byId("idText");
            oText.setText(sValue);
        }
    });
});
```
</br>
</br>
</br>

### 두 개의 체크박스 선택 상태에 따라 텍스트를 동적으로 표시하는 SAPUI5 이벤트 처리 실습 예제
- 체크박스 선택 여부에 따라 버튼 클릭 시 해당 옵션 텍스트를 화면에 출력하는 기능을 개발함

<img width="256" height="232" alt="image" src="https://github.com/user-attachments/assets/ecd0ec75-476b-486d-895b-1ae021b2534d" />

<img width="188" height="173" alt="image" src="https://github.com/user-attachments/assets/7946b852-0794-48b6-b8ff-3b9553f89931" />

</br>
</br>
</br>

- Practice.view.xml
```html
<mvc:View controllerName="ycl2project02.controller.Practice"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <content>
            <VBox id="vbox">
                <CheckBox id="idCheckBox1" text="option 1" selected="true"/>
                <CheckBox id="idCheckBox2" text="option 2" selected="false"/>
                <Button id="idButton" text="Button" press="onClick"/>
                <Text id="idText"/>
            </VBox>
        </content>
    </Page>
</mvc:View>
```
</br>

- Practice.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project02.controller.Practice", {
        onInit() {
        },
        onClick: function() {
            let checkbox1 = this.getView().byId("idCheckBox1");
            let checkbox2 = this.getView().byId("idCheckBox2");
            let textbox1 = checkbox1.getText();
            let textbox2 = checkbox2.getText();
            let selectbox1 = checkbox1.getSelected();
            let selectbox2 = checkbox2.getSelected();
            let oText = this.getView().byId("idText");

            if(selectbox1 && selectbox2) {
                oText.setText(textbox1+textbox2);
            }
            else if(selectbox1) {
                oText.setText(textbox1);
            }
            else if(selectbox2) {
                oText.setText(textbox2);
            }
        }
    });
});
```
</br>
</br>
</br>

### SAPUI5 레이아웃 및 폼 구성 실습
- Panel + Toolbar + SimpleForm(ColumnLayout)으로 Supplier 정보 입력 폼을 구현하고, 확장/접기 가능한 패널 UI 레이아웃 구성을 실습함

<img width="1887" height="728" alt="image" src="https://github.com/user-attachments/assets/4137b90c-1d0a-4a83-be19-6e3e59fdf3f8" />

<img width="1919" height="865" alt="image" src="https://github.com/user-attachments/assets/baf8ce8e-ee5d-4220-be48-12a2c33ec529" />

</br>
</br>
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project03.controller.Main", {
        onInit() {
        }
    });
});
```
</br>

- Main.view.xml
```java
<mvc:View controllerName="ycl2project03.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
	xmlns:core="sap.ui.core"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <!-- <l:VerticalLayout class="sapUiContentPadding">       

            <Input value="input Value"/>
            <Text text="text" />
            <StepInput />
            <ComboBox ></ComboBox>      
            <Select />                  
            <DatePicker displayFormat="yyyy-MM-dd" />
            <DateRangeSelection />
            <Label text="label" />

        </l:VerticalLayout> -->

        <!-- sap.m.VBox 또는 sap.m.HBox로 대체 사용 가능 -->
        
        <!-- <l:HorizontalLayout >
            <Input value="input Value"/>
            <Text text="text" />
            <StepInput />
            <ComboBox ></ComboBox>      
            <Select />                  
            <DatePicker displayFormat="yyyy-MM-dd" />
            <DateRangeSelection />
            <Label text="label" />
        </l:HorizontalLayout> -->

        <!-- <l:Grid>
            <Input value="TEST1">
                <layoutData>
                    <l:GridData span="XL6 L2 M4 S12" />
                </layoutData>
            </Input>
            <Input value="TEST2">
                <layoutData>
                    <l:GridData span="XL6 L2 M4 S12" />
                </layoutData>
            </Input>
            <Input value="TEST3">
                <layoutData>
                    <l:GridData span="XL6 L2 M4 S12" />
                </layoutData>
            </Input>
            <Input value="TEST4">
                <layoutData>
                    <l:GridData span="XL6 L2 M4 S12" />
                </layoutData>
            </Input>
            <Input value="TEST5">
                <layoutData>
                    <l:GridData span="XL6 L2 M4 S12" />
                </layoutData>
            </Input>
            <Input value="TEST6">
                <layoutData>
                    <l:GridData span="XL6 L2 M4 S12" />
                </layoutData>
            </Input>
        </l:Grid> -->

        <!-- <f:Form id="FormChangeColumn_threeGroups234"
			editable="true">
			<f:title>
				<core:Title text="Supplier" />
			</f:title>
            <f:toolbar>
                <Toolbar >
                    <Title text="Toolbar title" />
                    <ToolbarSpacer />
                    <Button text="Test" />
                </Toolbar>
            </f:toolbar>
			<f:layout>
				<f:ColumnLayout
					columnsM="2"
					columnsL="3"
					columnsXL="4"
				/>
			</f:layout>
			<f:formContainers>
				<f:FormContainer title="Address">
					<f:formElements>
						<f:FormElement label="Name">
							<f:fields>
								<Input value="{SupplierName}" id="name"/>
							</f:fields>
						</f:FormElement>
						<f:FormElement label="Street">
							<f:fields>
								<Input value="{Street}" />
								<Input value="{HouseNumber}">
									<layoutData>
										<f:ColumnElementData cellsSmall="2" cellsLarge="1" />
									</layoutData>
								</Input>
							</f:fields>
						</f:FormElement>
						<f:FormElement label="ZIP Code/City">
							<f:fields>
								<Input value="{ZIPCode}">
									<layoutData>
										<f:ColumnElementData cellsSmall="3" cellsLarge="2" />
									</layoutData>
								</Input>
								<Input value="{City}" />
							</f:fields>
						</f:FormElement>
						<f:FormElement label="Country">
							<f:fields>
								<Select id="country" selectedKey="{Country}">
									<items>
										<core:Item text="England" key="England"/>
										<core:Item text="Germany" key="Germany"/>
										<core:Item text="USA" key="USA"/>
									</items>
								</Select>
							</f:fields>
						</f:FormElement>
						<f:FormElement label="Web">
							<f:fields>
								<Input value="{Url}" type="Url"/>
							</f:fields>
						</f:FormElement>
					</f:formElements>
				</f:FormContainer>
				<f:FormContainer title="Contact">
					<f:formElements>
						<f:FormElement label="Twitter">
							<f:fields>
								<Input value="{Twitter}" />
							</f:fields>
						</f:FormElement>
						<f:FormElement label="Email">
							<f:fields>
								<Input value="{Email}" type="Email"/>
							</f:fields>
						</f:FormElement>
						<f:FormElement label="Tel.">
							<f:fields>
								<Input value="{Tel}" type="Tel"/>
							</f:fields>
						</f:FormElement>
					</f:formElements>
				</f:FormContainer>
				<f:FormContainer title="Other">
					<f:formElements>
						<f:FormElement label="SMS">
							<f:fields>
								<Input value="{Sms}" type="Tel"/>
							</f:fields>
						</f:FormElement>
						<f:FormElement label="Mobile">
							<f:fields>
								<Input value="{Mobile}" type="Tel"/>
							</f:fields>
						</f:FormElement>
						<f:FormElement label="Pager">
							<f:fields>
								<Input value="{Pager}" type="Tel"/>
							</f:fields>
						</f:FormElement>
						<f:FormElement label="Fax">
							<f:fields>
								<Input value="{Fax}" type="Tel"/>
							</f:fields>
						</f:FormElement>
					</f:formElements>
				</f:FormContainer>
			</f:formContainers>
		</f:Form> -->

        <!-- /////////////////////////////////////////////////////////////////////////////////////// -->
        
        <!-- <f:SimpleForm id="SimpleFormChangeColumn_threeGroups234"
			editable="true"
			layout="ColumnLayout"
			title="Supplier"
			columnsM="2"
			columnsL="3"
			columnsXL="4"
			>
			<f:content>
				<core:Title text="Address" />
				<Label text="Name" />
				<Input id="name" value="{SupplierName}" />
				<Label text="Street/No." />
				<Input value="{Street}">
				</Input>
				<Input value="{HouseNumber}">
					<layoutData>
						<f:ColumnElementData cellsSmall="2" cellsLarge="1" />
					</layoutData>
				</Input>
				<Label text="ZIP Code/City" />
				<Input value="{ZIPCode}">
					<layoutData>
						<f:ColumnElementData cellsSmall="3" cellsLarge="2" />
					</layoutData>
				</Input>
				<Input value="{City}" />
				<Label text="Country" />
				<Select id="country" selectedKey="{Country}">
					<items>
						<core:Item text="England" key="England"/>
						<core:Item text="Germany" key="Germany"/>
						<core:Item text="USA" key="USA"/>
					</items>
				</Select>
				<Label text="Web" />
				<Input value="{Url}" type="Url"/>
				<core:Title text="Contact" />
				<Label text="Twitter" />
				<Input value="{Twitter}" />
				<Label text="Email" />
				<Input value="{Email}" type="Email"/>
				<Label text="Tel." />
				<Input value="{Tel}" type="Tel"/>
				<core:Title text="Other" />
				<Label text="SMS" />
				<Input value="{Sms}" type="Tel"/>
				<Label text="Mobile" />
				<Input value="{Mobile}" type="Tel"/>
				<Label text="Pager" />
				<Input value="{Pager}" type="Tel"/>
				<Label text="Fax" />
				<Input value="{Fax}" type="Tel"/>
			</f:content>
		</f:SimpleForm> -->

        <!-- /////////////////////////////////////////////////////////////////////////////////////// -->

        <Panel expandable="true" expanded="true">
            <headerToolbar>
                <Toolbar>
                    <Text text="Panel TEST" />
                    <ToolbarSpacer />
                    <Button text="add" icon="sap-icon://add-contact" />
                </Toolbar>
            </headerToolbar>
                <f:SimpleForm id="SimpleFormChangeColumn_threeGroups234"
                editable="true"
                layout="ColumnLayout"
                title="Supplier"
                columnsM="2"
                columnsL="3"
                columnsXL="4"
                >
                <f:content>
                    <core:Title text="Address" />
                    <Label text="Name" />
                    <Input id="name" value="{SupplierName}" />
                    <Label text="Street/No." />
                    <Input value="{Street}">
                    </Input>
                    <Input value="{HouseNumber}">
                        <layoutData>
                            <f:ColumnElementData cellsSmall="2" cellsLarge="1" />
                        </layoutData>
                    </Input>
                    <Label text="ZIP Code/City" />
                    <Input value="{ZIPCode}">
                        <layoutData>
                            <f:ColumnElementData cellsSmall="3" cellsLarge="2" />
                        </layoutData>
                    </Input>
                    <Input value="{City}" />
                    <Label text="Country" />
                    <Select id="country" selectedKey="{Country}">
                        <items>
                            <core:Item text="England" key="England"/>
                            <core:Item text="Germany" key="Germany"/>
                            <core:Item text="USA" key="USA"/>
                        </items>
                    </Select>
                    <Label text="Web" />
                    <Input value="{Url}" type="Url"/>
                    <core:Title text="Contact" />
                    <Label text="Twitter" />
                    <Input value="{Twitter}" />
                    <Label text="Email" />
                    <Input value="{Email}" type="Email"/>
                    <Label text="Tel." />
                    <Input value="{Tel}" type="Tel"/>
                    <core:Title text="Other" />
                    <Label text="SMS" />
                    <Input value="{Sms}" type="Tel"/>
                    <Label text="Mobile" />
                    <Input value="{Mobile}" type="Tel"/>
                    <Label text="Pager" />
                    <Input value="{Pager}" type="Tel"/>
                    <Label text="Fax" />
                    <Input value="{Fax}" type="Tel"/>
                </f:content>
            </f:SimpleForm>
        </Panel>

        <Panel expandable="true" expanded="true">
            <headerToolbar>
                <Toolbar>
                    <Text text="Panel TEST2" />
                    <ToolbarSpacer />
                    <Button text="add" icon="sap-icon://add-contact" />
                </Toolbar>
            </headerToolbar>
            <Text text="Hello Panel" />
        </Panel>

        <Panel class="sapUiSmallMargin" expandable="true" expanded="true">
            <headerToolbar>
                <Toolbar>
                    <Text text="Panel TEST3" />
                    <ToolbarSpacer />
                    <Button text="add" icon="sap-icon://add-contact" />
                </Toolbar>
            </headerToolbar>
            <Text text="Hello Panel" />
        </Panel>
    </Page>
</mvc:View>
```
</br>
</br>
</br>

### SAPUI5 계산기(Select + Input) 실습
- 두 숫자와 연산기호(+, -, ×, ÷)를 선택해 계산 결과를 MessageBox와 MessageToast로 출력하는 SAPUI5 계산기 기능을 개발함.
</br>

- 중요 : Select나 List에서 items="{select>/calcDatas}" 이런 식으로 바인딩하려면, 꼭 객체 안에 '배열 형태의 데이터'가 필요
- ```html
  <Select items="{modelName>/someArray}">
  ```
- 이런 형태로 바인딩할 때, someArray는 반드시 배열(Array)이어야 함
</br>

<img width="756" height="367" alt="image" src="https://github.com/user-attachments/assets/84219be8-d79c-465b-9763-cb68a6676cb8" />

<img width="555" height="275" alt="image" src="https://github.com/user-attachments/assets/05897ccb-2278-462c-8464-75c462f7c295" />

</br>
</br>
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project04.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <FlexBox justifyContent="Center" alignItems="Center">
            <VBox width="30%" class="sapUiSmallMargin">
                <Input id="idNumber1" width="100%" />
                <Select 
                    id="idselect" 
                    items="{select>/calcDatas}"
                    width="100%" 
                    showSecondaryValues="true">
                    <core:ListItem 
                        key="{select>key}" 
                        text="{select>text}" 
                        additionalText="{select>key}"/>
                </Select>
                <Input id="idNumber2" width="100%" />
                <Button text="계산하기" press="onCalc"
                        width="100%" type="Emphasized" />
            </VBox>
        </FlexBox>
    </Page>
</mvc:View>
```
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/m/MessageBox",
    "sap/m/MessageToast",
    "sap/ui/model/json/JSONModel"
], (Controller, MessageBox, MessageToast, JSONModel) => {
    "use strict";

    return Controller.extend("ycl2project04.controller.Main", {
        onInit() {
        let oData = { 
                calcDatas : [ 
                    { key : "PLUS", text : "+"},
                    { key : "MINUS", text : "-"},
                    { key : "MULTIPL", text : "*"},
                    { key : "DIVIDE", text : "/"}
                ]
            };
            let oModel = new JSONModel(oData);
            this.getView().setModel(oModel, "select");
        },
        onCalc: function() {
            // this.getView() 에서 .getView() 생략 가능! (버전업)
            //let oSelect = this.byId("idSelect");  oSelect = {bAllowTextSelection: true};

            let Number1 = Number(this.byId("idNumber1").getValue());
            let Number2 = Number(this.byId("idNumber2").getValue());

            let oSelect = this.byId("idselect").getSelectedItem().getKey();

            if(oSelect === "PLUS") {
                MessageBox.show(String(Number1+Number2));
                MessageToast.show(Number1+Number2);
            }
            else if(oSelect === "MINUS") {
                MessageBox.show(String(Number1-Number2));
                MessageToast.show(Number1-Number2);
            }
            else if(oSelect == "MULTIPL") {
                MessageBox.show(String(Number1*Number2));
                MessageToast.show(Number1*Number2);
            }
            else if(oSelect === "DIVIDE") {
                MessageBox.show(String(Number1/Number2));
                MessageToast.show(Number1/Number2);
            }

            //debugger;       
            // break-point 라고 부름. 로직 실행중 debugger를 만나면
            // 디버깅이 걸려서 해당 구간에서 멈춰서 진행사항을 확인할 수 있다 (=디버깅이 걸렸다고 표현)
            // debugger를 동작시키기 위해선 개발자도구(F12)가 켜진 상태여야함

        }
    });
});
```
</br>
</br>
</br>

### Fragment 기반 Part UI + 동적 Dialog 실습
- 버튼 클릭 시 Dialog 프래그먼트를 동적으로 Fragment.load로 로드·오픈하고, core 접근으로 닫는 기능 개발
</br>

<img width="497" height="193" alt="image" src="https://github.com/user-attachments/assets/f0cfca31-1966-4334-b629-811a6c932930" />

<img width="759" height="345" alt="image" src="https://github.com/user-attachments/assets/d9042e52-8ce2-454a-bab6-d8e0e4100600" />

</br>
</br>
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project05.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">

    <core:Fragment fragmentName="ycl2project05.view.fragment.PartUi" type="XML" />

    </Page>
</mvc:View>
```
</br>

- fragment/PartUi.fragment.xml
```html
<c:FragmentDefinition 
    xmlns="sap.m" 
    xmlns:c="sap.ui.core">
    
    <Text text="Part UI Fragment" />
    <Button text="Click" press=".onClick" />
    
</c:FragmentDefinition>
```
</br>

- fragment/Dialog.fragment.xml
```html
<c:FragmentDefinition 
    xmlns="sap.m" 
    xmlns:c="sap.ui.core">
    <Dialog id="idDialog"
            title="First Dialog">
        <content>
            <Text text="Hello Dialog" />
        </content>
        <endButton>
            <Button text="close" press=".onClose" />
        </endButton>
    </Dialog>
</c:FragmentDefinition>
```
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/core/Fragment"
], (Controller, Fragment) => {
    "use strict";

    return Controller.extend("ycl2project05.controller.Main", {
        onInit() {
        },
        onClick: function() {
            let oDialog=sap.ui.getCore().byId("idDialog");

           // sap.m.MessageToast.show("PartUI 버튼 클릭");
           console.log("11111111111");

           if(oDialog) {        // 있으면 true, 없으면 undefined
                oDialog.open();
           } else {
                Fragment.load({
                        name: "ycl2project05.view.fragment.Dialog",
                        type: "XML",
                        controller: this    // 로드하는 fragment에서 사용할 수 있도록 현재 controller 넘겨줌
                }).then(function(oDialog) {
                        console.log("222222222222");
                        oDialog.open();
                })
           }

          console.log("33333333333")
        },
        onClose: function() {
            // sap.m.MessageToast.show("onClose 클릭");
            // this.byId("idDialog").close(); 하면 동작하지 않음.
            // 왜?
            // => Fragment.load 해서 로드한 뷰는 기존 view의 계층 구조와 분리된 UI요소로 간주된다. 따라서 view가 아닌 core에 접근해야함

            sap.ui.getCore().byId("idDialog").close();
        }
    });
});
```
</br>
</br>
</br>

### SAPUI5 테이블 바인딩 실습 (m.Table + grid Table)
- 로컬 JSONModel의 persons 배열을 두 종류 테이블(sap.m.Table, sap.ui.table.Table)에 바인딩해 이름/나이/전화 표시, m.Table에서는 나이 필드 편집 가능(Input)
</br>

<img width="827" height="353" alt="image" src="https://github.com/user-attachments/assets/d49ed7a5-d0bc-4d54-9210-3ae034911c53" />

</br>
</br>
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel"
], (Controller, JSONModel) => {
    "use strict";

    return Controller.extend("ycl2project06.controller.Main", {
        onInit() {
            let oData = { inputValue: { firstName: "Park", lastName: "Gildong"},
                          persons : [
                            { name: "김예원", age: 23, tel: "010-8952-0763"},
                            { name: "김형동", age: 10, tel: "010-1234-0763"},
                            { name: "박근철", age: 23, tel: "010-6379-6174"},
                            { name: "정다현", age: 24, tel: "010-1234-5678"}
                          ]
                        };
            let oModel = new JSONModel(oData);
            this.getView().setModel(oModel, "local");
        },
    });
});
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project06.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:p="sap.m.plugins"
    xmlns:u="sap.ui.unified"
    xmlns:t="sap.ui.table"
    xmlns="sap.m">
    <Page id="page" title="{test>/inputValue/firstName} {test>/inputValue/lastName}">        <!-- 객체에는 local>/name/firstName -->
        <!-- <Input id="input" value="{/inputValue/firstName} {/inputValue/lastName}" /> -->
        <Table id="idProductsTable"
            inset="false"
            items="{local>/persons}">       <!-- 배열까지 바인딩 상태 -->
            <columns>
                <Column hAlign="Center">
                    <Text text="Name" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Age" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Tel" />
                </Column>
            </columns>
            <items>
                <ColumnListItem vAlign="Middle">
                    <cells>
                        <Text text="{local>name}" />        <!-- 상대경로 -->
                        <Input value="{local>age}" />
                        <Text text="{local>tel}" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>

        <t:Table
            rows="{local>/persons}"
            selectionMode="MultiToggle"
            paste="onPaste"
            ariaLabelledBy="title">
            <t:extension>
                <OverflowToolbar style="Clear">
                    <Title id="title" text="Persons"/>
                </OverflowToolbar>
            </t:extension>
            <t:columns>
                <t:Column width="11rem">
                    <Label text="Name" />
                    <t:template>
                        <Text text="{local>name}" wrapping="false" />
                    </t:template>
                </t:Column>
                <t:Column width="11rem">
                    <Label text="Age" />
                    <t:template>
                        <Text text="{local>age}" wrapping="false" />
                    </t:template>
                </t:Column>
                <t:Column width="11rem">
                    <Label text="Tel" />
                    <t:template>
                        <Text text="{local>tel}" wrapping="false" />
                    </t:template>
                </t:Column>
            </t:columns>
        </t:Table>

    </Page>

</mvc:View>
```
</br>
</br>
</br>

### Fragment + JSONModel 데이터 조회용 팝업 실습 (값 수정 불가 버전)
- 메인 View에 JSONModel 데이터를 표시하고, 버튼 클릭 시 Fragment로 Dialog를 동적으로 로드하여 "dialog" 모델 데이터를 팝업 입력창에 표시만 가능하도록 구현한 데이터 조회용 팝업
- 아직 값 수정되게 안띄워짐 (현재 팝업만 띄움)
</br>
</br>

<img width="584" height="229" alt="image" src="https://github.com/user-attachments/assets/66bed29a-8778-4e9e-b509-19e13fa8ed1c" />

<img width="777" height="362" alt="image" src="https://github.com/user-attachments/assets/50fc6f43-3190-4351-a754-9b22e58058fc" />

</br>
</br>
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/ui/core/Fragment"
], (Controller, JSONModel, Fragment) => {
    "use strict";

    return Controller.extend("ycl2project07.controller.Main", {
        onInit() {
            let oData = {
                name : {
                    firstName : "Hong",
                    lastName : "Gildong"
                },
                inpvalue : "hihi"
            };
            let oModel = new JSONModel(oData);
            this.getView().setModel(oModel);

            this.getView().setModel(new JSONModel({
                inputValue1: "1",
                inputValue2: "2",
                inputValue3: "3"
            }), "dialog");
        },
        onPress() {
            let omodel = this.getView().getModel("dialog");
            let oDialog = sap.ui.getCore().byId("idDialog");

            if(oDialog) {
                oDialog.open();
            }
            else {
                Fragment.load({
                    name: "ycl2project07.view.fragment.DataChange",
                    type: "XML",
                    controller: this
                }).then(function(diolog) {
                    this.getView().setModel(diolog, "diolog");
                    diolog.open();
                })
            }
        },
        onClose: function() {
            sap.ui.getCore().byId("idDialog").close();
        }
    });
});
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project07.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <VBox>
            <Text text="{/name/firstName}" />
            <Text text="{/name/lastName}" />
            <Text text="{/inpvalue}" />
            <Button text="값 변경" press="onPress" />
        </VBox>
    </Page>
</mvc:View>
```
</br>

- fragment/DataChange.fragment.xml
```html
<c:FragmentDefinition 
    xmlns="sap.m" 
    xmlns:c="sap.ui.core"
    xmlns:f="sap.ui.layout.form">
    <Dialog id="idDialog"
            title="First Dialog"
            contentHeight="40%"
            contentWidth="20%"
            draggable="true"
            resizable="true">
        <content>
            <!-- Dialog 안에 들어갈 내용 작성 -->
            <Text text="팝업 띄우기 완료!" />

            <f:SimpleForm
                layout="ColumnLayout"
                columnsXL="1"
                columnsL="1"
                columnsM="1">
                <f:content>
                    <Label text="First Name" />
                    <Input value="{dialog>inputValue1}" />
                    <Label text="Last Name" />
                    <Input value="{dialog>/inputValue2}" />
                    <Label text="input Value" />
                    <Input value="{dialog>/inputValue3}" />
                </f:content>
            </f:SimpleForm>
        </content>
        <buttons>
            <Button text="OK" press=".onDialogOKPress" type="Emphasized" />
            <Button text="close" press=".onClose" />
        </buttons>
    </Dialog>
</c:FragmentDefinition>
```
</br>
</br>
</br>

### getData / setProperty를 활용한 Dialog 편집값을 메인 모델에 반영하는 바인딩/복사 실습
- 메인 View의 local JSONModel 데이터를 Fragment(Dialog)에 바인딩해 입력값을 수정하고, getData()·getProperty()·setProperty()·setData()를 활용하여 Dialog의 수정값을 메인 모델에 반영하는 모델 데이터 조작 실습 프로젝트임
</br>
</br>

<img width="322" height="163" alt="image" src="https://github.com/user-attachments/assets/f930dbe9-4bb0-4320-879a-40134828a31b" />
</br>

<img width="519" height="263" alt="image" src="https://github.com/user-attachments/assets/551c0a8d-40fd-458f-a637-aaf1cf5a68c2" />
</br>

<img width="335" height="167" alt="image" src="https://github.com/user-attachments/assets/8fd7d99a-2f26-444b-9b1b-b6a8ae380561" />

</br>
</br>
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/ui/core/Fragment"
], (Controller, JSONModel, Fragment) => {
    "use strict";

    return Controller.extend("ycl2project081.controller.Main", {
        onInit() {
            let oData = {
                name : {
                    firstName : "Hong",
                    lastName : "Gildong"
                },
                inpValue : "hihi",
                dialogFirstName : "1",
                dialogLastName : "2",
                dialogInputValue : "3"
            };
            let oModel = new JSONModel(oData);
            this.getView().setModel(oModel, "local");
        },
        onPress: function() {
            // function 안에서 선언한 변수들은 function 종료 시 사라짐
            // this.oModel = this.getView().getModel("local");
            /*
                controller도 객체 {}
                객체.newValue = "값";   // {newValue : "값"}
                this.oModel = "값";     // controller {oModel : "값"}
            */

            let oModel = this.getView().getModel("local");
            let oDialog = sap.ui.getCore().byId("idDialog");

            if(oDialog) {
                oDialog.open();
            }
            else {
                Fragment.load({
                    name: "ycl2project081.view.fragment.Dialog",
                    type: "XML",
                    controller: this
                }).then( function(mDialog) {
                    mDialog.setModel(oModel, "dialog");
                    mDialog.open();
                })
            }
        },
        onClose: function() {
            sap.ui.getCore().byId("idDialog").close();
        },
        onDialogOKPress: function() {
            let oDialogModel = sap.ui.getCore().byId("idDialog").getModel("dialog");
            let oModel = this.getView().getModel("local");

            // 모델이 가지고 있는 전체 데이터 조회 .getData()
            // 모델이 가지고 있는 데이터를 경로를 통해 조회 .getProperty("/")
            let aDialogaDatas = oDialogModel.getData();
            let aDatas = oModel.getData();

            let data1 = oDialogModel.getProperty("/dialogFirstName");
            let data2 = oModel.getProperty("/name/firstName");

            // 모델이 가지는 전체 데이터 세팅 .setData(변경할 데이터, 합치지여부)
            // 모델이 가지는 데이터를 경로를 통해 세팅 .srtProperty("/변경대상경로", 변경할 값)

            // oModel.setData({                
            //     name : {
            //         firstName : "11111",
            //         lastName : "22222"
            //     },
            //     inpValue : "33333"
            // }, true)    // 두번째 파라미터에 Merge 여부를 지정할 수 있음. true / false
            //             // true 입력 시 Merger (기존 데이터에 변경사항만 적용)

            // oModel.setProperty("/name/firstName", "55555");
            // oModel.setProperty("/", {inpvaild : "test"});

            oModel.setProperty("/name/firstName", oModel.getProperty("/dialogFirstName"));
            oModel.setProperty("/name/lastName", oModel.getProperty("/dialogLastName"));
            oModel.setProperty("/inpValue", oModel.getProperty("/dialogInputValue"));

            let allDatas = oModel.getData();
            allDatas.name.firstName = allDatas.dialogFirstName;
            allDatas.name.lastName = allDatas.dialogLastName;
            allDatas.inpValue = allDatas.dialogInputValue;
            oModel.setData(allDatas, true);

            this.onClose(); // controller에 만들어놓은 onClasse 함수 실행
        }
    });
});
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project081.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <VBox>
            <Text text="{local>/name/firstName}" />
            <Text text="{local>/name/lastName}" />
            <Text text="{local>/inpValue}" />
            <Button text="값 변경" press="onPress"/>
        </VBox>
    </Page>
</mvc:View>
```
</br>

- fragment/Dialog.fragment.xml
```html
<c:FragmentDefinition 
    xmlns="sap.m" xmlns:c="sap.ui.core"
    xmlns:f="sap.ui.layout.form">
    <Dialog id="idDialog"
            title="First Dialog"
            contentHeight="40%"
            contentWidth="20%"
            draggable="true"
            resizable="true">
        <content>
            <!-- Dialog 안에 들어갈 내용 작성 -->
            <f:SimpleForm
                layout="ColumnLayout"
                columnsXL="1"
                columnsL="1"
                columnsM="1">
                <f:content>
                    <Label text="First Name" />
                    <Input value="{dialog>/dialogFirstName}" />
                    <Label text="Last Name" />
                    <Input value="{dialog>/dialogLastName}" />
                    <Label text="input Value" />
                    <Input value="{dialog>/dialogInputValue}" />
                </f:content>
            </f:SimpleForm>
        </content>
        <buttons>
            <Button text="OK" press=".onDialogOKPress" type="Emphasized"/>
            <Button text="close" press=".onClose" />
        </buttons>
    </Dialog>
</c:FragmentDefinition>
```
</br>
</br>
</br>

### JSON 로드 + 바인딩 + 포맷터 + 마스터-디테일 테이블 실습
- 고객 정보를 담은 JSON 파일을 불러와 테이블로 보여주고, 고객을 선택하면 해당 고객의 예약 목록이 아래 테이블에 표시되며, 나이별 구분·조건부 버튼·남은 좌석 상태를 계산해주는 데이터 연동·바인딩 실습
</br>

<img width="781" height="279" alt="image" src="https://github.com/user-attachments/assets/5fcd345e-e65d-4d94-b76d-ab3c74f1baff" />
</br>
</br>

<img width="779" height="339" alt="image" src="https://github.com/user-attachments/assets/eb76136f-3af3-4b79-a22b-6098bf300ed3" />
</br>
</br>

<img width="770" height="373" alt="image" src="https://github.com/user-attachments/assets/ca0a4a79-c9cf-44ac-b81f-2125b499d960" />

</br>
</br>
</br>

- model/Customers.json
```java
{
    "company" : {
        "name" : "Acme Inc.",
        "street" : "23 Franklin St.",
        "city" : "Claremont",
        "state" : "New Hampshire",
        "zip" : "03301",
        "revenue" : "1833990"
    }
}
```
</br>

- model/Customers.json
```java
{
    "Customers": [
        { "CustomerName" : "장원영", "Age" : 12, "PhoneNumber" : "010-5421-5942", 
        "_Bookings" : [ { "AirlineID" : "AA", "FlightDate" : "2024-02-11", "BookingNumber": "2011", "Price":1000, "Currency":"EUR", "seatsMax": 500, "seatsOcc":450 },
                        { "AirlineID" : "AA", "FlightDate" : "2024-02-13", "BookingNumber": "2012", "Price":2000, "Currency":"EUR", "seatsMax": 500, "seatsOcc":500 },
                        { "AirlineID" : "GL", "FlightDate" : "2024-05-11", "BookingNumber": "2190", "Price":1500, "Currency":"EUR", "seatsMax": 500, "seatsOcc":500 },
                        { "AirlineID" : "AZ", "FlightDate" : "2024-05-11", "BookingNumber": "2191", "Price":1510, "Currency":"EUR", "seatsMax": 500, "seatsOcc":100 } ] },

        { "CustomerName" : "김우빈", "Age" : 17, "PhoneNumber" : "010-2166-5854" ,
        "_Bookings" : [ { "AirlineID" : "AA", "FlightDate" : "2024-02-11", "BookingNumber": "3111", "Price":3000, "Currency":"USD", "seatsMax": 500, "seatsOcc":0 },
                        { "AirlineID" : "JL", "FlightDate" : "2024-05-13", "BookingNumber": "3222", "Price":3200, "Currency":"USD", "seatsMax": 500, "seatsOcc":100 },
                        { "AirlineID" : "GL", "FlightDate" : "2024-07-11", "BookingNumber": "3335", "Price":2100, "Currency":"USD", "seatsMax": 500, "seatsOcc":320 } ] },

        { "CustomerName" : "유재석", "Age" : 25, "PhoneNumber" : "010-1421-122",
        "_Bookings" : [ { "AirlineID" : "JL", "FlightDate" : "2024-03-11", "BookingNumber": "4217", "Price":5000, "Currency":"USD", "seatsMax": 500, "seatsOcc":425 },
                        { "AirlineID" : "AA", "FlightDate" : "2024-04-13", "BookingNumber": "4589", "Price":6000, "Currency":"USD", "seatsMax": 500, "seatsOcc":300 },
                        { "AirlineID" : "GL", "FlightDate" : "2024-05-11", "BookingNumber": "5874", "Price":2500, "Currency":"USD", "seatsMax": 500, "seatsOcc":489 },
                        { "AirlineID" : "AZ", "FlightDate" : "2024-05-11", "BookingNumber": "5875", "Price":1200, "Currency":"EUR", "seatsMax": 500, "seatsOcc":120 },
                        { "AirlineID" : "AA", "FlightDate" : "2024-05-11", "BookingNumber": "5876", "Price":5800, "Currency":"EUR", "seatsMax": 500, "seatsOcc":50 } ] }
    ]
}
```
</br>

- model/formatter.js
```java
sap.ui.define([], function() {
    "use strict"

    return {
        fnFormatter: function(sValue) {
            debugger;
            let result;
            // formatter 사용시 if문으로 value가 있는 경우를 체크하여
            // 처리하는게 좋다. value 값만 들어오는게 아니기 때문
            if(sValue) {    
                let oModel = this.getView().getModel("customer");

                if(sValue >= 20) result = "성인";
                else if(sValue >= 17 && sValue < 19) result = "중학생";
                else if(sValue >= 14 && sValue < 17) result = "초등학생";
                else if(sValue >= 8 && sValue < 14) result = "초등학생";
                else result = "아동";
                return result;
            }
        },
        setStringData: function() {
            // 포메터 함수 추가
        }
    }
})
```
</br>

- Main2.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/ui/core/Fragment"
], (Controller, JSONModel, Fragment) => {
    "use strict";

    return Controller.extend("ycl2project082.controller.Main2", {
        fnFormatter: function(sValue) {
            let result;
            // formatter 사용시 if문으로 value가 있는 경우를 체크하여
            // 처리하는게 좋다. value 값만 들어오는게 아니기 때문
            if(sValue) {    
                let oModel = this.getView().getModel("customer");

                if(sValue >= 20) result = "성인";
                else if(sValue >= 17 && sValue < 19) result = "중학생";
                else if(sValue >= 14 && sValue < 17) result = "초등학생";
                else if(sValue >= 8 && sValue < 14) result = "초등학생";
                else result = "아동";
                return result;
            }
        },
        onInit() {
            let oModel = new JSONModel();
            oModel.loadData(sap.ui.require.toUrl("ycl2project082/model/data.json"));
            this.getView().setModel(oModel, "main");

            // this.byId("idVBox").bindElement("/company");    // 이름없는 기본모델
            this.byId("idVBox").bindElement({
                path : "/company",
                model : "main"
            });

            let cModel = new JSONModel();
            cModel.loadData(sap.ui.require.toUrl("ycl2project082/model/Customers.json"));
            this.getView().setModel(cModel, "customer");
        },
        onPress: function(oEvent) {
            // oEvent.getSource() : 버튼객체
            let oRow = oEvent.getSource().getParent();
            // oRow : 버튼 객체의 위에 있는 UI control (listItem 또는 Row)을 가져옴
            let oBindingContext = oRow.getBindingContext("customer");   // 유재석 Row에 바인딩된 전체정보 가져온 것
            // oBindingContext : 바인딩 객체. 내부에 모델정보, 현재 경로 등이 있음
            let sPath = oBindingContext.getPath();
            // 전체 바인딩 정보 중, 경로만 특정해서 가져옴
            let oModel = this.getView().getModel("customer");
            let oData = oModel.getProperty(sPath);  
            // 모델 경로를 통해 가져온 모델 객체(유재석)
            // 따라서 oData.PhoneNumber로 접근하면 특정 데이터를 얻을 수 있음
            sap.m.MessageToast.show(oData.PhoneNumber);
        },
        // sap.m.Table 에서 Row 데이터 선택시 실행하는 이벤트(selectionChange)
        onSelectionChange: function(oEvent) {
            // 이벤트 함수는 이벤트 객체가 파라미터로 들어온다
            // 이벤트 객체는 이벤트마다 다르다
            // .getSource : 이벤트를 일으킨 객체
            // .getParameters : 이벤트에 들어있는 파라미터 정보 (요게 다름)
            let oBindingContext = oEvent.getParameters().listItem.getBindingContext("customer");
            let sPath = oBindingContext.getPath();  // 현재 선택한 Item의 모델 경로

            this.byId("idBookings").setBindingContext(oBindingContext, "customer");
        }
    });
});
```
</br>

- Main2.view.xml
```html
<mvc:View controllerName="ycl2project082.controller.Main2"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page title="2025-10-30 화면">
        <Text binding="{/company}" text="{state}" />
        
        <!-- <VBox id="idVBox" class="sapUiSmallMargin" binding="{/company}"> -->
        <VBox id="idVBox" class="sapUiSmallMargin">
            <Text text="VBox안에 데이터 : {main>name}" />
            <Text text="VBox안에 데이터 : {main>street}" />
            <Text text="VBox안에 데이터 : {main>city}" />
            <Text text="VBox안에 데이터 : {main>state}" />
        </VBox>

        <Table id="idCustomers"
            inset="false"
            mode="SingleSelectLeft"
            selectionChange="onSelectionChange"
            items="{customer>/Customers}">
            <columns>
                <Column hAlign="Center">
                    <Text text="CustomerName" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Age" />
                </Column>
                <Column hAlign="Center">
                    <Text text="구분" />
                </Column>
                <Column hAlign="Center">
                    <Text text="PhoneNumber" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Button" />
                </Column>
            </columns>
            <items>
                <ColumnListItem vAlign="Middle">
                    <cells>
                        <Text text="{customer>CustomerName}" />
                        <Text text="{customer>Age}" />
                        <Text text="{
                            path : 'customer>Age',
                            formatter : '.fnFormatter'
                        }" />
                        <Text text="{customer>PhoneNumber}" />
                        <!-- Expression Binding -->
                        <Button text="Detail" visible="{= ${customer>Age} >=20 }" press="onPress" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>

        <Table class="sapUiSmallMarginTop" id="idBookings" items="{customer>_Bookings}">
            <columns>
                <Column hAlign="Center">
                    <Text text="AirlineID" />
                </Column>
                <Column hAlign="Center">
                    <Text text="AFlightDatege" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Booking Number" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Price" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Currency" />
                </Column>
                <Column hAlign="Center">
                    <Text text="seatsMax" />
                </Column>
                <Column hAlign="Center">
                    <Text text="seatsOcc" />
                </Column>
                <Column hAlign="Center">
                    <Text text="State" />
                </Column>
            </columns>
            <items>
                <ColumnListItem vAlign="Middle">
                    <cells>
                        <Text text="{customer>AirlineID}" />
                        <Text text="{customer>FlightDate}" />
                        <Text text="{customer>BookingNumber}" />
                        <Text text="{customer>Price}" />
                        <Text text="{customer>Currency}" />
                        <Text text="{customer>seatsMax}" />
                        <Text text="{customer>seatsOcc}" />
                        <Text text="{= ${customer>seatsMax} - ${customer>seatsOcc} === 0  ? '만석' 
                        : ${customer>seatsMax} - ${customer>seatsOcc} &lt; 10 ? '모집중-출발확정' : '모집중-출발미정' }" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </Page>
</mvc:View>
```
</br>
</br>
</br>

### 예약(Booking) 관리 화면: 외부 포맷터 + 고객·예약 데이터 로드 실습
- 고객 정보와 예약 정보를 JSON 파일에서 불러오고, “Booking GO” 버튼을 눌렀을 때만 선택한 고객의 예약 내역이 아래 테이블에 표시되며, 외부 포맷터 파일을 불러와 나이에 따라 구분(성인/청소년/아동)을 표시하는 실습.
</br>

<img width="730" height="307" alt="image" src="https://github.com/user-attachments/assets/342316c4-d70c-49e9-bea7-aee7a6013822" />
</br>
</br>

<img width="717" height="331" alt="image" src="https://github.com/user-attachments/assets/a45c0485-e42b-49ac-8474-88384254ed43" />
</br>
</br>

<img width="730" height="343" alt="image" src="https://github.com/user-attachments/assets/76805edd-876f-4ef2-b814-2e31b9bc98ab" />
</br>
</br>
</br>

- model/Customers.json
```java
{
    "company" : {
        "name" : "Acme Inc.",
        "street" : "23 Franklin St.",
        "city" : "Claremont",
        "state" : "New Hampshire",
        "zip" : "03301",
        "revenue" : "1833990"
    }
}
```
</br>

- model/Customers.json
```java
{
    "Customers": [
        { "CustomerName" : "장원영", "Age" : 12, "PhoneNumber" : "010-5421-5942", 
        "_Bookings" : [ { "AirlineID" : "AA", "FlightDate" : "2024-02-11", "BookingNumber": "2011", "Price":1000, "Currency":"EUR", "seatsMax": 500, "seatsOcc":450 },
                        { "AirlineID" : "AA", "FlightDate" : "2024-02-13", "BookingNumber": "2012", "Price":2000, "Currency":"EUR", "seatsMax": 500, "seatsOcc":500 },
                        { "AirlineID" : "GL", "FlightDate" : "2024-05-11", "BookingNumber": "2190", "Price":1500, "Currency":"EUR", "seatsMax": 500, "seatsOcc":500 },
                        { "AirlineID" : "AZ", "FlightDate" : "2024-05-11", "BookingNumber": "2191", "Price":1510, "Currency":"EUR", "seatsMax": 500, "seatsOcc":100 } ] },

        { "CustomerName" : "김우빈", "Age" : 17, "PhoneNumber" : "010-2166-5854" ,
        "_Bookings" : [ { "AirlineID" : "AA", "FlightDate" : "2024-02-11", "BookingNumber": "3111", "Price":3000, "Currency":"USD", "seatsMax": 500, "seatsOcc":0 },
                        { "AirlineID" : "JL", "FlightDate" : "2024-05-13", "BookingNumber": "3222", "Price":3200, "Currency":"USD", "seatsMax": 500, "seatsOcc":100 },
                        { "AirlineID" : "GL", "FlightDate" : "2024-07-11", "BookingNumber": "3335", "Price":2100, "Currency":"USD", "seatsMax": 500, "seatsOcc":320 } ] },

        { "CustomerName" : "유재석", "Age" : 25, "PhoneNumber" : "010-1421-122",
        "_Bookings" : [ { "AirlineID" : "JL", "FlightDate" : "2024-03-11", "BookingNumber": "4217", "Price":5000, "Currency":"USD", "seatsMax": 500, "seatsOcc":425 },
                        { "AirlineID" : "AA", "FlightDate" : "2024-04-13", "BookingNumber": "4589", "Price":6000, "Currency":"USD", "seatsMax": 500, "seatsOcc":300 },
                        { "AirlineID" : "GL", "FlightDate" : "2024-05-11", "BookingNumber": "5874", "Price":2500, "Currency":"USD", "seatsMax": 500, "seatsOcc":489 },
                        { "AirlineID" : "AZ", "FlightDate" : "2024-05-11", "BookingNumber": "5875", "Price":1200, "Currency":"EUR", "seatsMax": 500, "seatsOcc":120 },
                        { "AirlineID" : "AA", "FlightDate" : "2024-05-11", "BookingNumber": "5876", "Price":5800, "Currency":"EUR", "seatsMax": 500, "seatsOcc":50 } ] }
    ]
}
```
</br>

- model/formatter.js
```java
sap.ui.define([], function() {
    "use strict"

    return {
        fnFormatter: function(sValue) {
            debugger;
            let result;
            // formatter 사용시 if문으로 value가 있는 경우를 체크하여
            // 처리하는게 좋다. value 값만 들어오는게 아니기 때문
            if(sValue) {    
                let oModel = this.getView().getModel("customer");

                if(sValue >= 20) result = "성인";
                else if(sValue >= 17 && sValue < 19) result = "중학생";
                else if(sValue >= 14 && sValue < 17) result = "초등학생";
                else if(sValue >= 8 && sValue < 14) result = "초등학생";
                else result = "아동";
                return result;
            }
        },
        setStringData: function() {
            // 포메터 함수 추가
        }
    }
})
```
</br>

- Booking.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/ui/core/Fragment",
    "ycl2project082/model/formatter"
], (Controller, JSONModel, Fragment, formatter) => {
    "use strict";

    return Controller.extend("ycl2project082.controller.Booking", {
        formatFile : formatter,
        onInit() {
            let oModel = new JSONModel();
            oModel.loadData(sap.ui.require.toUrl("ycl2project082/model/data.json"));
            this.getView().setModel(oModel, "main");

            // this.byId("idVBox").bindElement("/company");    // 이름없는 기본모델
            this.byId("idVBox2").bindElement({
                path : "/company",
                model : "main"
            });

            let cModel = new JSONModel();
            cModel.loadData(sap.ui.require.toUrl("ycl2project082/model/Customers.json"));
            this.getView().setModel(cModel, "customer");

            /////////////////// 2025-10-31: Booking 모델 분리 //////////////////////
            this.getView().setModel(new JSONModel({ result : [] }), "booking");
        },
        onReadBooking: function(oEvent) {
            let table = this.byId("idCustomers2");  // this.byId 사용해서 Customers 테이블 가져오기
            let oRow = table.getSelectedItem();     // 현재 선택한 아이템 정보 들어옴   

            let oBindingContext = oRow.getBindingContext("customer");
            let sPath = oBindingContext.getPath();
            let oCustomer = this.getView().getModel("customer").getProperty(sPath);

            let oBookingModel = this.getView().getModel("booking");
            oBookingModel.setProperty("/result", oCustomer._Bookings);
        },
        onPress: function(oEvent) {
            // oEvent.getSource() : 버튼객체
            let oRow = oEvent.getSource().getParent();
            // oRow : 버튼 객체의 위에 있는 UI control (listItem 또는 Row)을 가져옴
            let oBindingContext = oRow.getBindingContext("customer");   // 유재석 Row에 바인딩된 전체정보 가져온 것
            // oBindingContext : 바인딩 객체. 내부에 모델정보, 현재 경로 등이 있음
            let sPath = oBindingContext.getPath();
            // 전체 바인딩 정보 중, 경로만 특정해서 가져옴
            let oModel = this.getView().getModel("customer");
            let oData = oModel.getProperty(sPath);  
            // 모델 경로를 통해 가져온 모델 객체(유재석)
            // 따라서 oData.PhoneNumber로 접근하면 특정 데이터를 얻을 수 있음
            sap.m.MessageToast.show(oData.PhoneNumber);
        },
        // sap.m.Table 에서 Row 데이터 선택시 실행하는 이벤트(selectionChange)
        onSelectionChange: function(oEvent) {
            // 이벤트 함수는 이벤트 객체가 파라미터로 들어온다
            // 이벤트 객체는 이벤트마다 다르다
            // .getSource : 이벤트를 일으킨 객체
            // .getParameters : 이벤트에 들어있는 파라미터 정보 (요게 다름)
            let oBindingContext = oEvent.getParameters().listItem.getBindingContext("customer");
            let sPath = oBindingContext.getPath();  // 현재 선택한 Item의 모델 경로

            this.byId("idBookings2").setBindingContext(oBindingContext, "customer");
        },
        // onChange: function(oEvent) {
        //     // input의 value를 얻음
        //     let iValue = Number(oEvent.getParameter("value"));
        //     let oInput = oEvent.getSource();

        //     if(iValue < 0 || iValue > 100) {
        //         oInput.setValueState("Error");
        //         oInput.setValueStateText("0 부터 100 사이 숫자만 입력하세요.");
        //         // return;     // 리턴구문 만나면 함수 종료
        //     }
        //     else {
        //         // Input 처음에 생성했을 때 Input의 ValueState는 "None" (default state)
        //         oInput.setValueState("None");
        //         oInput.setValueState(ValueState.None);
        //     }
        // }
    });
});
```
</br>

- Booking.view.xml
```html
<mvc:View controllerName="ycl2project082.controller.Booking"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m">
    <!-- core:require="{formatter: 'ycl2project082/model/formatter'}" -->
    <Page title="2025-10-30 화면">
        <Text binding="{/company}" text="{state}" />
        
        <!-- <VBox id="idVBox" class="sapUiSmallMargin" binding="{/company}"> -->
        <VBox id="idVBox2" class="sapUiSmallMargin">
            <Text text="VBox안에 데이터 : {main>name}" />
            <Text text="VBox안에 데이터 : {main>street}" />
            <Text text="VBox안에 데이터 : {main>city}" />
            <Text text="VBox안에 데이터 : {main>state}" />
        </VBox>

        <Table id="idCustomers2"
            inset="false"
            mode="SingleSelectLeft"
            selectionChange="onSelectionChange"
            items="{customer>/Customers}">
            <headerToolbar>
                <OverflowToolbar>
                    <content>
                        <Title text="Customers" level="H2"/>
                        <ToolbarSpacer />
                        <Button text="Booking GO" press="onReadBooking"/>
                    </content>
                </OverflowToolbar>
            </headerToolbar>
            <columns>
                <Column hAlign="Center">
                    <Text text="CustomerName" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Age" />
                </Column>
                <Column hAlign="Center">
                    <Text text="구분" />
                </Column>
                <Column hAlign="Center">
                    <Text text="PhoneNumber" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Button" />
                </Column>
            </columns>
            <items>
                <ColumnListItem vAlign="Middle">
                    <cells>
                        <Text text="{customer>CustomerName}" />
                        <Input value="{
                            path : 'customer>Age',
                            type : 'sap.ui.model.type.Integer',
                            constraints : {minimum: 0, maximum: 100}
                            
                        }" change=".onChange" />
                        <!-- 
                        만약 formatter를 view에서 불러온다면, 앞에 .제거
                        -->
                        <Text text="{
                            path : 'customer>Age',
                            formatter : '.formatFile.fnFormatter'
                        }" />
                        <Text text="{customer>PhoneNumber}" />
                        <!-- Expression Binding -->
                        <Button text="Detail" visible="{= ${customer>Age} >=20 }" press="onPress" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>

        <Table class="sapUiSmallMarginTop" id="idBookings2" items="{booking>/result}">
            <columns>
                <Column hAlign="Center">
                    <Text text="AirlineID" />
                </Column>
                <Column hAlign="Center">
                    <Text text="AFlightDatege" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Booking Number" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Price" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Currency" />
                </Column>
                <Column hAlign="Center">
                    <Text text="seatsMax" />
                </Column>
                <Column hAlign="Center">
                    <Text text="seatsOcc" />
                </Column>
                <Column hAlign="Center">
                    <Text text="State" />
                </Column>
            </columns>
            <items>
                <ColumnListItem vAlign="Middle">
                    <cells>
                        <Text text="{booking>AirlineID}" />
                        <Text text="{booking>FlightDate}" />
                        <Text text="{booking>BookingNumber}" />
                        <Text text="{booking>Price}" />
                        <Text text="{booking>Currency}" />
                        <Text text="{booking>seatsMax}" />
                        <Text text="{booking>seatsOcc}" />
                        <Text text="{= ${booking>seatsMax} - ${booking>seatsOcc} === 0  ? '만석' 
                        : ${booking>seatsMax} - ${booking>seatsOcc} &lt; 10 ? '모집중-출발확정' : '모집중-출발미정' }" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </Page>
</mvc:View>
```
</br>
</br>
</br>

### 계산기 + 결과 이력 테이블
- 두 숫자와 연산자를 선택해 계산하고, 결과를 JSONModel 배열(/total_result)에 누적해서 그리드 테이블로 이력 표시하는 계산기 실습
</br>

<img width="773" height="369" alt="image" src="https://github.com/user-attachments/assets/4ed24c2f-8105-4528-9cf8-092d4efbfd82" />

</br>
</br>

<img width="773" height="360" alt="image" src="https://github.com/user-attachments/assets/5a08caa4-5891-42f7-aa4a-805acb1cb53f" />
</br>
</br>
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/m/MessageBox"
], (Controller, JSONModel, MessageBox) => {
    "use strict";

    return Controller.extend("ycl2project082.controller.Main", {
        onInit() {
        let oData = { 
                calcDatas : [ 
                    { key : "PLUS", text : "+"},
                    { key : "MINUS", text : "-"},
                    { key : "MULTIPL", text : "*"},
                    { key : "DIVIDE", text : "/"}
                ],
                total_result : []
            };
            let oModel = new JSONModel(oData);
            this.getView().setModel(oModel, "select");
        },
        onCalc: function() {
            let oModel = this.getView().getModel("select");
            let Number1 = Number(this.byId("idNumber1").getValue());
            let Number2 = Number(this.byId("idNumber2").getValue());

            let oSelect = this.byId("idselect").getSelectedItem().getKey();
            let result;

            if(oSelect === "PLUS") {
                oSelect="+";
                result = Number1+Number2;
            }
            else if(oSelect === "MINUS") {
                oSelect="-";
                result = Number1-Number2;
            }
            else if(oSelect == "MULTIPL") {
                oSelect="*";
                result = Number1*Number2;
            }
            else if(oSelect === "DIVIDE") {
                oSelect="/";
                result = Number1/Number2;
            }

            let total_result = oModel.getProperty("/total_result");
            total_result.push({
                number1: Number1,
                number2: Number2,
                key: oSelect,
                result: result
            });
            oModel.setProperty("/total_result", total_result);
            MessageBox.show(`계산 결과는 ${result} 입니다!`);
        }
    });
});
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project083.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:t="sap.ui.table"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <Input id="idNumber1" width="100%" />
            <Select 
                id="idselect" 
                items="{select>/calcDatas}"
                width="100%" 
                showSecondaryValues="true">
                <core:ListItem 
                    key="{select>key}" 
                    text="{select>text}" 
                    additionalText="{select>key}"/>
            </Select>
            <Input id="idNumber2" width="100%" />
            <Button text="계산하기" press="onCalc"
                    width="100%" type="Emphasized" />

            <t:Table rows="{select>/total_result}">
                <t:columns>
                    <t:Column>
                        <Label text="Number1" />
                        <t:template>
                            <Text text="{select>number1}" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="key" />
                        <t:template>
                            <Text text="{select>key}" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Number2" />
                        <t:template>
                            <Text text="{select>number2}" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="=" />
                        <t:template>
                            <Text text="=" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Result" />
                        <t:template>
                            <Text text="{select>result}" />
                        </t:template>
                    </t:Column>
                </t:columns>
            </t:Table>
    </Page>
</mvc:View>
```
</br>
</br>
</br>

### OData 연결 기반 제품 목록 필터링/정렬 화면 (DynamicPage + FilterBar)
- BAS에서 “Connect to an OData Service” 옵션으로 생성된 Fiori 앱으로, OData 모델의 /Products 데이터를 가져와 상단 FilterBar에서 제품명, 카테고리, 공급자 등을 검색·필터링하고, 결과를 테이블로 표시하며 정렬(Sorter)과 범위 필터(FilterOperator.BT) 기능을 함께 사용하는 실습
</br>

<img width="799" height="345" alt="image" src="https://github.com/user-attachments/assets/1c9cf7ed-1cd4-49ca-9c59-ed691ae65ffa" />
</br>
</br>

<img width="797" height="351" alt="image" src="https://github.com/user-attachments/assets/405a93bf-2967-49f7-941d-1c6a17b5664c" />
</br>
</br>

<img width="794" height="246" alt="image" src="https://github.com/user-attachments/assets/24aea5eb-4210-4daa-b727-8481ac6f244d" />
</br>
</br>
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/Filter",
    "sap/ui/model/FilterOperator",
    "sap/ui/model/Sorter",
    "sap/m/MessageBox"
], (Controller, Filter, FilterOperator, Sorter, MessageBox) => {
    "use strict";

    return Controller.extend("ycl2project09.controller.Main", {
        onInit() {
        },
        onSearch: function() {
            // new Filter(path, operator, value1, value2(operator가 BT 인 경우에 씀))
            let sValue = this.byId("inputProductName").getValue();
            let aFilter = [];   // 필터들을 넣을 배열 선언
            let aSorter = [];   // 정렬 객체들을 넣을 배열 선언
            let oFilter = new Filter("ProductName", "Contains", sValue);

            if(sValue) {
                aFilter.push(oFilter);  // 배열에 필터 객체를 넣는다
                // aFilter => [ new Filter, new Filter, ....]
                aFilter.push(new Filter({
                    path: "UnitsInStock",
                    operator: FilterOperator.BT,
                    value1: "10",
                    value2: "100"
                }));
            }

            // new Sorter("필드명")     // 기본 오름차순
            // new Sorter("필드명", false)     // 오름차순
            // new Sorter("필드명", true)     // 내림차순
            aSorter.push( new Sorter("SupplierID", true) );

            // 테이블에 필터 적용
            this.byId("idProductsTable").getBinding("items").filter(aFilter);
            this.byId("idProductsTable").getBinding("items").sort(aSorter);
        },
        onValueHelpRequest: function() {
            sap.m.MessageBox.information("Value Help 오픈!");
        }
    });
});
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project09.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    >
    
    <f:DynamicPage id="dynamicPageId" headerExpanded="{/headerExpanded}" toggleHeaderOnTitleClick="{/titleClickable}">
        <!-- DynamicPage Title -->
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <fb:FilterBar id="filterbar" persistencyKey="myPersKey" useToolbar="false" search=".onSearch" filterChange=".onFilterChange" afterVariantLoad=".onAfterVariantLoad">
                    <fb:filterGroupItems>
                        <fb:FilterGroupItem name="Name" label="Name" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <Input id="inputProductName" showValueHelp="true" valueHelpRequest="onValueHelpRequest" placeholder="ProductName" />
                            </fb:control>
                        </fb:FilterGroupItem>
                        <fb:FilterGroupItem name="Category" label="Category" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <MultiComboBox
                                    name="Category"
                                    selectionChange=".onSelectionChange"
                                    items="{
                                        path: '/ProductCategories',
                                        templateShareable: true
                                    }"
                                >
                                    <core:Item key="{key}" text="{name}"/>
                                </MultiComboBox>
                            </fb:control>
                        </fb:FilterGroupItem>
                        <fb:FilterGroupItem name="SupplierName" label="SupplierName" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <MultiComboBox
                                    name="SupplierName"
                                    selectionChange=".onSelectionChange"
                                    items="{
                                        path: '/ProductSuppliers',
                                        templateShareable: true
                                    }"
                                >
                                    <core:Item key="{key}" text="{name}"/>
                                </MultiComboBox>
                            </fb:control>
                        </fb:FilterGroupItem>
                    </fb:filterGroupItems>
                </fb:FilterBar>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <Table id="idProductsTable"
                    sticky="HeaderToolbar,ColumnHeaders"
                    inset="false"
                    items="{
                        path : '/Products'
                    }"
                    class="sapFDynamicPageAlignContent"
                    width="auto">
                    <!-- filters : [{
                            path : 'ProductName',
                            operator : 'Contains',
                            value1 : 'Queso'
                        }, {
                            path : 'UnitsInStock',
                            operator : 'NE',
                            value1 : '22'
                        }]
                        
                        sorter : [{
                            path : 'SupplierID',
                            descending : true
                        }, {
                            path : 'UnitsInStock',
                            descending : false
                        }]-->
                <headerToolbar>
                    <Toolbar>
                        <Title text="Products" level="H2"/>
                    </Toolbar>
                </headerToolbar>
                <columns>
                    <Column width="12em">
                        <Text text="ProductID" />
                    </Column>
                    <Column width="12em">
                        <Text text="ProductName" />
                    </Column>
                    <Column width="12em">
                        <Text text="SupplierID" />
                    </Column>
                    <Column width="12em">
                        <Text text="CategoryID" />
                    </Column>
                    <Column width="12em">
                        <Text text="UnitPrice" />
                    </Column>
                    <Column width="12em">
                        <Text text="UnitsInStock" />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem>
                        <cells>
                            <Text text="{ProductID}" />
                            <Text text="{ProductName}" />
                            <Text text="{SupplierID}" />
                            <Text text="{CategoryID}" />
                            <Text text="{UnitPrice}" />
                            <Text text="{UnitsInStock}" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </f:content>
        <!-- DynamicPage Footer -->
        <f:footer>
            <OverflowToolbar>
                <ToolbarSpacer/>
                <Button type="Accept" text="Accept"/>
                <Button type="Reject" text="Reject"/>
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>
```
</br>
</br>
</br>

### 버튼 클릭 시 OData read()로 필터링된 제품 데이터를 테이블에 표시
- 버튼 클릭 시 onPress 함수에서 OData read()를 사용해 제품 데이터를 가져와 JSON 모델에 담고, DynamicPage와 FilterBar로 필터링 후 테이블에 표시하는 SAPUI5 화면
</br>

<img width="791" height="245" alt="image" src="https://github.com/user-attachments/assets/540a4f50-8c3b-464c-8827-00cf7014c522" />
</br>
</br>

<img width="805" height="392" alt="image" src="https://github.com/user-attachments/assets/88a0eef9-28d9-42d1-a7f6-5eb35187fac1" />
</br>
</br>
</br>

- Read.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/ui/model/Filter",
    "sap/ui/model/FilterOperator"
], (Controller, JSONModel, Filter, FilterOperator) => {
    "use strict";

    return Controller.extend("ycl2project09.controller.Read", {
        onInit() {
            let oModel = new JSONModel({results : []});
            this.getView().setModel(oModel, "local");
        },
        onPress: function() {
            // 버튼 클릭 시 OData Model 데이터 조회
            // 서버모델 데이터를 가져오려면, Request 요청을 보내야 함
            // OData Model에서 데이터를 가져온다.
            // 데이터를 가져오면, json 구조에 맞는 데이터가 리턴
            // 해당 json data를 json model에다가 담아서 사용한다.
            // let oModel = this.getView().getModel();
            let oLocalModel = this.getView().getModel("local");
            let oModel = this.getOwnerComponent().getModel();   // OData Model. 이름없는 기본모델
            let oFilter = new Filter({
                path : "ProductID",
                operator : "BT",
                value1 : 10,
                value2 : 20
            });

            // .create() 생성 .read() 조회 .update() 업데이트 .remove() 삭제 
            // oModel.read("경로", {});
            oModel.read("/Products", {
                urlParameters: {
                    "$expand" : "Supplier"
                },
                filters: [oFilter],
                // sorters: [],
                success: function(oReturn) {
                    // 단 건 조회 : oReturn 자체에 데이터가 들어옴
                    // 다 건 조회 : oReturn.results 해서 배열 접근

                    // oLocalModel.setProperty("경로", 세팅할데이터);
                    let oData = [];
                    for(let i=0; i<oReturn.results.length; i++) {
                        let item = oReturn.results[i];
                        oData.push({
                            ProductID: item.ProductID,
                            ProductName: item.ProductName,
                            SupplierID: item.SupplierID,
                            UnitsInStock: item.UnitsInStock
                        });
                    }
                    oLocalModel.setProperty("/results", oData);
                },
                error: function() {}
            });
        }
    });
});
```
</br>

- Read.view.xml
```html
<mvc:View controllerName="ycl2project09.controller.Read"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    >
    
    <f:DynamicPage id="dynamicPageId" headerExpanded="{/headerExpanded}" toggleHeaderOnTitleClick="{/titleClickable}">
        <!-- DynamicPage Title -->
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <fb:FilterBar id="filterbar" persistencyKey="myPersKey" useToolbar="false" search=".onSearch" filterChange=".onFilterChange" afterVariantLoad=".onAfterVariantLoad">
                    <fb:filterGroupItems>
                        <fb:FilterGroupItem name="Name" label="Name" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <Input id="inputProductName" showValueHelp="true" valueHelpRequest="onValueHelpRequest" placeholder="ProductName" />
                            </fb:control>
                        </fb:FilterGroupItem>
                        <fb:FilterGroupItem name="Category" label="Category" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <MultiComboBox
                                    name="Category"
                                    selectionChange=".onSelectionChange"
                                    items="{
                                        path: '/ProductCategories',
                                        templateShareable: true
                                    }"
                                >
                                    <core:Item key="{key}" text="{name}"/>
                                </MultiComboBox>
                            </fb:control>
                        </fb:FilterGroupItem>
                        <fb:FilterGroupItem name="SupplierName" label="SupplierName" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <MultiComboBox
                                    name="SupplierName"
                                    selectionChange=".onSelectionChange"
                                    items="{
                                        path: '/ProductSuppliers',
                                        templateShareable: true
                                    }"
                                >
                                    <core:Item key="{key}" text="{name}"/>
                                </MultiComboBox>
                            </fb:control>
                        </fb:FilterGroupItem>
                    </fb:filterGroupItems>
                </fb:FilterBar>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <VBox> 
                <Button text="데이터 조회" press="onPress" />
                <Table id="idProductsTable2"
                    sticky="HeaderToolbar,ColumnHeaders"
                    inset="false"
                    items="{local>/results}"
                    class="sapFDynamicPageAlignContent"
                    width="auto">
                    <headerToolbar>
                        <Toolbar>
                            <Title text="Products" level="H2"/>
                        </Toolbar>
                    </headerToolbar>
                    <columns>
                        <Column width="12em">
                            <Text text="ProductID" />
                        </Column>
                        <Column width="12em">
                            <Text text="ProductName" />
                        </Column>
                        <Column width="12em">
                            <Text text="SupplierID" />
                        </Column>
                        <Column width="12em">
                            <Text text="UnitsInStock" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <Text text="{local>ProductID}" />
                                <Text text="{local>ProductName}" />
                                <Text text="{local>SupplierID}" />
                                <Text text="{local>UnitsInStock}" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </f:content>
        <!-- DynamicPage Footer -->
        <f:footer>
            <OverflowToolbar>
                <ToolbarSpacer/>
                <Button type="Accept" text="Accept"/>
                <Button type="Reject" text="Reject"/>
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>
```
</br>
</br>
</br>

### SAPUI5 라우팅을 이용한 화면 이동 (Main → Detail)
- manifest.json의 routing 설정을 통해 Main 화면에서 버튼 클릭 시 navTo()로 Detail 화면으로 이동하며, URL 파라미터를 전달하고 attachPatternMatched()로 해당 값을 수신해 Text에 표시하는 예제임
- 뒤로가기 가능
</br>

<img width="418" height="188" alt="image" src="https://github.com/user-attachments/assets/6ff00437-2c2c-41fd-bb9e-e67573481034" />

</br>
</br>

<img width="403" height="183" alt="image" src="https://github.com/user-attachments/assets/193ed346-c941-4dbf-8a33-13b531a02b7b" />


- manifest.json
```java
"routing": {
    "config": {
      "routerClass": "sap.m.routing.Router",
      "controlAggregation": "pages",
      "controlId": "app",
      "transition": "slide",
      "type": "View",
      "viewType": "XML",
      "path": "ycl2project10.view",
      "async": true,
      "viewPath": "ycl2project10.view"
    },
    "routes": [
      {
        "name": "RouteMain",
        "pattern": "mainParam",
        "target": [
          "TargetMain"
        ]
      },
      {
        "name": "RouteDetail",
        "pattern": "detail/{param1}/:param2:",
        "target": [
          "TargetDetail"
        ]
      }
    ],
    "targets": {
      "TargetMain": {
        "id": "Main",
        "name": "Main"
      },
      "TargetDetail": {
        "id": "Detail",
        "name": "Detail"
      }
    }
  }
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project10.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text text="Main page" />
        <Button text="화면 이동" press="onPress" />
    </Page>
</mvc:View>
```
</br>

- Detail.view.xml
```html
<mvc:View controllerName="ycl2project10.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page2" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text id="idText" text="Detail page" />
    </Page>
</mvc:View>
```
</br>

- Detail.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project10.controller.Detail", {
        onInit() {
            // 컨트롤러 실행시 최초 1번
            const oRouter = this.getOwnerComponent().getRouter();
            oRouter.getRoute("RouteDetail").attachPatternMatched(this._ooo, this);
        },
        _ooo: function(oEvent) {
            // route pattern matched 이벤트는
            // URL이 일치할 때마다 실행

            let sParam1 = oEvent.getParameters().arguments.param1;
            this.byId("idText").setText(sParam1);
        }
        // onInit과 attachPatternMatched 함수(_ooo) 차이점 명확하게 이해하기
    }); 
});
```
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project10.controller.Main", {
        onInit() {
        },
        onPress: function() {
            let oRouter = this.getOwnerComponent().getRouter();
            oRouter.navTo("RouteDetail", {
                param1 : "hihi",
                param2 : "okok"
            }, false);      // 파라미터가 /detail/hihi/okok 이렇게 나옴
            // Parameter 1 : 이동할 대상 routes의 name
            // Parameter 2 : 화면 이동 시 전달할 파라미터들 지정
            // Parameter 3 : router 히스토리 초기화 여부
        },
        onNavButtonPress: function() {
            // let oRouter = this.getOwnerComponent().getRouter();
            // oRouter.navTo("RouteMain", {
            //     mainParam : "comeback main view"
            // }, false); 
        }
    });
});
```
</br>

---

### 라우팅 파라미터를 이용한 Detail→Main 화면 복귀
- 기존 코드가 Main→Detail 이동만 했다면, 이번 코드는 Detail 화면의 NavButton 클릭 시 mainParam("comeback main view")을 전달해 Main 화면으로 돌아오며 그 값을 표시하도록 확장한 버전
</br>

<img width="450" height="199" alt="image" src="https://github.com/user-attachments/assets/8c77bde0-5c5e-4e90-80bc-ff6082dbf002" />
</br>
</br>

<img width="378" height="200" alt="image" src="https://github.com/user-attachments/assets/413fa743-a391-41ed-8ded-2ce7605f29d7" />
</br>
</br>
</br>

- manifest.json
- "pattern": ":mainParam:" 으로 바꿔야 라우터가 파라미터가 있어도 되고 없어도 되는 Route로 인식해서 첫 진입(기본 Main)과 파라미터 이동(Detail→Main) 모두 정상 작동함
```java
"routes": [
  {
    "name": "RouteMain",
    "pattern": ":mainParam:",    // 콜론(:)으로 감싸면 optional parameter
    "target": ["TargetMain"]
  },
  {
    "name": "RouteDetail",
    "pattern": "detail/{param1}/:param2:",
    "target": ["TargetDetail"]
  }
]
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project10.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text id="idTextMain" text="Main page" />
        <Button text="화면 이동" press="onPress" />
    </Page>
</mvc:View>
```
</br>

- Detail.view.xml
```html
<mvc:View controllerName="ycl2project10.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page2" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text id="idText" text="Detail page" />
    </Page>
</mvc:View>
```
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project10.controller.Main", {
        onInit() {
            const oRouter = this.getOwnerComponent().getRouter();
            oRouter.getRoute("RouteMain").attachPatternMatched(this._onPatternMatched, this);
        },
        _onPatternMatched: function(oEvent) {
            let sParam = oEvent.getParameters().arguments.mainParam;
            this.byId("idTextMain").setText(sParam);
        },
        onPress: function() {
            let oRouter = this.getOwnerComponent().getRouter();
            oRouter.navTo("RouteDetail", {
                param1 : "hihi",
                param2 : "okok"
            }, false);      // 파라미터가 /detail/hihi/okok 이렇게 나옴
            // Parameter 1 : 이동할 대상 routes의 name
            // Parameter 2 : 화면 이동 시 전달할 파라미터들 지정
            // Parameter 3 : router 히스토리 초기화 여부
        }
    });
});
```
</br>

- Detail.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project10.controller.Detail", {
        onInit() {
            // 컨트롤러 실행시 최초 1번
            const oRouter = this.getOwnerComponent().getRouter();
            oRouter.getRoute("RouteDetail").attachPatternMatched(this._ooo, this);
        },
        _ooo: function(oEvent) {
            // route pattern matched 이벤트는
            // URL이 일치할 때마다 실행

            let sParam1 = oEvent.getParameters().arguments.param1;
            this.byId("idText").setText(sParam1);
        },
        // onInit과 attachPatternMatched 함수(_ooo) 차이점 명확하게 이해하기
        onNavButtonPress: function() {
            let oRouter = this.getOwnerComponent().getRouter();
            oRouter.navTo("RouteMain", {
                mainParam: "comeback main view"
            }, false);
        }
    }); 
});
```
</br>
</br>
</br>

### VizFrame 차트 실습 (도넛 + 라인/막대 차트)
- sap.viz.ui5 라이브러리를 활용해 도넛 차트(View XML) 와 라인/막대 차트(Controller 동적 생성) 를 각각 구성하여, JSONModel 데이터 바인딩 + FlattenedDataset + FeedItem 으로 시각화하는 실습
</br>

<img width="608" height="662" alt="image" src="https://github.com/user-attachments/assets/2151530c-35b8-4233-899d-726a498f1b11" />
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/viz/ui5/data/FlattenedDataset",
    "sap/viz/ui5/controls/common/feeds/FeedItem"
], (Controller, JSONModel, FlattenedDataset, FeedItem) => {
    "use strict";

    return Controller.extend("ycl2project11.controller.Main", {
        onInit() {
            let oData = {
                list : [
                    {name: "aaa", rate: "35", cost: "10"},
                    {name: "bbb", rate: "15", cost: "12"},
                    {name: "ccc", rate: "10", cost: "11"},
                    {name: "ddd", rate: "15", cost: "15"},
                    {name: "eee", rate: "20", cost: "10"},
                    {name: "fff", rate: "5", cost: "16"}
                ]
            };
            this.getView().setModel(new JSONModel(oData), "view");

            let oData_controller = {
                sales : [
                    { product : "Jackets", amount : "65" },
                    { product : "Shirts", amount : "70" },
                    { product : "Pants", amount : "86" },
                    { product : "Coats", amount : "92" },
                    { product : "Purse", amount : "77" },
                ]
            };
            this.getView().setModel(new JSONModel(oData_controller), "cont");
            
            this._setChartController();
        },
        _setChartController: function() {
            let oChart = this.byId("idControllerChart");
            // dataset 만들기
            let oDataSet = new FlattenedDataset({
                dimensions: [{ name : "Product", value : "{cont>product}" }],
                measures: [{ name : "Amount", value : "{cont>amount}" }],
                data: { path : "cont>/sales" }
            });
            oChart.setDataset(oDataSet);
            // feedItem 구성하기
            let feedValueAxis = new FeedItem({
                uid: "valueAxis",
                type: "Measure",
                values: ["Amount"]
            });
            let feedCategoryAxis = new FeedItem({
                uid: "categoryAxis",
                type: "Dimension",
                values: ["Product"]
            });

            oChart.addFeed(feedValueAxis);
            oChart.addFeed(feedCategoryAxis);

            oChart.setVizProperties({
                title: { test : '막대차트', visible : true }
            })
            oChart.setVizType("line");
        }
    });
});
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project11.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <viz:VizFrame id="idViewChart" width="300px" height="300px"
                      vizType="donut"
                      uiConfig="{'applicationSet':'fiori'}"
                      vizProperties="{
                        title : { visible : true, text : '차트', alignment: 'left' },
                        legendGroup: {layout:{position: 'right'}},
                        plotArea : {
                            drawingEffect: 'glowsy',
                            dataLabel: { visible: true },
                            colorPalette: ['#FAED7D', '#FFB2D9', '#FFC19E', '#990085']
                        }
                      }">
            <viz:dataset>
                <viz.data:FlattenedDataset data="{view>/list}">
                <!-- X축 -->
                    <viz.data:dimensions>
                        <viz.data:DimensionDefinition name="이름" value="{view>name}" />
                    </viz.data:dimensions>
                <!-- Y축 -->
                    <viz.data:measures>
                        <viz.data:MeasureDefinition name="숫자" value="{view>rate}" />
                    </viz.data:measures>
                </viz.data:FlattenedDataset>
            </viz:dataset>

            <!-- 화면에 그려지는 feeditem 추가 -->
            <viz:feeds>
            <!-- 보통 막대차트나 라인차트 같은 차트는 -> categoryAxis/valueAxis -->
            <!-- 도넛차트나 파이차티 같은 경우 -> color/size -->
                <viz.feeds:FeedItem uid="color" type="Dimension" values="이름" />
                <viz.feeds:FeedItem uid="size" type="Measure" values="숫자" />
            </viz:feeds>
        </viz:VizFrame>

        <viz:VizFrame id="idControllerChart" vizType="column">
        </viz:VizFrame>
    </Page>
</mvc:View>
```
</br>
</br>
</br>

### OData Read by Key로 단일 데이터 조회 후 JSONModel에 바인딩하여 테이블 표시
- 첫 번째 OData 테이블에서 항공편을 선택하면, 선택된 키로 단건 조회(read)를 수행하여 조회된 상세 데이터(Airpto)를 JSONModel에 저장하고, 두 번째 테이블에 자동으로 표시
</br>

<img width="642" height="315" alt="image" src="https://github.com/user-attachments/assets/71a97f85-a5a0-4b2f-a549-6f2f9459efa8" />
</br>
</br>

<img width="646" height="125" alt="image" src="https://github.com/user-attachments/assets/bbd996ac-09cd-440e-a490-1df645dc6cd9" />
</br>
</br>
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel"
], (Controller, JSONModel) => {
    "use strict";

    return Controller.extend("practice01.controller.Main", {
        onInit() {
            let oModel = this.getOwnerComponent().getModel();
            this.getView().setModel(oModel, "local");

            let AirptoModel = new JSONModel({data : []});
            this.getView().setModel(AirptoModel, "aModel");
        },
        onSelectionChange: function() {
            let table = this.byId("idesConListSet");  
            let oRow = table.getSelectedItem();     
            let oBindingContext = oRow.getBindingContext("local");
            let sPath = oBindingContext.getPath();

            let oModel = this.getView().getModel("local");
            let inputCarrid = oModel.getProperty(sPath).Carrid;  
            let inputConnid = oModel.getProperty(sPath).Connid; 
            
            let aModel = this.getView().getModel("aModel");
            
            oModel.read(`/esConDetailSet(Carrid='${inputCarrid}',Connid='${inputConnid}')`, {            
                success: function(oReturn) {
                    aModel.setProperty("/data", [{ Airpto: oReturn.Airpto }]);
                },
                error: function() {
                    
                }
            });
        }
    });
});
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="practice01.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <Table id="idesConListSet"
            inset="false"
            mode="SingleSelectLeft"
            selectionChange="onSelectionChange"
            items="{local>/esConListSet}">
            <columns>
                <Column hAlign="Center">
                    <Text text="Carrid" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Carrname" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Connid" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Cityfrom" />
                </Column>
                <Column hAlign="Center">
                    <Text text="Cityto" />
                </Column>
            </columns>
            <items>
                <ColumnListItem vAlign="Middle">
                    <cells>
                        <Text text="{local>Carrid}" />
                        <Text text="{local>Carrname}" />
                        <Text text="{local>Connid}" />
                        <Text text="{local>Cityfrom}" />
                        <Text text="{local>Cityto}" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>

        <Table id="idesConDetailSet"
            inset="false"
            mode="SingleSelectLeft"
            selectionChange="onSelectionChange"
            items="{aModel>/data}">
            <columns>
                <Column hAlign="Center">
                    <Text text="Airpto" />
                </Column>
            </columns>
            <items>
                <ColumnListItem vAlign="Middle">
                    <cells>
                        <Text text="{aModel>Airpto}" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </Page>
</mvc:View>
```
</br>
</br>
</br>

---
</br>

---

</br>
</br>

# 시험 대비 + 시험
## 실습 (excode_032).md

- Detail.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/ui/model/Filter",
    "sap/viz/ui5/data/FlattenedDataset"
], (Controller, JSONModel, Filter, FlattenedDataset) => {
    "use strict";

    return Controller.extend("exam.excode032.controller.Detail", {
        onInit() {
            const oRouter = this.getOwnerComponent().getRouter();
            oRouter.getRoute("RouteDetail").attachPatternMatched(this.onPatternMatched, this);
        },
        onSelectionChange: function(oEvent) {
            let oBindingContext = oEvent.getParameters().listItem.getBindingContext("DetailModel");
            let sPath = oBindingContext.getPath();
            let oData = this.getView().getModel("DetailModel").getProperty(sPath).to_flights;

            let to_flightsModel = new JSONModel(oData);
            this.getView().setModel(to_flightsModel, "to_flightsModel");

            this.byId("idChart").setVisible(true);
        },
        onSearch: function() {
            this.byId("idChart").setVisible(false);

            let inputConnectionID = this.getView().byId("idConnectionID").getValue();
            let inputCountryFrom = this.getView().byId("idCountryFrom").getValue();
            let inputCityTo = this.getView().byId("idCityTo").getValue();
            let oFilters = [];

            if(inputCountryFrom && inputCityTo) {       // CountryFrom 와 CityTo 입력
                oFilters.push(new Filter({ path: 'Countryfr', operator: 'EQ', value1: inputCountryFrom }));
                oFilters.push(new Filter({ path: 'Cityto', operator: 'EQ', value1: inputCityTo }));
            }
            else if(inputCountryFrom) {     // CountryFrom 입력 들어올 때 
                oFilters.push(new Filter({ path: 'Countryfr', operator: 'EQ', value1: inputCountryFrom }));
            }
            else if(inputCityTo) {      // CityTo 입력 들어올 때
                oFilters.push(new Filter({ path: 'Cityto', operator: 'EQ', value1: inputCityTo }));
            }
            oFilters.push(new Filter({ path: 'Connid', operator: 'Contains', value1: inputConnectionID }));
            
            let oDataModel = this.getView().getModel();
            let DetailModel = this.getView().getModel("DetailModel");
            let sParam = DetailModel.getProperty("/results")[0].Carrid;
            oFilters.push(new Filter({ path: 'Carrid', operator: 'EQ', value1: sParam }));
            let arr = [];

            oDataModel.read("/Spfli", {
                urlParameters: {
                    "$expand" : "to_flights"
                },
                filters: oFilters,
                success: function(oReturn) {
                    for(let i=0; i<oReturn.results.length; i++) {
                        arr.push(oReturn.results[i]);
                    }
                    DetailModel.setProperty("/results", arr);
                },
                error: function() { console.log("error"); }
            });
        },
        onPatternMatched: function(oEvent) {
            let sParam = oEvent.getParameters().arguments.param1;
            
            let oDataModel = this.getView().getModel();
            let DetailModel = new JSONModel({ results : [] });
            let arr = [];

            oDataModel.read("/Spfli", {
                urlParameters: {
                    "$expand" : "to_flights"
                },
                filters: [
                    new Filter("Carrid", "EQ", sParam)
                ],
                success: function(oReturn) {
                    for(let i=0; i<oReturn.results.length; i++) {
                        arr.push(oReturn.results[i]);
                    }
                    DetailModel.setProperty("/results", arr);
                    this.getView().setModel(DetailModel, "DetailModel");
                }.bind(this),
                error: function() { console.log("error"); }
            })
        }
    }); 
});
```
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/ui/core/Fragment"
], (Controller, JSONModel, Fragment) => {
    "use strict";

    return Controller.extend("exam.excode032.controller.Main", {
        onInit() {
            let oData = { result : [] };
            let oLocalModel = new JSONModel(oData);     // 로컬 모델 만들기
            this.getView().setModel(oLocalModel, "local");      // 로컬이라는 이름으로 로컬모델 세팅
            // 기본 모델은 oData Model로 이미 존재하기 때문에 새로 추가하는 JSON Model인 경우 이름 부여
        },
        onDetails: function(oEvent) {
            let oRow = oEvent.getSource().getParent();      // 버튼 객체 위에 있는 해당 열을 가져옴
            let oBindingContext = oRow.getBindingContext("local");
            let sPath = oBindingContext.getPath();
            let sParam = this.getView().getModel("local").getProperty(sPath).Carrid;

            let oRouter = this.getOwnerComponent().getRouter();     // 라우터
            oRouter.navTo("RouteDetail", {
                param1 : sParam
            })
        },
        onAddCarrier: function(oEvent) {
            // Fragmnet.load 해서 파일 로드 하면, oLoadDialog 에 Dialog 객체가 들어옴.
            // 하지만 로드 하기 전에는, oLoadDialog는 undefined로 빈 값임.
            let oDialog = sap.ui.getCore().byId("idDialog");
            let oDataModel = this.getView().getModel();
            
            // Add Carrier 버튼 클릭 시 Dialog fragment가 load 되도록 한다.

            if(oDialog) {       // 이미 로드 되었다면
                oDialog.open();
            }
            else {
                Fragment.load({
                    name: "exam.excode032.view.fragment.Dialog",        // Dialog fragment의 파일 경로
                    type: "XML",        // fragment의 종류 : HTML, XML, JS
                    controller: this    // 현재 controller를 넘겨줌
                                        // Dialog 안에 있는 이벤트 함수 등을 해당 controller에서 구현할 수 있도록 !!
                }).then(function(oDialog) {
                    oDialog.open();
                    oDialog.setModel(oDataModel);
                })
            }
        },
        onDelete: function() {      // Main 테이블 리스트 선택 시 삭제하는 함수
            let oTable = this.byId("idMainCarrierlist");
            let oRows = oTable.getSelectedIndices();        // 선택한 테이블 리스트 인덱스 가져오기

            let oLocalModel = this.getView().getModel("local");
            let arr = oLocalModel.getData().result;                 // 원래 Main 테이블의 리스트들 가져오기
            let delete_arr = [];
            let flag = true;
            for(let i=0; i<arr.length; i++) {
                for(let j=0; j<oRows.length; j++) {
                    if(i === oRows[j]) {
                        flag=false;
                        break;
                    }
                }
                if(flag) {
                    delete_arr.push(arr[i]);
                }
                flag=true;
            }
            oLocalModel.setProperty("/result", delete_arr);
        },
        onOKPress: function() {
            let oTable = sap.ui.getCore().byId("idDialogCarrierlist");
            let sPath = oTable.getSelectedItem().getBindingContext().getPath();
            let sParam = this.getView().getModel().getProperty(sPath).Carrid;

            let oLocalModel = this.getView().getModel("local");
            let oDataModel = this.getView().getModel();

            oDataModel.read(sPath, {
                urlParameters: {
                    "$expand" : "to_schedules"
                },
                success: function(oReturn) {
                    let arr = oLocalModel.getData().result;
                    arr.push(oReturn);
                    oLocalModel.setProperty("/result", arr);
                    this.onClose();
                }.bind(this),
                error: function() {

                }
            })
        },
        onClose: function() {
            // Fragment.load 로 불러온 객체의 경우
            // sap.ui.getCore().byId("객체아이디") 로 접근해서 가져옴
            sap.ui.getCore().byId("idDialog").close();

            // 만약 Dialog 안에 Table이 있고 해당 Table을 가져오고자 한다면?
            // sap.ui.getCore().byId("TableID");  
        }
    });
});
```
</br>

- fragmnet/Dialog.fragment.xml
```html
<c:FragmentDefinition 
    xmlns="sap.m" 
    xmlns:c="sap.ui.core">
    <Dialog id="idDialog"
            title="Select List"
            contentHeight="50%"
            contentWidth="40%">
        <content>
            <Table id="idDialogCarrierlist"
                inset="false"
                mode="SingleSelectLeft"
                selectionChange="onSelectionChange"
                items="{/Carriers}">
                <columns>
                    <Column>
                        <Text text="Carrier ID" />
                    </Column>
                    <Column>
                        <Text text="Carrier Name" />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem vAlign="Middle">
                        <cells>
                            <Text text="{Carrid}" />
                            <Text text="{Carrname}" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
        <buttons>
            <Button text="OK" press=".onOKPress" type="Emphasized" />
            <Button text="close" press=".onClose" />
        </buttons>
    </Dialog>
</c:FragmentDefinition>
```
</br>

- Detail.view.xml
```html
<mvc:View controllerName="exam.excode032.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns="sap.m">
    <f:DynamicPage id="dynamicPageId" headerExpanded="{/headerExpanded}" toggleHeaderOnTitleClick="{/titleClickable}">
        <f:header>
            <f:DynamicPageHeader>
                <fb:FilterBar id="filterbar" persistencyKey="myPersKey" useToolbar="false" search=".onSearch" filterChange=".onFilterChange" afterVariantLoad=".onAfterVariantLoad">
                    <fb:filterGroupItems>
                        <fb:FilterGroupItem name="ConnectionID" label="Connection ID" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <Input id="idConnectionID"/>
                            </fb:control>
                        </fb:FilterGroupItem>

                        <fb:FilterGroupItem name="CountryFrom" label="Country From" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <Input id="idCountryFrom"/>
                            </fb:control>
                        </fb:FilterGroupItem>

                        <fb:FilterGroupItem name="CityTo" label="City To" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <Input id="idCityTo"/>
                            </fb:control>
                        </fb:FilterGroupItem>
                    </fb:filterGroupItems>
                </fb:FilterBar>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <VBox> 
                <Table id="idDetailCarrierlist" 
                    inset="false"
                    mode="SingleSelectLeft"
                    selectionChange="onSelectionChange"
                    items="{DetailModel>/results}">
                    <columns>
                        <Column hAlign="Center">
                            <Text text="Carrier ID" />
                        </Column>
                        <Column hAlign="Center">
                            <Text text="Connection ID" />
                        </Column>
                        <Column hAlign="Center">
                            <Text text="Country from" />
                        </Column>
                        <Column hAlign="Center">
                            <Text text="City from" />
                        </Column>
                        <Column hAlign="Center">
                            <Text text="Airpfrom" />
                        </Column>
                        <Column hAlign="Center">
                            <Text text="Countryto" />
                        </Column>
                        <Column hAlign="Center">
                            <Text text="Cityto" />
                        </Column>
                        <Column hAlign="Center">
                            <Text text="Airpto" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem vAlign="Middle">
                            <cells>
                                <Text text="{DetailModel>Carrid}" />
                                <Text text="{DetailModel>Connid}" />
                                <Text text="{DetailModel>Countryfr}" />
                                <Text text="{DetailModel>Cityfrom}" />
                                <Text text="{DetailModel>Airpfrom}" />
                                <Text text="{DetailModel>Countryto}" />
                                <Text text="{DetailModel>Cityto}" />
                                <Text text="{DetailModel>Airpto}" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>

                <viz:VizFrame id="idChart" width="100%" height="400px"
                            vizType="column"
                            visible="false"
                            uiConfig="{'applicationSet':'fiori'}"
                            vizProperties="{ 
                                type : 'sap.ui.model.type.Date',
                                formatOptions: { pattern: 'yy-MM-dd'},
                                title : { visible : true, text : '항공편별 잔여석 현황', alignment: 'left' },
                                plotArea : { 
                                    dataLabel: { visible: true } ,
                                    colorPalette: ['#B7F0B1']
                                }
                            }">
                    <viz:dataset>
                        <viz.data:FlattenedDataset data="{to_flightsModel>/results}">
                            <viz.data:dimensions>
                                <viz.data:DimensionDefinition name="날짜" value="{
                                    path: 'to_flightsModel>Fldate',
                                    type: 'sap.ui.model.type.Date',
                                    formatOptions: { pattern: 'yy-MM-dd' }
                                }" />
                            </viz.data:dimensions>

                            <viz.data:measures>
                                <viz.data:MeasureDefinition name="잔여석" value="{to_flightsModel>Seatsocc}" />
                                <viz.data:MeasureDefinition name="잔여석2" value="{to_flightsModel>Seatsocc}" />
                            </viz.data:measures>
                        </viz.data:FlattenedDataset>
                    </viz:dataset>

                    <viz:feeds>
                        <viz.feeds:FeedItem uid="categoryAxis" type="Dimension" values="날짜" />
                        <viz.feeds:FeedItem uid="valueAxis" type="Measure" values="잔여석" />
                    </viz:feeds>
                </viz:VizFrame>

            </VBox>
        </f:content>
    </f:DynamicPage>
</mvc:View>
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="exam.excode032.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:t="sap.ui.table"
    xmlns:rowmodes="sap.ui.table.rowmodes"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <t:Table id="idMainCarrierlist"
            class="sapUiMediumMargin"
            rows="{local>/result}"
            selectionMode="MultiToggle"
            paste="onPaste"
            ariaLabelledBy="title">
            <t:rowMode>
                <rowmodes:Interactive rowCount="20"/>
            </t:rowMode>
            <t:extension>
                <OverflowToolbar style="Clear">
                    <Title text="Carrier List"/>
                    <ToolbarSpacer />
                    <Button text="Add Carrier" press="onAddCarrier" />
                    <Button text="Delete" press="onDelete" />
                </OverflowToolbar>
            </t:extension>
            <t:columns>
                <t:Column>
                    <Label text="Carrier ID" />
                    <t:template>
                        <Text text="{local>Carrid}" wrapping="false" />
                    </t:template>
                </t:Column>
                <t:Column>
                    <Label text="Carrier Name" />
                    <t:template>
                        <Text text="{local>Carrname}" wrapping="false" />
                    </t:template>
                </t:Column>
                <t:Column>
                    <Label text="Currency Code" />
                    <t:template>
                        <Text text="{local>Currcode}" wrapping="false" />
                    </t:template>
                </t:Column>
                <t:Column>
                    <Label text="Url" />
                    <t:template>
                        <Text text="{local>Url}" wrapping="false" />
                    </t:template>
                </t:Column>
                <t:Column>
                    <Label text="Details" />
                    <t:template>
                        <Button text="Details" press="onDetails" enabled="{= ${local>to_schedules/results}.length === 0 ? false : true}" />
                    </t:template>
                </t:Column>
            </t:columns>
        </t:Table>
    </Page>
</mvc:View>
```
</br>

- manifest.json
```java
"routing": {
      "config": {
        "routerClass": "sap.m.routing.Router",
        "controlAggregation": "pages",
        "controlId": "app",
        "transition": "slide",
        "type": "View",
        "viewType": "XML",
        "path": "exam.excode032.view",
        "async": true,
        "viewPath": "exam.excode032.view"
      },
      "routes": [
        {
          "name": "RouteMain",
          "pattern": ":?query:",
          "target": [
            "TargetMain"
          ]
        }, {
          "name": "RouteDetail",
          "pattern": "detail/{param1}/:param2:",
          "target": [
            "TargetDetail"
          ]
        }
      ],
      "targets": {
        "TargetMain": {
          "id": "Main",
          "name": "Main"
        }, 
        "TargetDetail": {
          "id": "Detail",
          "name": "Detail"
        }
      }
    }
```
</br>
</br>
</br>

## 실습 (UX400 기초 다지기).md
# 실습 코드 (푼거)
- SAPUI5 애플리케이션에서 랜덤 숫자를 생성해 화면에 표시하고, 제품 목록을 다이얼로그(Fragment)로 띄워 보여주는 예제
<img width="701" height="339" alt="image" src="https://github.com/user-attachments/assets/96406e8a-b9f4-4783-b5af-98da13c8e015" />
</br>
</br>

<img width="697" height="316" alt="image" src="https://github.com/user-attachments/assets/b032d6e6-3ea1-41a1-a84f-99bc0bb63e14" />
</br>
</br>
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/ui/core/Fragment",
    "sap/btp/ux400solving/model/formatter"
], (Controller, JSONModel, Fragment, formatter) => {
    "use strict";

    return Controller.extend("sap.btp.ux400solving.controller.Main", {
        formatFile : formatter,
        onInit() {
            let oData = {
                RandomValue : []
            };
            let oModel = new JSONModel(oData);
            this.getView().setModel(oModel, "RandomModel");
        },
        onRandomPress: function() {
            let randomData = Math.floor(Math.random() * 100) + 1;
            this.byId("InputRandom").setValue(randomData);
            let rData = this.getView().getModel("RandomModel").getProperty("/RandomValue");
            rData.push({ Random_val : randomData});

            let rModel = this.getView().getModel("RandomModel");
            rModel.setProperty("/RandomValue", rData);
        },
        onOpenProduct: function() {
            let oModel = this.getView().getModel();
            let oDialog = sap.ui.getCore().byId("idDialog");

            if(oDialog) {
                oDialog.open();
            }
            else {
                Fragment.load({
                    name: "sap.btp.ux400solving.view.fragment.Products",
                    type: "XML",
                    controller: this
                }).then( function(mDialog) {
                    mDialog.setModel(oModel);
                    mDialog.open();
                })
            }
        },
        onClose: function() {
            sap.ui.getCore().byId("idDialog").close();
        },
        onValueChange: function(oEvent) {
            let iValue = Number(oEvent.getParameter("value"));
            let oInput = oEvent.getSource();

            if(iValue < 0 || iValue > 100) {
                oInput.setValueState("Error");
                oInput.setValueStateText("1 이상 100 이하의 숫자를 입력하세요.");
            }
            else {
                let rData = this.getView().getModel("RandomModel").getProperty("/RandomValue");
                rData.push({ Random_val : iValue});
                let rModel = this.getView().getModel("RandomModel");
                rModel.setProperty("/RandomValue", rData);
            }
        }
    });
});
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="sap.btp.ux400solving.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:t="sap.ui.table"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <VBox class="sapUiLargeMargin">
            <Text text="버튼을 클릭하면 아래 input에 값이 랜덤으로 채워집니다." />
            <Input id="InputRandom" value="" type="Number" change=".onValueChange" />
            <Button text="Random" press=".onRandomPress"/>
            <!-- 
                일반적으로 Controller 랑 연결된 함수는 .onPress 랑 onPress 둘 다 가능 (생략가능)
            -->
            <t:Table id="idRandomTable" rows="{RandomModel>/RandomValue}" width="50%">
                <t:extension>
                    <OverflowToolbar style="Clear">
                        <Title id="title" text="랜덤 목록 리스트"/>
                    </OverflowToolbar>
                </t:extension>
                <t:columns>
                    <t:Column>
                        <Label text="value" />
                        <t:template>
                            <Text text="{RandomModel>Random_val}" />
                        </t:template>
                    </t:Column>
                </t:columns>
            </t:Table>

            <Button text="open Product" press="onOpenProduct" />
        </VBox>
    </Page>
</mvc:View>
```
</br>

- fragment/Products.fragment.xml
```html
<c:FragmentDefinition 
    xmlns="sap.m" 
    xmlns:t="sap.ui.table"
    xmlns:c="sap.ui.core">
    <Dialog id="idDialog">
        <content>
            <t:Table id="idProductsTable" rows="{/Products}">
                <t:extension>
                    <OverflowToolbar style="Clear">
                        <Title id="productTitle" text="Products"/>
                    </OverflowToolbar>
                </t:extension>
                <t:columns>
                    <t:Column width="7rem">
                        <Label text="ProductID" />
                        <t:template>
                            <Text text="{ProductID}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="11rem">
                        <Label text="ProductName" />
                        <t:template>
                            <Text text="{ProductName}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="7rem">
                        <Label text="SupplierID" />
                        <t:template>
                            <Text text="{SupplierID}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="7rem">
                        <Label text="CategoryID" />
                        <t:template>
                            <Text text="{CategoryID}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="11rem">
                        <Label text="QuantityPerUnit" />
                        <t:template>
                            <Text text="{QuantityPerUnit}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="7rem">
                        <Label text="UnitPrice" />
                        <t:template>
                            <Text text="{UnitPrice}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="7rem">
                        <Label text="UnitsInStock" />
                        <t:template>
                            <Text text="{UnitsInStock}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="7rem">
                        <Label text="UnitsOnOrder" />
                        <t:template>
                            <Text text="{UnitsOnOrder}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="7rem">
                        <Label text="ReorderLevel" />
                        <t:template>
                            <Text text="{ReorderLevel}" />
                        </t:template>
                    </t:Column>
                    <t:Column width="7rem">
                        <Label text="Discontinued" />
                        <t:template>
                            <Text text="{
                                path : 'Discontinued',
                                formatter : '.formatFile.transformDiscontinued'
                            }" />
                        </t:template>
                    </t:Column>
                    <t:Column width="7rem">
                        <Label text="Status" />
                        <t:template>
                            <c:Icon src="{= (${UnitPrice} >= 15) ? 'sap-icon://thumb-up' : 'sap-icon://thumb-down' }"
                                    color="{= (${UnitPrice} >= 15) ? 'rgb(27, 234, 33)' : 'rgb(234, 52, 27)' }" />
                        </t:template>
                    </t:Column>
                </t:columns>
            </t:Table>
        </content>
        <endButton>
            <Button text="닫기" press=".onClose" />
        </endButton>
    </Dialog>
</c:FragmentDefinition>
```
</br>

- model/formatter.js
```java
sap.ui.define([], function() {
    "use strict"

    return {
        transformDiscontinued: function(sValue) {
            if(sValue) {
                return "Yes"
            }
            else {
                return "No"
            }
        }
    }
})
```
</br>
</br>

# 실습 코드 (답지)
- js 파일
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",      // MVC 컨트롤러
    "sap/ui/model/json/JSONModel",     // JSON 모델 (데이터 저장용)
    "sap/ui/core/Fragment",            // Fragment (다이얼로그 등 팝업용)
    "ycl2testproject02/model/formatter" // 데이터 포맷터
], (Controller, JSONModel, Fragment, formatter) => {
    "use strict";

    return Controller.extend("ycl2testproject02.controller.Main", {

        // 포맷터 파일 연결
        formatFile: formatter,

        // 1️⃣ 초기 실행 시 모델 설정
        onInit() {
            // 빈 배열을 가진 기본 데이터 준비
            let oData = { result: [] };
            // JSON 모델 생성
            let oModel = new JSONModel(oData);
            // 뷰(View)에 "list"라는 이름으로 모델 연결
            this.getView().setModel(oModel, "list");
        },

        // 2️⃣ "Random" 버튼 클릭 시 실행
        onRandomPress() {
            // Input 컨트롤 가져오기
            let oInput = this.getView().byId("inp01");
            // 1~100 사이의 랜덤 숫자 생성
            let sValue = Math.floor(Math.random() * 100 + 1);
            // 생성한 랜덤 숫자를 Input에 표시
            oInput.setValue(sValue);

            // "list" 모델 가져오기
            let oModel = this.getView().getModel("list");
            // result 배열 꺼내오기
            let arrCopy = oModel.getProperty("/result");

            // 랜덤 값 배열에 추가
            arrCopy.push(sValue);
            // 모델 업데이트
            oModel.setProperty("/result", arrCopy);
        },

        // 3️⃣ Input 값 변경 시 실행 (유효성 검사)
        onValueChange: function(oEvent) {
            // 이벤트 발생한 Input 객체
            let oInput = oEvent.getSource();
            // 입력된 값 가져오기
            let iValue = oInput.getValue();

            let isValid = true;

            // 1~100 사이가 아니거나, 숫자가 아닌 경우 에러
            if (iValue < 1 || iValue > 100 || isNaN(iValue) || iValue === "") {
                isValid = false;
            }

            // 값이 유효하면 상태 정상으로
            if (isValid) {
                oInput.setValueState("None");
            } else {
                // 잘못된 값이면 Input을 에러 상태로 표시
                oInput.setValueState("Error");
            }
        },

        // 4️⃣ "open Product" 버튼 클릭 시 다이얼로그 열기
        openProduct() {
            let oThis = this; // this를 변수에 저장 (비동기 함수 안에서도 사용하기 위함)

            // Fragment 로드 (XML로 정의된 다이얼로그)
            Fragment.load({
                name: "ycl2testproject02.view.fragment.Products", // Fragment 파일 경로
                type: "XML",
                controller: this, // 컨트롤러 연결
            }).then(function(oDialog) {
                // 모델 설정 (현재 뷰의 모델을 다이얼로그에 연결)
                let oModel = oThis.getView().getModel();
                oDialog.setModel(oModel, "product");
                // 다이얼로그 열기
                oDialog.open();
            });
        },

        // 5️⃣ 다이얼로그 닫기
        onClose() {
            sap.ui.getCore().byId("idDialog").close(); // idDialog로 등록된 다이얼로그 닫기
        }
    });
});
```
</br>

- view.xml 파일
```html
<mvc:View 
    controllerName="ycl2testproject02.controller.Main"  <!-- 연결할 컨트롤러 -->
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"          <!-- sap.m: 모바일 UI 컨트롤 -->
    xmlns:t="sap.ui.table" <!-- sap.ui.table: 표 컨트롤 -->
>
    <!-- 메인 페이지 -->
    <Page id="page" title="{i18n>title}"> <!-- i18n에서 다국어 제목 불러오기 -->
        <VBox id="box01" class="sapUiLargeMargin"> <!-- 세로 정렬 박스 (여백 있음) -->
            
            <!-- 설명 문구 -->
            <Text 
                id="txt01" 
                text="버튼을 클릭하면 아래 Input 값이 랜덤으로 채워집니다">
            </Text>

            <!-- 숫자 입력 필드 -->
            <Input 
                id="inp01" 
                type="Number" 
                change="onValueChange" <!-- 값 변경 시 유효성 검사 함수 호출 -->
                placeholder="1부터 100까지 입력하세요" 
                valueState="None" 
                valueStateText="1부터 100 사이의 값만 입력할 수 있습니다." 
            />

            <!-- 랜덤 버튼 -->
            <Button 
                id="btn01" 
                text="Random" 
                press="onRandomPress"> <!-- 버튼 클릭 시 랜덤 숫자 생성 -->
            </Button>

            <!-- 랜덤 숫자 목록을 표시할 테이블 -->
            <t:Table id="tb01" rows="{list>/result}"> <!-- list 모델의 result 배열과 바인딩 -->
                
                <!-- 테이블 상단 툴바 -->
                <t:extension>
					<OverflowToolbar style="Clear">
						<Title id="title01" text="랜덤 목록 리스트"/> <!-- 제목 -->
					</OverflowToolbar>
				</t:extension>

                <!-- 테이블 컬럼 정의 -->
                <t:columns>
                	<t:Column width="11rem">
						<Label text="value" /> <!-- 컬럼 헤더 -->
						<t:template>
							<!-- 배열 안의 각 숫자 값 표시 -->
							<Text text="{list>}"></Text>
						</t:template>
					</t:Column>
                </t:columns>

            </t:Table>

            <!-- 제품 보기 다이얼로그 열기 버튼 -->
            <Button 
                id="btn02" 
                text="open Product" 
                press="openProduct">
            </Button>

        </VBox>
    </Page>
</mvc:View>
```
</br>

- fragment 파일
```html
<c:FragmentDefinition 
    xmlns="sap.m"           <!-- sap.m: 모바일용 UI 컨트롤 -->
    xmlns:c="sap.ui.core"   <!-- sap.ui.core: 기본 UI 컴포넌트 (Icon 등) -->
    xmlns:f="sap.ui.layout.form"  <!-- (폼 레이아웃용 네임스페이스, 여기서는 사용 안 함) -->
    xmlns:t="sap.ui.table"  <!-- sap.ui.table: 테이블 UI 컨트롤 -->
>

    <!-- 다이얼로그 정의 -->
    <Dialog 
        id="idDialog"               <!-- 다이얼로그 ID (컨트롤러에서 찾을 때 사용) -->
        title="First Dialog"        <!-- 다이얼로그 제목 -->
        contentHeight="20%"         <!-- 다이얼로그 세로 크기 -->
        contentWidth="80%"          <!-- 다이얼로그 가로 크기 -->
        draggable="true"            <!-- 드래그로 이동 가능 -->
        resizable="true">           <!-- 크기 조절 가능 -->
        
        <content>
            <!-- 다이얼로그 안에 표시될 실제 콘텐츠 영역 -->
            
            <!-- 제품 목록 테이블 -->
            <t:Table id="tb02" rows="{product>/Products}"> <!-- product 모델의 Products 배열에 바인딩 -->
                
                <!-- 테이블 상단 제목 영역 -->
                <t:extension>
					<OverflowToolbar style="Clear">
						<Title id="title02" text="Products"/> <!-- 테이블 제목 -->
					</OverflowToolbar>
				</t:extension>

                <!-- 각 제품 속성을 표시할 컬럼들 정의 -->
                <t:columns>

                    <!-- ProductID 컬럼 -->
                	<t:Column width="9rem">
						<Label text="ProductID" /> <!-- 헤더 제목 -->
						<t:template>
							<Text text="{product>ProductID}"/> <!-- 각 행의 ProductID 값 표시 -->
						</t:template>
					</t:Column>

                    <!-- ProductName 컬럼 -->
                    <t:Column width="13rem">
						<Label text="ProductName" />
						<t:template>
							<Text text="{product>ProductName}"/>
						</t:template>
					</t:Column>

                    <!-- SupplierID 컬럼 -->
                    <t:Column width="7rem">
						<Label text="SupplierID" />
						<t:template>
							<Text text="{product>SupplierID}"/>
						</t:template>
					</t:Column>

                    <!-- CategoryID 컬럼 -->
                    <t:Column width="7rem">
						<Label text="CategoryID" />
						<t:template>
							<Text text="{product>CategoryID}"/>
						</t:template>
					</t:Column>

                    <!-- QuantityPerUnit (단위당 수량) -->
                    <t:Column width="13rem">
						<Label text="QuantityPerUnit" />
						<t:template>
							<Text text="{product>QuantityPerUnit}"/>
						</t:template>
					</t:Column>

                    <!-- UnitPrice (단가) -->
                    <t:Column width="9em">
						<Label text="UnitPrice" />
						<t:template>
							<Text text="{product>UnitPrice}"/>
						</t:template>
					</t:Column>

                    <!-- UnitsInStock (재고 수량) -->
                    <t:Column width="9rem">
						<Label text="UnitsInStock" />
						<t:template>
							<Text text="{product>UnitsInStock}"/>
						</t:template>
					</t:Column>

                    <!-- UnitsOnOrder (주문 중 수량) -->
                    <t:Column width="9rem">
						<Label text="UnitsOnOrder" />
						<t:template>
							<Text text="{product>UnitsOnOrder}"/>
						</t:template>
					</t:Column>

                    <!-- ReorderLevel (재주문 기준 수량) -->
                    <t:Column width="9rem">
						<Label text="ReorderLevel" />
						<t:template>
							<Text text="{product>ReorderLevel}"/>
						</t:template>
					</t:Column>

                    <!-- Discontinued (단종 여부) -->
                    <t:Column width="9rem">
						<Label text="Discontinued" />
						<t:template>
							<!-- formatter 함수를 사용하여 표시 형식 제어 -->
							<Text text="{
                                path: 'product>Discontinued',
                                formatter: '.formatFile.fnFormatter'  <!-- Controller의 formatter 함수 사용 -->
                            }" />
						</t:template>
					</t:Column>

                    <!-- Status (상태 아이콘) -->
                    <t:Column width="9rem">
						<Label text="Status" />
						<t:template>
                            <!-- UnitPrice(가격)이 15 이상이면 초록색 엄지 아이콘, 아니면 빨간색 아래 엄지 -->
							<c:Icon 
                                src="{= ${product>UnitPrice} >= 15 ? 'sap-icon://thumb-up' : 'sap-icon://thumb-down'}"
                                color="{= ${product>UnitPrice} >= 15 ? 'rgb(27,234,33)' : 'rgb(234,52,27)' }"/>
						</t:template>
					</t:Column>

                </t:columns>

            </t:Table>
        </content>

        <!-- 다이얼로그 하단 버튼 영역 -->
        <buttons>
            <!-- 닫기 버튼: 컨트롤러의 onClose 함수 실행 -->
            <Button text="close" press=".onClose" />
        </buttons>

    </Dialog>
</c:FragmentDefinition>
```
</br>
</br>
</br>

## 실습 (UX401 기초 다지기).md

- Detail.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel"
], (Controller, JSONModel) => {
    "use strict";

    return Controller.extend("sap.btp.ux410solving.controller.Detail", {
        onInit() {
            // 라우터 객체 가져오기 (Component에 정의된 Router)
            const oRouter = this.getOwnerComponent().getRouter();

            // "RouteDetail" 경로가 매칭될 때 실행될 함수 등록
            oRouter.getRoute("RouteDetail").attachPatternMatched(this.RoutePatternMatched, this);
        },

        // Route가 매칭될 때 실행되는 함수
        RoutePatternMatched: function(oEvent) {
            // 라우트 파라미터(param1, param2) 가져오기
            let sParam1 = oEvent.getParameters().arguments.param1;   // OrderID
            let sParam2 = oEvent.getParameters().arguments.param2;   // ProductID

            // 메인 OData 모델 가져오기
            let oModel = this.getOwnerComponent().getModel();

            // 결과 데이터를 담을 JSON 모델 생성
            let resultModel = new JSONModel();

            // this 참조를 유지하기 위한 변수
            let that = this;

            // OData에서 특정 Order_Details 데이터 읽기
            oModel.read(`/Order_Details(OrderID=${sParam1},ProductID=${sParam2})`, { // 숫자 파라미터일 경우 작은따옴표('') 없이 전달
                success: function(oReturn) {
                    // 읽은 데이터를 resultModel에 세팅
                    resultModel.setData(oReturn); 

                    // View에 resultModel을 "resultModel" 이름으로 설정
                    that.getView().setModel(resultModel, "resultModel");

                    // ObjectPageLayout 컨트롤에 바인딩 (데이터 표시)
                    that.byId("ObjectPageLayout").bindElement({
                        path: "/",
                        model: "resultModel"
                    });
                },
                error: function() {
                    // 데이터 읽기 실패 시 처리 (현재는 비워둠)
                }
            });
        }
    }); 
});
```
</br>

- Main.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/Filter",
    "sap/ui/model/FilterOperator",
    "sap/ui/model/json/JSONModel",
    "sap/ui/core/library"
], (Controller, Filter, FilterOperator, JSONModel, ValueState) => {
    "use strict";

    return Controller.extend("sap.btp.ux410solving.controller.Main", {
        onInit() {
            // 메인 모델(Component에 설정된 모델)을 View에 설정
            let oModel = this.getOwnerComponent().getModel();
            this.getView().setModel(oModel);

            // 차트 타입 목록을 담은 JSON 모델 생성
            let tModel = new JSONModel({
                Key: [
                    {type : "bar"},
                    {type : "column"},
                    {type : "line"},
                    {type : "donut"}
                ]
            });
            
            // "typeList"라는 이름으로 View에 모델 설정
            this.getView().setModel(tModel, "typeList");
        },

        // 차트 데이터 클릭 시 상세 페이지로 이동
        OnselectData: function(oEvent) {
            let sRouter = this.getOwnerComponent().getRouter();
            console.log(oEvent);
            let aSelectedData = oEvent.getParameter("data");
            let sOrderID = aSelectedData[0].data.OrderID;
            let sProductID = aSelectedData[0].data.ProductID;
            
            // 선택한 OrderID, ProductID를 라우트 파라미터로 전달
            sRouter.navTo("RouteDetail", {
                param1 : sOrderID,
                param2 : sProductID
            }, false);
        },

        // 검색 버튼 클릭 시 실행되는 함수
        onSearch: function() {
            let selectOrderID = this.byId("idOrderID");  
            let oRow = selectOrderID.getSelectedItem();    
            let oChart = this.byId("idViewChart");          // 차트 객체 가져오기   

            if(oRow == null) {        // OrderID를 선택하지 않았을 때
                let selectidType = this.byId("idType");  
                let typeRow = selectidType.getSelectedItem();
                let typeBindingContext = typeRow.getBindingContext("typeList");
                let typePath = typeBindingContext.getPath();        // 선택한 Type의 경로 가져오기

                let tModel = this.getView().getModel("typeList");
                let inputtype = tModel.getProperty(typePath).type;   // 선택한 Type 값 가져오기

                oChart.setVizType(inputtype);       // 차트 타입 설정
            }
            else {                  // OrderID를 선택했을 때
                let oBindingContext = oRow.getBindingContext();
                let sPath = oBindingContext.getPath();  // 선택한 OrderID의 경로 가져오기

                let selectidType = this.byId("idType");  
                let typeRow = selectidType.getSelectedItem();
                let typeBindingContext = typeRow.getBindingContext("typeList");
                let typePath = typeBindingContext.getPath();        // 선택한 Type의 경로 가져오기

                let oModel = this.getOwnerComponent().getModel();
                let inputOrderID = oModel.getProperty(sPath).OrderID;   // 선택한 OrderID 값 가져오기
                let tModel = this.getView().getModel("typeList");
                let inputtype = tModel.getProperty(typePath).type;   // 선택한 Type 값 가져오기

                let oFilter = [];  
                let idFlattenedDataset_object = this.byId("idFlattenedDataset");    // FlattenedDataset 객체 가져오기
                let fBindingContext = idFlattenedDataset_object.getBinding("data"); // data 프로퍼티의 바인딩 정보 가져오기

                // OrderID로 필터 생성
                oFilter.push(new Filter({
                    path: "OrderID",
                    operator: FilterOperator.EQ,
                    value1: inputOrderID
                }));
                fBindingContext.filter(oFilter);        // OrderID로 필터 적용

                oChart.setVizType(inputtype);       // 차트 타입 설정
            }
        },

        // 차트 타입 입력값 변경 시 유효성 검사
        onChange: function(oEvent) {
            let iValue = oEvent.getParameter("value");
            let oInput = oEvent.getSource();

            // 유효하지 않은 타입 입력 시 오류 상태로 표시
            if((iValue !== "bar") && (iValue !== "column") && (iValue !== "line") && (iValue !== "donut")) {
                oInput.setValueState("Error");
                oInput.setValueStateText("유효하지 않은 입력값입니다");
            }
            else {
                oInput.setValueState(ValueState.None); // 정상 입력 시 상태 초기화
            }
        }
    });
});
```
</br>

- Detail.xml
```html
<mvc:View controllerName="sap.btp.ux410solving.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form"
    xmlns:uxap="sap.uxap"
    xmlns="sap.m">
    <Page id="page2" >
        <uxap:ObjectPageLayout id="ObjectPageLayout"
            enableLazyLoading="true"
            beforeNavigate="onBeforeNavigate"
            useIconTabBar="true"
            showTitleInHeaderContent="true"
            upperCaseAnchorBar="false">
            <uxap:headerTitle>
                <uxap:ObjectPageDynamicHeaderTitle>
                    <uxap:expandedHeading>
                        <Title text="OrderId: {resultModel>OrderID}" wrapping="true"/>
                    </uxap:expandedHeading>
                    <uxap:expandedContent>
                        <Text text="Order Detail View Details"/>
                    </uxap:expandedContent>
                </uxap:ObjectPageDynamicHeaderTitle>
            </uxap:headerTitle>

            <uxap:headerContent>
                <VBox wrap="Wrap" fitContainer="true">
                    <f:SimpleForm id="SimpleFormChange354"
                        title="info"
                        editable="true"
                        layout="ResponsiveGridLayout"
                        labelSpanXL="3"
                        labelSpanL="3"
                        labelSpanM="3"
                        labelSpanS="12"
                        adjustLabelSpan="false"
                        emptySpanXL="4"
                        emptySpanL="4"
                        emptySpanM="4"
                        emptySpanS="0"
                        columnsXL="1"
                        columnsL="1"
                        columnsM="1"
                        singleContainerFullSize="false" >
                        <f:content>
                            <Label text="OrderID" />
                            <Text text="{resultModel>OrderID}" />
                            <Label text="ProductID" />
                            <Text text="{resultModel>ProductID}" />
                            <Label text="UnitPrice" />
                            <Text text="{resultModel>UnitPrice}" />
                            <Label text="Quantity" />
                            <Text text="{resultModel>Quantity}" />
                            <Label text="Discount" />
                            <Text text="{resultModel>Discount}" />
                        </f:content>
                    </f:SimpleForm>
                </VBox>
            </uxap:headerContent>
        </uxap:ObjectPageLayout>
    </Page>
</mvc:View>
```
</br>

- Main.xml
```html
<mvc:View controllerName="sap.btp.ux410solving.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:core="sap.ui.core"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns="sap.m">

    <f:DynamicPage id="dynamicPageId" headerExpanded="{/headerExpanded}" toggleHeaderOnTitleClick="{/titleClickable}">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="VizFrame" />
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader>
                <fb:FilterBar id="filterbar" persistencyKey="myPersKey" useToolbar="false" search=".onSearch" filterChange=".onFilterChange" afterVariantLoad=".onAfterVariantLoad">
                    <fb:filterGroupItems>
                        <fb:FilterGroupItem name="OrderID" label="OrderID" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <ComboBox
                                    id = "idOrderID"
                                    name="OrderID"
                                    selectionChange=".onSelectionChange"
                                    showSecondaryValues= "true"
                                    items="{
                                        path: '/Orders',
                                        templateShareable: false
                                    }"
                                >
                                <core:ListItem key="{OrderID}" text="{CustomerID}" additionalText = "{OrderID}"/>
                                </ComboBox>
                            </fb:control>
                        </fb:FilterGroupItem>

                        <fb:FilterGroupItem name="Type" label="Type" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <ComboBox
                                    id = "idType"
                                    name="Type"
                                    selectionChange=".onSelectionChange"
                                    showSecondaryValues= "true"
                                    items="{
                                        path: 'typeList>/Key',
                                        templateShareable: false
                                    }"
                                   change=".onChange" 
                                   value=""
                                >
                                <core:ListItem key="{typeList>type}" text="{typeList>type}" />
                                </ComboBox>
                            </fb:control>
                        </fb:FilterGroupItem>
                    </fb:filterGroupItems>
                </fb:FilterBar>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <viz:VizFrame id="idViewChart" width="100%" height="100%"
                        vizType="bar"
                        uiConfig="{'applicationSet':'fiori'}"
                        vizProperties="{
                            title: {
                                visible: false
                            }
                            }"
                        selectData=".OnselectData"
                        >
                <viz:dataset>
                    <viz.data:FlattenedDataset id="idFlattenedDataset" data="{/Order_Details}">
                    <!-- X축 -->
                        <viz.data:dimensions>
                            <viz.data:DimensionDefinition name="OrderID" value="{OrderID}" />
                            <viz.data:DimensionDefinition name="ProductID" value="{ProductID}" />
                        </viz.data:dimensions>
                    <!-- Y축 -->
                        <viz.data:measures>
                            <viz.data:MeasureDefinition name="UnitPrice" value="{UnitPrice}" />
                        </viz.data:measures>
                    </viz.data:FlattenedDataset>
                </viz:dataset>

                <viz:feeds>
                    <viz.feeds:FeedItem uid="categoryAxis" type="Dimension" values="OrderID,ProductID" />
                    <viz.feeds:FeedItem uid="valueAxis" type="Measure" values="UnitPrice" />
                </viz:feeds>
            </viz:VizFrame>
        </f:content>
    </f:DynamicPage>
    
</mvc:View>
```
</br>
</br>
</br>

### - Read.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/ui/model/Filter",
    "sap/ui/model/FilterOperator"
], (Controller, JSONModel, Filter, FilterOperator) => {
    "use strict";

    return Controller.extend("ycl2project09.controller.Read", {
        onInit() {
            let oModel = new JSONModel({results : []});
            this.getView().setModel(oModel, "local");
        },
        onPress: function() {
            // 버튼 클릭 시 OData Model 데이터 조회
            // 서버모델 데이터를 가져오려면, Request 요청을 보내야 함
            // OData Model에서 데이터를 가져온다.
            // 데이터를 가져오면, json 구조에 맞는 데이터가 리턴
            // 해당 json data를 json model에다가 담아서 사용한다.
            // let oModel = this.getView().getModel();
            let that=this;
            let oLocalModel = this.getView().getModel("local");
            let oModel = this.getOwnerComponent().getModel();   // OData Model. 이름없는 기본모델
            let oFilter = new Filter({
                path : "ProductID",
                operator : "BT",
                value1 : 10,
                value2 : 20
            });

            oModel.createKey("/Products", {
                OrderID : "1",
                ProductID : "2"
            });
            // sPath => "Order_Details(OrderID=1, ProductID=2)"

            // .create() 생성 .read() 조회 .update() 업데이트 .remove() 삭제 
            // oModel.read("경로", {});
            oModel.read("/Products", {
                urlParameters: {
                    "$expand" : "Supplier"
                },
                filters: [oFilter],
                // sorters: [],
                success: function(oReturn) {
                    // 단 건 조회 : oReturn 자체에 데이터가 들어옴
                    // 다 건 조회 : oReturn.results 해서 배열 접근

                    // oLocalModel.setProperty("경로", 세팅할데이터);
                    let oData = [];
                    for(let i=0; i<oReturn.results.length; i++) {
                        let item = oReturn.results[i];
                        oData.push({
                            ProductID: item.ProductID,
                            ProductName: item.ProductName,
                            SupplierID: item.SupplierID,
                            UnitsInStock: item.UnitsInStock
                        });
                    }
                    oLocalModel.setProperty("/results", oData);

                    // success 함수 안쪽에 처리 oo
                    // .read 사용시 내부 함수 (success, error)에서는 this가
                    // controller를 가리키지 않기 때문에 this를 controller로
                    // 사용하게 하려면 .bind(this)를 적용하거나
                    // let that = this; 와 같이 변수로 담아놓고 사용하자.
                    // 아니면 success 함수 내에서 this를 쓰지 않도록
                    // 필요한 내용은 최상단에 변수로 미리 선언해놓고 써도 됨.
                }.bind(this),
                error: function() {}
                // 메세지 처리 xx
            });
        }
    });
});
```
</br>
</br>

### - Read.view.xml
```html
<mvc:View controllerName="ycl2project09.controller.Read"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    >
    
    <f:DynamicPage id="dynamicPageId" headerExpanded="{/headerExpanded}" toggleHeaderOnTitleClick="{/titleClickable}">
        <!-- DynamicPage Title -->
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <fb:FilterBar id="filterbar" persistencyKey="myPersKey" useToolbar="false" search=".onSearch" filterChange=".onFilterChange" afterVariantLoad=".onAfterVariantLoad">
                    <fb:filterGroupItems>
                        <fb:FilterGroupItem name="Name" label="Name" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <Input id="inputProductName" showValueHelp="true" valueHelpRequest="onValueHelpRequest" placeholder="ProductName" />
                            </fb:control>
                        </fb:FilterGroupItem>
                        <fb:FilterGroupItem name="Category" label="Category" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <MultiComboBox
                                    name="Category"
                                    selectionChange=".onSelectionChange"
                                    items="{
                                        path: '/ProductCategories',
                                        templateShareable: true
                                    }"
                                >
                                    <core:Item key="{key}" text="{name}"/>
                                </MultiComboBox>
                            </fb:control>
                        </fb:FilterGroupItem>
                        <fb:FilterGroupItem name="SupplierName" label="SupplierName" groupName="Group1" visibleInFilterBar="true">
                            <fb:control>
                                <MultiComboBox
                                    name="SupplierName"
                                    selectionChange=".onSelectionChange"
                                    items="{
                                        path: '/ProductSuppliers',
                                        templateShareable: true
                                    }"
                                >
                                    <core:Item key="{key}" text="{name}"/>
                                </MultiComboBox>
                            </fb:control>
                        </fb:FilterGroupItem>
                    </fb:filterGroupItems>
                </fb:FilterBar>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <VBox> 
                <Button text="데이터 조회" press="onPress" />
                <Table id="idProductsTable2"
                    sticky="HeaderToolbar,ColumnHeaders"
                    inset="false"
                    items="{local>/results}"
                    class="sapFDynamicPageAlignContent"
                    width="auto">
                    <headerToolbar>
                        <Toolbar>
                            <Title text="Products" level="H2"/>
                        </Toolbar>
                    </headerToolbar>
                    <columns>
                        <Column width="12em">
                            <Text text="ProductID" />
                        </Column>
                        <Column width="12em">
                            <Text text="ProductName" />
                        </Column>
                        <Column width="12em">
                            <Text text="SupplierID" />
                        </Column>
                        <Column width="12em">
                            <Text text="UnitsInStock" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <Text text="{local>ProductID}" />
                                <Text text="{local>ProductName}" />
                                <Text text="{local>SupplierID}" />
                                <Text text="{local>UnitsInStock}" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </f:content>
        <!-- DynamicPage Footer -->
        <f:footer>
            <OverflowToolbar>
                <ToolbarSpacer/>
                <Button type="Accept" text="Accept"/>
                <Button type="Reject" text="Reject"/>
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>
```
</br>
</br>

### - manifest.json
```java
{
  "_version": "1.76.0",
  "sap.app": {
    "id": "ycl2project10",
    "type": "application",
    "i18n": "i18n/i18n.properties",
    "applicationVersion": {
      "version": "0.0.1"
    },
    "title": "{{appTitle}}",
    "description": "{{appDescription}}",
    "resources": "resources.json",
    "sourceTemplate": {
      "id": "@sap/generator-fiori:basic",
      "version": "1.19.3",
      "toolsId": "1d868a68-3626-4445-b3d5-b7a171869dff"
    }
  },
  "sap.ui": {
    "technology": "UI5",
    "icons": {
      "icon": "",
      "favIcon": "",
      "phone": "",
      "phone@2": "",
      "tablet": "",
      "tablet@2": ""
    },
    "deviceTypes": {
      "desktop": true,
      "tablet": true,
      "phone": true
    }
  },
  "sap.ui5": {
    "flexEnabled": true,
    "dependencies": {
      "minUI5Version": "1.142.0",
      "libs": {
        "sap.m": {},
        "sap.ui.core": {}
      }
    },
    "contentDensities": {
      "compact": true,
      "cozy": true
    },
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "ycl2project10.i18n.i18n"
        }
      }
    },
    "resources": {
      "css": [
        {
          "uri": "css/style.css"
        }
      ]
    },
    "routing": {
      "config": {
        "routerClass": "sap.m.routing.Router",
        "controlAggregation": "pages",
        "controlId": "app",
        "transition": "slide",
        "type": "View",
        "viewType": "XML",
        "path": "ycl2project10.view",
        "async": true,
        "viewPath": "ycl2project10.view"
      },
      "routes": [
        {
          "name": "RouteMain",
          "pattern": ":mainParam:",
          "target": [
            "TargetMain"
          ]
        },
        {
          "name": "RouteDetail",
          "pattern": "detail/{param1}/:param2:",
          "target": [
            "TargetDetail"
          ]
        }
      ],
      "targets": {
        "TargetMain": {
          "id": "Main",
          "name": "Main"
        },
        "TargetDetail": {
          "id": "Detail",
          "name": "Detail"
        }
      }
    },
    "rootView": {
      "viewName": "ycl2project10.view.App",
      "type": "XML",
      "id": "App",
      "async": true
    }
  }
}
```
</br>
</br>

### - Main.view.xml
```html
<mvc:View controllerName="ycl2project10.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text id="idTextMain" text="Main page" />
        <Button text="화면 이동" press="onPress" />
    </Page>
</mvc:View>
```
</br>
</br>

### - Detail.view.xml
```html
<mvc:View controllerName="ycl2project10.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page2" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text id="idText" text="Detail page" />
    </Page>
</mvc:View>
```
</br>
</br>

### - Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project10.controller.Main", {
        onInit() {
            const oRouter = this.getOwnerComponent().getRouter();
            oRouter.getRoute("RouteMain").attachPatternMatched(this._onPatternMatched, this);
        },
        _onPatternMatched: function(oEvent) {
            let sParam = oEvent.getParameters().arguments.mainParam;
            this.byId("idTextMain").setText(sParam);
        },
        onPress: function() {
            let oRouter = this.getOwnerComponent().getRouter();
            oRouter.navTo("RouteDetail", {
                param1 : "hihi",
                param2 : "okok"
            }, false);      // 파라미터가 /detail/hihi/okok 이렇게 나옴
            // Parameter 1 : 이동할 대상 routes의 name
            // Parameter 2 : 화면 이동 시 전달할 파라미터들 지정
            // Parameter 3 : router 히스토리 초기화 여부
        }
    });
});
```
</br>
</br>

### - Detail.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project10.controller.Detail", {
        onInit() {
            // 컨트롤러 실행시 최초 1번
            const oRouter = this.getOwnerComponent().getRouter();
            oRouter.getRoute("RouteDetail").attachPatternMatched(this._ooo, this);
        },
        _ooo: function(oEvent) {
            // route pattern matched 이벤트는
            // URL이 일치할 때마다 실행

            let sParam1 = oEvent.getParameters().arguments.param1;
            this.byId("idText").setText(sParam1);
        },
        // onInit과 attachPatternMatched 함수(_ooo) 차이점 명확하게 이해하기
        onNavButtonPress: function() {
            let oRouter = this.getOwnerComponent().getRouter();
            oRouter.navTo("RouteMain", {
                mainParam: "comeback main view"
            }, false);
        }
    }); 
});
```





## < ABAP 개념 >
</br>

### < ABAP Dynpro CALL SCREEN과 Screen Stack 흐름 >
- **`LEAVE TO SCREEN 0`** 같은 화면 전환 명령은 **`PAI`** 에서만
- **`SCREEN-INPUT`** 같은 화면 속성 변경은 **`PBO`** 에서만
- 사용자 입력 기반 SELECT는 **`PAI`** , 조회 결과 화면 반영/속성 변경은 **`PBO`**
- **OK_CODE 초기화** 코드 꼭 넣어줘야 함 ( 보통 **`PBO`** 에서)
```abap
MODULE clear_ok_code OUTPUT.
  CLEAR: OK_CODE.
ENDMODULE.
```

<img width="584" height="323" alt="image" src="https://github.com/user-attachments/assets/2fc3f75c-acfe-4c79-82c7-fd88c67b058c" />
</br>
</br>

---

</br>

## < 실습 코드 >

### 실습 1
- 문제

<img width="436" height="226" alt="image" src="https://github.com/user-attachments/assets/9ce0443e-acaf-408a-a37a-e43a75d932fa" />
</br>
</br>

**1) 각 스크린의 `Layout` 설정**
- `Screen 100`
<img width="303" height="183" alt="image" src="https://github.com/user-attachments/assets/3143132f-d12f-40c8-8247-f67a222bd64e" />
</br>
</br>

- `Screen 200`
<img width="321" height="281" alt="image" src="https://github.com/user-attachments/assets/439391c4-5f02-4fbd-9386-15c2c4e57460" />
</br>
</br>
</br>

**2) `TOP` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include MZPRACTICE03B03_TOP                      - Module Pool      SAPMZPRACTICE03B03
*&---------------------------------------------------------------------*
PROGRAM SAPMZPRACTICE03B03.

TABLES: ZSCARRFLIGHT_B03.

DATA: OK_CODE TYPE sy-ucomm,
      gv_carrid TYPE ZSCARRFLIGHT_B03-CARRID,
      gv_connid TYPE ZSCARRFLIGHT_B03-CONNID,
      gv_fldate TYPE ZSCARRFLIGHT_B03-FLDATE,
      gs_data TYPE ZSCARRFLIGHT_B03.
```
</br>

**3) `PBO` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include          MZPRACTICE03B03_O01
*&---------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*& Module STATUS_0100 OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE status_0100 OUTPUT.
* SET PF-STATUS 'xxxxxxxx'.
* SET TITLEBAR 'xxx'.
ENDMODULE.
*&---------------------------------------------------------------------*
*& Module STATUS_0200 OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE status_0200 OUTPUT.
  PERFORM get_data USING gv_carrid gv_connid gv_fldate
                   CHANGING gs_data.
ENDMODULE.
*&---------------------------------------------------------------------*
*& Module clear_ok_code OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE clear_ok_code OUTPUT.
  CLEAR: OK_CODE.
ENDMODULE.
```
</br>

**3) `PAI` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include          MZPRACTICE03B03_I01
*&---------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*&      Module  USER_COMMAND_0100  INPUT
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE user_command_0100 INPUT.
  gv_carrid = ZSCARRFLIGHT_B03-CARRID.
  gv_connid = ZSCARRFLIGHT_B03-CONNID.
  gv_fldate = ZSCARRFLIGHT_B03-FLDATE.

  CALL SCREEN 200.
ENDMODULE.
*&---------------------------------------------------------------------*
*&      Module  USER_COMMAND_0200  INPUT
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE user_command_0200 INPUT.
  IF OK_CODE = 'MOVE'.
    LEAVE TO SCREEN 0.
  ENDIF.
ENDMODULE.
```

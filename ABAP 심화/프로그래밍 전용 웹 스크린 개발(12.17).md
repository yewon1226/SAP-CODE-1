## <  핵심 개념 >
</br>

- **1) FIELD / CHAIN 입력 체크 방식**

</br>

- **`LEAVE TO SCREEN 0`** 같은 화면 전환 명령은 **`PAI`** 에서만
- **`SCREEN-INPUT`** 같은 화면 속성 변경은 **`PBO`** 에서만
- 사용자 입력 기반 SELECT는 **`PAI`** , 조회 결과 화면 반영/속성 변경은 **`PBO`**
- **OK_CODE 초기화** 코드 꼭 넣어줘야 함 ( 보통 **`PBO`** 에서)
- **`OK_CODE`** 케이스문은 **`PAI`** 에서
- LOOP AT SCREEN 사용시 **`MODIFY SCREEN`** 넣기
- **`FIELD / CHAIN`** 은 무조건 **PAI** 에서만 구현
- **`AT EXIT-COMMAND`** 은 무조건 **PAI** 에서만 구현

</br>

---

</br>

## < PAI FIELD / CHAIN 입력 체크 방식 >
- **`FIELD / CHAIN`** 은 무조건 **PAI** 에서만 구현
- 화면에 입력된 값을 기준으로 검증하기 위해 사용
</br>

### 1) 기본형 (옵션 없음) – 항상 실행
- PAI 발생 시 무조건 MODULE 실행
- 값 입력 여부, 변경 여부 모두 무관
</br>

- **단일값 체크 (FIELD)**
```abap
FIELD <field> MODULE <module>.
```
```abap
FIELD SCARR-CARRID MODULE CHECK_INPUT.
```
- **다중값 체크 (CHAIN)**
```abap
CHAIN.
  FIELD: <field1>, <field2>.
  MODULE <module>.
ENDCHAIN.
```
```abap
CHAIN.
  FIELD: SDYN_CONN-CARRID, SDYN_CONN-CONNID.
  MODULE CHECK_INPUTS.
ENDCHAIN.
```
</br>
</br>

### 2) 입력값 존재 기준 (ON INPUT / ON CHAIN-INPUT)
- 값이 입력된 경우에만 MODULE 실행
- 다중 값 체크 시 CHAIN 내 하나라도 값이 있으면 실행 (OR 조건)
</br>

- **단일값 체크 (ON INPUT)**
```abap
FIELD <field> MODULE <module> ON INPUT.
```
```abap
FIELD SCARR-CARRID MODULE CHECK_INPUT ON INPUT.
```
- **다중값 체크 (ON CHAIN-INPUT)**
```abap
CHAIN.
  FIELD: <field1>, <field2>.
  MODULE <module> ON CHAIN-INPUT.
ENDCHAIN.
```
```abap
CHAIN.
  FIELD: SDYN_CONN-CARRID, SDYN_CONN-CONNID.
  MODULE CHECK_INPUTS ON CHAIN-INPUT.
ENDCHAIN.
```
</br>
</br>

### 3) 값 변경 기준 (ON REQUEST / ON CHAIN-REQUEST)
- 이전 값과 비교하여 변경되었을 때만 MODULE 실행
- 다중 값 체크 시 CHAIN 내 하나라도 값이 변경되면 실행
- 값의 존재 여부와 무관하게, 이전 값과 달라지기만 하면 실행 ( 값이 있다가 빈 값이어도 실행 )
</br>

- **단일값 체크 (ON REQUEST)**
```abap
FIELD <field> MODULE <module> ON REQUEST.
```
```abap
FIELD SCARR-CARRID MODULE CHECK_INPUT ON REQUEST.
```
- **다중값 체크 (ON CHAIN-REQUEST)**
```abap
CHAIN.
  FIELD: <field1>, <field2>.
  MODULE <module> ON CHAIN-REQUEST.
ENDCHAIN.
```
```abap
CHAIN.
  FIELD: SDYN_CONN-CARRID, SDYN_CONN-CONNID.
  MODULE CHECK_INPUTS ON CHAIN-REQUEST.
ENDCHAIN.
```
</br>
</br>
</br>

---

</br>

## < AT EXIT-COMMAND >
- **`AT EXIT-COMMAND`** 은 무조건 **PAI** 에서만 구현
- 사용자가 **종료·취소·뒤로가기** 와 같은 종료 명령을 선택했을 때만 실행되는 PAI 구문
- 검증 오류로 진행이 불가능할 때 안전하게 화면을 종료하기 위해 사용
</br>

**1) `Function Type` 설정**
- `EXIT` , `CANCEL` 일 때 `Function Type` 을 `E` 로 설정

<img width="719" height="356" alt="image" src="https://github.com/user-attachments/assets/891c927b-5aa9-4623-91ab-281736ecfa3c" />
</br>
</br>
</br>

**2) `PAI` 모듈 생성**
- Screen 코드에서 모듈 생성
```abap
PROCESS AFTER INPUT.
  MODULE <module_name> AT EXIT-COMMAND.
```
```abap
PROCESS AFTER INPUT.
  MODULE EXIT AT EXIT-COMMAND.
```
- 해당 PAI 모듈에서 코드 작성
```abap
MODULE exit INPUT.
  CASE OK_CODE.
    WHEN 'EXIT'.
      LEAVE PROGRAM. " 프로그램 종료
    WHEN 'CANCEL'.
      LEAVE TO SCREEN 0. " 스크린 종료
    WHEN OTHERS.
  ENDCASE.
ENDMODULE.
```
</br>
</br>

**3) 결과 확인**
- `EXIT` , `CANCEL` 누르면 에러가 나도 빠져나올 수 있음 ( `BACK` 은 불가능 )

<img width="711" height="470" alt="image" src="https://github.com/user-attachments/assets/9369b4a7-731b-44a0-8cbb-7271f4ded069" />

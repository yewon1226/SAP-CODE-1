## <  í•µì‹¬ ê°œë… >
</br>

- **1) ABAP ê°ì²´ ìƒì„± ê¸°ë³¸ ë¬¸ë²•**
- **2) ALV ë ˆì´ì•„ì›ƒ Variant ì €ì¥ ì˜µì…˜**

</br>
</br>

---

</br>

## < ABAP ê°ì²´ ìƒì„± ê¸°ë³¸ ë¬¸ë²• >
</br>

### 1) ALV ë°ì´í„° ê°±ì‹ 
- ì´ë¯¸ ìƒì„±ëœ ALV Gridê°€ ìˆì„ ë•Œ ALVë¥¼ ë‹¤ì‹œ ìƒì„±í•˜ì§€ ì•Šê³  ë°ì´í„°ë§Œ í™”ë©´ì— ë°˜ì˜
- `i_soft_refresh` = 'X' : ì •ë ¬Â·í•„í„°Â·ë ˆì´ì•„ì›ƒì„ ìœ ì§€í•œ ì±„ ë°ì´í„°ë§Œ ê°±ì‹ 
- `i_soft_refresh` = space : ALVë¥¼ ì „ì²´ ì¬ê³„ì‚°í•˜ì—¬ ì •ë ¬Â·í•„í„°ê¹Œì§€ ë‹¤ì‹œ ì ìš©
```abap
CALL METHOD <alv_ref>->refresh_table_display
  EXPORTING
    is_stable      = <ls_stable>
    i_soft_refresh = 'X'
  EXCEPTIONS
    finished       = 1
    others         = 2.
```
</br>

- `lvc_s_stbl` : ALV ìƒˆë¡œê³ ì¹¨ ì‹œ í™”ë©´ ìœ„ì¹˜ ê³ ì •ìš© êµ¬ì¡°
- `row = 'X'` â†’ í–‰(ìŠ¤í¬ë¡¤) ìœ„ì¹˜ ìœ ì§€
- `col = 'X'` â†’ ì—´(ì»¤ì„œ) ìœ„ì¹˜ ìœ ì§€
```abap
DATA ls_stable TYPE lvc_s_stbl.

ls_stable-row = 'X'.   " í–‰ ìœ„ì¹˜ ìœ ì§€
ls_stable-col = 'X'.   " ì—´ ìœ„ì¹˜ ìœ ì§€
```
</br>

- ì˜ˆì‹œ ì½”ë“œ
```abap
DATA gs_stable TYPE lvc_s_stbl.

gs_stable-row = 'X'.
gs_stable-col = 'X'.

CALL METHOD go_alv->refresh_table_display
  EXPORTING
    is_stable      = gs_stable
    i_soft_refresh = 'X'
  EXCEPTIONS
    finished       = 1
    others         = 2.
```
</br>
</br>
</br>

### 2) ALV ë ˆì´ì•„ì›ƒ ì„¤ì • (IS_LAYOUT)
- ALV Gridì˜ í™”ë©´ ëª¨ì–‘(ì œëª©, ì¤„ë¬´ëŠ¬, ì»¬ëŸ¼ í­ ë“±)ì„ ì„¤ì •
- ë°ì´í„° ë‚´ìš©ì€ ì•ˆ ë°”ë€Œê³  í‘œì‹œ ë°©ì‹ë§Œ ì œì–´
- `SET_TABLE_FOR_FIRST_DISPLAY` ì—ì„œ ìµœì´ˆ ì¶œë ¥ ì‹œë§Œ ì ìš©
- **`Ctrl + Space`** - `gs_layout-` ë’¤ì—ì„œ ëˆ„ë¥´ë©´ êµ¬ì¡°ì²´ í•„ë“œ ëª©ë¡ ìë™ í‘œì‹œ
</br>

- `lvc_s_layo` : ALV í™”ë©´ì˜ ëª¨ì–‘(ë ˆì´ì•„ì›ƒ) ì„ ì œì–´í•˜ëŠ” êµ¬ì¡°ì²´
```abap
DATA <ls_layout> TYPE lvc_s_layo.

CALL METHOD <alv_ref>->set_table_for_first_display
  EXPORTING
    i_structure_name = '<DDIC>'
    is_layout        = <ls_layout>
  CHANGING
    it_outtab        = <itab>.
```
```abap
DATA gs_layout TYPE lvc_s_layo.

gs_layout-grid_title = 'ALV Grid Title'.
gs_layout-zebra      = 'X'.   " í–‰ ì¤„ë¬´ëŠ¬
gs_layout-cwidth_opt = 'X'.   " ì»¬ëŸ¼ ë„ˆë¹„ ìë™

CALL METHOD go_alv->set_table_for_first_display
  EXPORTING
    i_structure_name = 'SBOOK'
    is_layout        = gs_layout
  CHANGING
    it_outtab        = gt_bookings.
```
</br>
</br>

**< LVC_S_LAYO (ALV Layout Structure ì£¼ìš” í•„ë“œ ì •ë¦¬) >**
  
| Field Name     | Description |
|---------------|-------------|
| `grid_title`  | ALV ìƒë‹¨ì— í‘œì‹œë˜ëŠ” ì œëª© í…ìŠ¤íŠ¸ (ìµœëŒ€ 70ì) |
| `zebra`       | `'X'` ì„¤ì • ì‹œ í–‰ì„ êµì°¨ ìƒ‰ìƒ(Zebra íŒ¨í„´)ìœ¼ë¡œ í‘œì‹œ |
| `no_headers`  | `'X'` ì„¤ì • ì‹œ ì»¬ëŸ¼ í—¤ë” ìˆ¨ê¹€ |
| `sel_mode`    | í–‰ / ì…€ / ì»¬ëŸ¼ ì„ íƒ ëª¨ë“œ ì„¤ì • |
| `cwidth_opt`  | `'X'` ì„¤ì • ì‹œ ì»¬ëŸ¼ í­ ìë™ ìµœì í™” |
| `no_toolbar`  | `'X'` ì„¤ì • ì‹œ ALV íˆ´ë°” ìˆ¨ê¹€ |
| `totals_bef`  | `'X'` ì„¤ì • ì‹œ í•©ê³„ í–‰ì„ ë°ì´í„° ë§¨ ìœ„ì— í‘œì‹œ |
| `info_fname`  | **í–‰(Row) ìƒ‰ìƒ ì •ë³´**ë¥¼ ë‹´ê³  ìˆëŠ” ë‚´ë¶€ í…Œì´ë¸” í•„ë“œëª… |
| `ctab_fname`  | **ì…€(Cell) ìƒ‰ìƒ ì •ë³´**ë¥¼ ë‹´ê³  ìˆëŠ” ë‚´ë¶€ í…Œì´ë¸” í•„ë“œëª… |

</br>

**< ALV Selection Mode (lvc_s_layo-sel_mode) >**

| ê°’(Value) | ì„ íƒ ê°€ëŠ¥ ë²”ìœ„ (Possible Selections) | ì„ íƒ ì»¬ëŸ¼ í‘œì‹œ (Selection Column) |
|-----------|--------------------------------------|-----------------------------------|
| space     | Bì™€ ë™ì¼                              | No                                |
| A         | ë‹¤ì¤‘ í–‰ ì„ íƒ<br>ë‹¤ì¤‘ ì»¬ëŸ¼ ì„ íƒ        | Yes                               |
| B         | ë‹¨ì¼ í–‰ ì„ íƒ<br>ë‹¤ì¤‘ ì»¬ëŸ¼ ì„ íƒ        | No                                |
| C         | ë‹¤ì¤‘ í–‰ ì„ íƒ<br>ë‹¤ì¤‘ ì»¬ëŸ¼ ì„ íƒ        | No                                |
| D         | ë‹¤ì¤‘ í–‰ ì„ íƒ<br>ë‹¤ì¤‘ ì»¬ëŸ¼ ì„ íƒ<br>ì…€ ë‹¨ìœ„ ì„ íƒ ê°€ëŠ¥ | Yes |

</br>
</br>
</br>

### 3) ALV ì„ê³„ê°’(Threshold) ì•„ì´ì½˜ í‘œì‹œ â€“ Exception Display
- íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ ë¹¨ê°•/ë…¸ë‘/ì´ˆë¡ ì•„ì´ì½˜ ìë™ í‘œì‹œ
- `excp_fname` : ì˜ˆì™¸(ì•„ì´ì½˜) ê°’ì„ ë‹´ê³  ìˆëŠ” ì»¬ëŸ¼ ì´ë¦„ì„ ALVì— ì•Œë ¤ì¤Œ
- `excp_led` : í•´ë‹¹ ì»¬ëŸ¼ ê°’ì„ ì‹ í˜¸ë“±(LED) ì•„ì´ì½˜ìœ¼ë¡œ í‘œì‹œí•˜ë„ë¡ ì„¤ì •
- ALV Exception ì»¬ëŸ¼ì€ `1 = ë¹¨ê°•` , `2 = ë…¸ë‘` , `3 = ì´ˆë¡`
```abap
gs_layout-excp_fname = '<ì˜ˆì™¸ì»¬ëŸ¼ëª…>'.
gs_layout-excp_led   = 'X'.

CALL METHOD <alv_ref>->set_table_for_first_display
  EXPORTING
    is_layout = gs_layout
  CHANGING
    it_outtab = <itab>.

*&---------------------------------------------------------------------*

LOOP AT <itab> INTO <wa>.
  IF <ì¡°ê±´1>.
    <wa>-<excp_field> = '1'.
  ELSEIF <ì¡°ê±´2>.
    <wa>-<excp_field> = '2'.
  ELSE.
    <wa>-<excp_field> = '3'.
  ENDIF.

  MODIFY <itab> FROM <wa> TRANSPORTING <excp_field>.
ENDLOOP.
```
```abap
" ì˜ˆì™¸ í‘œì‹œìš© ì»¬ëŸ¼ëª… ì§€ì •
gs_layout-excp_fname = 'EXCP_FLD'.  " ì•„ì´ì½˜ ê°’ì´ ë“¤ì–´ìˆëŠ” í•„ë“œ
gs_layout-excp_led   = 'X'.         " LED(ì‹ í˜¸ë“±) ì•„ì´ì½˜ ì‚¬ìš©

CALL METHOD go_alv->set_table_for_first_display
  EXPORTING
    i_structure_name = 'SFLIGHT'
    is_layout        = gs_layout
  CHANGING
    it_outtab        = gt_flights.

*&---------------------------------------------------------------------*

LOOP AT gt_flights INTO gs_flight.

  IF gs_flight-seatsocc < 50.
    gs_flight-excp = '1'.   " ğŸ”´ ë¹¨ê°•
  ELSEIF gs_flight-seatsocc <= 200.
    gs_flight-excp = '2'.   " ğŸŸ¡ ë…¸ë‘
  ELSE.
    gs_flight-excp = '3'.   " ğŸŸ¢ ì´ˆë¡
  ENDIF.

  MODIFY gt_flights FROM gs_flight TRANSPORTING excp.
  CLEAR gs_flight.

ENDLOOP.
```
</br>
</br>

---

</br>

## < ABAP ê°ì²´ ìƒì„± ê¸°ë³¸ ë¬¸ë²• ì˜ˆì œ >
</br>

**1) `TOP` ëª¨ë“ˆ ìˆ˜ì •**
```abap
DATA: gt_data TYPE TABLE OF sbook,
      gs_data LIKE LINE OF gt_data.

DATA: ok_code TYPE sy-ucomm,
      go_cont TYPE REF TO cl_gui_custom_container,
      go_alv  TYPE REF TO cl_gui_alv_grid.
DATA: gs_variant TYPE disvariant,
      gs_stable TYPE LVC_S_STBL,
      gs_layout TYPE LVC_S_LAYO.

SELECTION-SCREEN BEGIN OF BLOCK blk1 WITH FRAME.
  SELECT-OPTIONS: so_car FOR gs_data-carrid,
                  so_con FOR gs_data-connid,
                  so_fdt FOR gs_data-fldate.
SELECTION-SCREEN END OF BLOCK blk1.

INITIALIZATION.
  PERFORM set_options.
  gs_variant-report = sy-cprog.
  gs_variant-username = sy-uname.
  gs_variant-handle = 'MAIN'.
  " handle : í•˜ë‚˜ì˜ í™”ë©´ì— ì—¬ëŸ¬ê°œì˜ ALVê°€ ìˆëŠ” ê²½ìš°
  "          ê° ALVë§ˆë‹¤ êµ¬ë¶„ìê°€ í•„ìš”í•˜ë¯€ë¡œ êµ¬ë¶„ì ì§€ì •í•´ì¤Œ

START-OF-SELECTION.
  PERFORM GET_DATA.
  CALL SCREEN 100.
```
</br>
</br>

**2) `PBO` ëª¨ë“ˆ ìˆ˜ì •**
- ALV í™”ë©´ì„ ìƒˆë¡œ ê³ ì¹¨í•˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œ
  
<img width="289" height="278" alt="image" src="https://github.com/user-attachments/assets/897d99d2-81ef-4170-8df4-279379ebac4a" />
</br>
</br>

```abap
MODULE status_0100 OUTPUT.
 SET PF-STATUS 'S100'.
 SET TITLEBAR 'T100' WITH sy-uname sy-datum sy-uzeit.
ENDMODULE.

*&---------------------------------------------------------------------*

MODULE init_alv OUTPUT.
  " 1. 100ë²ˆ ìŠ¤í¬ë¦° Layoutì— Area ì¶”ê°€
  " 2. ë§Œì•½ Container ê°€ ë§Œë“¤ì–´ì§€ê¸° ì „ì´ë¼ë©´, ê°ì²´ ìƒì„±í•¨
  "    Custom Container ìƒì„±
  IF go_cont IS INITIAL.
    CREATE OBJECT go_cont
      EXPORTING
        container_name              = 'AREA'
      EXCEPTIONS
        cntl_error                  = 1
        cntl_system_error           = 2
        create_error                = 3
        lifetime_error              = 4
        lifetime_dynpro_dynpro_link = 5
        others                      = 6.
    IF sy-subrc <> 0.
*     MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
*                WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
    ENDIF.

    " 3. ALV Grid ê°ì²´ ìƒì„±í•´ì„œ Containerì™€ ì—°ê²°
    CREATE OBJECT go_alv
      EXPORTING
        i_parent          = go_cont
      EXCEPTIONS
        error_cntl_create = 1
        error_cntl_init   = 2
        error_cntl_link   = 3
        error_dp_create   = 4
        others            = 5.
    IF sy-subrc <> 0.
*     MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
*                WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
    ENDIF.

    PERFORM set_layout.
    " 4. ALV Grid ì•ˆì— Data display
    CALL METHOD go_alv->set_table_for_first_display
      EXPORTING
*        i_buffer_active               =
*        i_bypassing_buffer            =
*        i_consistency_check           =
        i_structure_name              = 'SBOOK'
        is_variant                    = gs_variant
        i_save                        = 'A' "A, X, U, ''
        i_default                     = 'X'
        is_layout                     = gs_layout
*        is_print                      =
*        it_special_groups             =
*        it_toolbar_excluding          =
*        it_hyperlink                  =
*        it_alv_graphics               =
*        it_except_qinfo               =
*        ir_salv_adapter               =
      CHANGING
        it_outtab                     = gt_data
      EXCEPTIONS
        invalid_parameter_combination = 1
        program_error                 = 2
        too_many_lines                = 3
        others                        = 4
            .
    IF sy-subrc <> 0.
*     Implement suitable error handling here
    ENDIF.
  ELSE.
    gs_stable-row = 'X'.
    gs_stable-col = 'X'.

    CALL METHOD go_alv->refresh_table_display
      EXPORTING
        is_stable      = gs_stable
        i_soft_refresh = ''  " X : ì •ë ¬, í•„í„°, ê·¸ì™¸ ê¸°ëŠ¥ë“¤ ìœ ì§€
                             " _ : ì „ì²´ ë¦¬í”„ë ˆì‰¬ (ê¸°ë³¸)
      EXCEPTIONS
        finished       = 1
        others         = 2.

    IF sy-subrc <> 0.
      MESSAGE 'Data refresh ì¤‘ Error ë°œìƒ' TYPE 'E'.
    ENDIF.

  ENDIF.
ENDMODULE.
```

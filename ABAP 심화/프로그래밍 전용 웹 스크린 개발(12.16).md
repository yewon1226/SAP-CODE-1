## <  핵심 개념 >
</br>

- **1) MESSAGE TYPE 종류**
- **2) Icon Field 사용 ( `ICON_CREATE` 함수 불러오기 )**
- **3) `Listbox` (드롭다운) = 여러 값 중 하나를 선택**
- **4)  라디오버튼 및 체크박스 ( Radio button / Check box )**
- **5) 버튼에 아이콘을 같이 띄우기** 

</br>
</br>


## < MESSAGE TYPE 종류 >
</br>

### 1) TYPE 'A' (Abort)
- 치명적인 오류 발생 시 사용
- 메시지 출력 후 프로그램이 즉시 종료됨
```abap
MESSAGE '치명적 오류 발생' TYPE 'A'.
```
<img width="484" height="148" alt="image" src="https://github.com/user-attachments/assets/b10f81ee-593c-4b2d-97b3-1dfaf2544b8a" />
</br>
</br>
</br>

### 2) TYPE 'X' (Exit)
- 시스템 오류 메시지
- 출력과 동시에 Short Dump 발생
```abap
MESSAGE '시스템 오류 발생' TYPE 'X'.
```
<img width="409" height="330" alt="image" src="https://github.com/user-attachments/assets/7972ecc4-fa92-4c5d-bb7d-8e37987477b2" />

</br>
</br>
</br>

### 3) TYPE 'E' (Error)
- 오류 메시지 출력
- 현재 화면에 머물며 다음 단계로 진행 불가
```abap
MESSAGE '입력값 오류입니다' TYPE 'E'.
```
<img width="233" height="50" alt="image" src="https://github.com/user-attachments/assets/ddf4ff77-2521-44eb-995c-b787a54e435b" />
</br>
</br>
</br>

### 4) TYPE 'W' (Warning)
- 경고 메시지 출력
- Enter를 누르면 처리가 계속 진행됨
```abap
MESSAGE '주의가 필요합니다' TYPE 'W'.
```
<img width="220" height="44" alt="image" src="https://github.com/user-attachments/assets/94150f34-68d1-4055-918c-0b837232cb3a" />

</br>
</br>
</br>

### 5) TYPE 'I' (Information)
- 정보 메시지 출력
- 팝업 창으로 표시됨
```abap
MESSAGE '안내 메시지입니다' TYPE 'I'.
```
<img width="483" height="143" alt="image" src="https://github.com/user-attachments/assets/697e2d8e-593d-403f-a18a-056583a3ae1e" />
</br>
</br>
</br>

### 6) TYPE 'S' (Success)
- 성공 메시지 출력
- 화면 하단 상태바에 표시됨
```abap
MESSAGE '정상 처리되었습니다' TYPE 'S'.
```
<img width="206" height="44" alt="image" src="https://github.com/user-attachments/assets/cadb4bb8-7bbf-439e-8606-66c6b27b3d58" />
</br>
</br>
</br>

### 7) DISPLAY LIKE 사용
- 메시지의 실제 동작(TYPE)은 그대로 유지하면서 화면에 보이는 표시 형태만 변경하는 옵션
```abap
MESSAGE '<메시지 내용>' TYPE '<실제타입>' DISPLAY LIKE '<표시타입>'.
```
- 메시지 동작은 E 타입, 표시 모양만 S 타입으로 보여줌
```abap
MESSAGE 'I타입 메세지입니다.' TYPE 'I' DISPLAY LIKE 'S'.
```
<img width="483" height="143" alt="image" src="https://github.com/user-attachments/assets/f00c3f74-380b-4dae-917a-6798c78c18fa" />
</br>
</br>

```abap
MESSAGE 'E타입 메세지입니다.' TYPE 'E' DISPLAY LIKE 'S'.
```
<img width="225" height="46" alt="image" src="https://github.com/user-attachments/assets/f49a1573-bcd5-4cd6-9b0c-d553f983aeb8" />
</br>
</br>
</br>
</br>

---

</br>

## < Icon Field >
- SAP에서 제공하는 아이콘을 저장하기 위한 데이터 타입
```abap
DATA: <icon_field> TYPE ICONS-TEXT.
```
```abap
DATA: iconfield1 TYPE ICONS-TEXT,
      iconfield2 TYPE ICONS-TEXT.
```

- `/oicon` 으로 아이콘 볼 수 있음
<img width="268" height="81" alt="image" src="https://github.com/user-attachments/assets/fe1f0051-1c41-45f6-8cd2-0bd880d10115" />

</br>
</br>
</br>


### < `ICON_CREATE` 함수 불러오기 >
- `Pattern` 을 통해 가져오기
  
<img width="622" height="391" alt="image" src="https://github.com/user-attachments/assets/ba885de6-4761-440d-bf23-c890d700720d" />

</br>
</br>
</br>
</br>

### < Icon Field 를 이용한  예제 >
</br>
</br>

- 문제

<img width="453" height="294" alt="image" src="https://github.com/user-attachments/assets/343c3b1a-33c2-4845-9ab1-faaf80c25e02" />
</br>
</br>
</br>

**1) `Icon` 이용한 Layout 설정**

<img width="541" height="500" alt="image" src="https://github.com/user-attachments/assets/93017b3d-facf-40a3-806e-7aa830caa00a" />
</br>
</br>
</br>

**2) 100 Screen 모듈 생성**
```abap
PROCESS BEFORE OUTPUT.
 MODULE STATUS_0100.
 MODULE SET_ICONS.
 MODULE CLEAR_OK_CODE.
*
PROCESS AFTER INPUT.
 MODULE USER_COMMAND_0100.
```
</br>
</br>

**3) `TOP` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include MZB03004_TOP                             - Module Pool      SAPMZB03004
*&---------------------------------------------------------------------*
PROGRAM SAPMZB03004.

DATA: gs_flight TYPE sflight.
DATA: OK_CODE TYPE sy-ucomm.

DATA: gv_button TYPE I,
      ICONFIELD1 TYPE ICONS-TEXT,
      ICONFIELD2 TYPE ICONS-TEXT.
```
</br>
</br>

**4) `F01` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include          MZB03004_F01
*&---------------------------------------------------------------------*


FORM set_icon USING icon_name
              CHANGING icon_result.
  CALL FUNCTION 'ICON_CREATE'
    EXPORTING
      name = icon_name
    IMPORTING
      RESULT                      = icon_result
    EXCEPTIONS
      ICON_NOT_FOUND              = 1
      OUTPUTFIELD_TOO_SHORT       = 2
      OTHERS                      = 3
    .
  IF sy-subrc <> 0.
    MESSAGE 'Error' TYPE 'E'.
  ENDIF.
ENDFORM.
```
</br>
</br>

**5) `PAI` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include          MZB03004_I01
*&---------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*&      Module  USER_COMMAND_0100  INPUT
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE user_command_0100 INPUT.
  CASE OK_CODE.
    WHEN 'BTN01'.
      IF gv_button = 1.
        gv_button = 0.
      ELSE.
        gv_button = 1.
      ENDIF.
    WHEN 'ICON'.
      IF gv_button = 1.
        gv_button = 0.
      ELSE.
        gv_button = 1.
      ENDIF.
    WHEN 'BACK'.
      LEAVE TO SCREEN 0.
    WHEN 'EXIT' OR 'CANCEL'.
      LEAVE PROGRAM.
    WHEN 'MOVE'.
      SET SCREEN 200.
      LEAVE SCREEN.
      " LEAVE TO SCREEN 200. 과 동일
    WHEN 'REMARK'.
*      MESSAGE 'Remark 메뉴 선택' TYPE 'I'.
      CALL SCREEN 110
      STARTING AT 5 5
      ENDING AT 50 10.
    WHEN OTHERS.
  ENDCASE.

ENDMODULE.
*&---------------------------------------------------------------------*
*&      Module  USER_COMMAND_0110  INPUT
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE user_command_0110 INPUT.
  CASE OK_CODE.
    WHEN 'OK'.
      MESSAGE 'OK 클릭' TYPE 'I'.
    WHEN 'CLOSE'.
      MESSAGE 'CLOSE 클릭' TYPE 'I'.
    WHEN 'DISP'.
      MESSAGE 'DISP 클릭' TYPE 'I'.
    WHEN OTHERS.
  ENDCASE.
ENDMODULE.
```
</br>
</br>

**6) `PBO` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include          MZB03004_O01
*&---------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*& Module STATUS_0100 OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE status_0100 OUTPUT.
 SET PF-STATUS 'S100'.
 SET TITLEBAR 'T100' WITH sy-dynnr.
ENDMODULE.
*&---------------------------------------------------------------------*
*& Module CLEAR_OK_CODE OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE clear_ok_code OUTPUT.
  CLEAR: OK_CODE.
ENDMODULE.
*&---------------------------------------------------------------------*
*& Module STATUS_0200 OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE status_0200 OUTPUT.
 SET PF-STATUS 'S200'.
 SET TITLEBAR 'T100' WITH sy-dynnr.
ENDMODULE.
*&---------------------------------------------------------------------*
*& Module STATUS_0110 OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE status_0110 OUTPUT.
 SET PF-STATUS 'S110'.
 SET TITLEBAR 'T100' WITH sy-dynnr.
ENDMODULE.
*&---------------------------------------------------------------------*
*& Module SET_ICONS OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE set_icons OUTPUT.

  PERFORM set_icon USING 'ICON_CHANGE' CHANGING ICONFIELD2.

  IF gv_button = 1.
    PERFORM set_icon USING 'ICON_SYSTEM_OKAY' CHANGING ICONFIELD1.
  ELSE.
    PERFORM set_icon USING 'ICON_DISPLAY' CHANGING ICONFIELD1.
  ENDIF.

ENDMODULE.
```
</br>
</br>

**7) 결과 확인**
- 아이콘 변경 버튼 클릭시 체크 아이콘으로 바뀜 ( 다시 누르면 원래대로 바뀜 )
<img width="538" height="443" alt="image" src="https://github.com/user-attachments/assets/ed54eb70-b443-4760-a6f8-5a003bf65f0e" />

</br>
</br>
</br>
</br>

---

</br>

## < 스크린 인터페이스(UI) 구성 기능 >
</br>

### 1) 드롭다운
- `Listbox` (드롭다운) = 여러 값 중 하나를 선택
</br>

- `Listbox with key` 선택 시
  
<img width="581" height="411" alt="image" src="https://github.com/user-attachments/assets/b2fad37b-7386-42c8-8728-9c2f080e2044" />
</br>
</br>

<img width="540" height="457" alt="image" src="https://github.com/user-attachments/assets/02045538-3903-4b1e-a475-98ac10ddd584" />

</br>
</br>

- `Listbox` 선택 시
<img width="575" height="448" alt="image" src="https://github.com/user-attachments/assets/d07b66a3-b33f-4635-802f-d2377f769e15" />
</br>
</br>

<img width="531" height="460" alt="image" src="https://github.com/user-attachments/assets/ff0a7dda-af17-4df5-b638-82cfe09cf818" />

</br>
</br>
</br>
</br>

### 2) 라디오버튼 및 체크박스 ( Radio button / Check box )

- 라디오 버튼끼리 그룹 지정 가능
- 그룹 지정시 라디오버튼을 그룹 중 하나만 선택 가능하게 됨
- `OK_CODE` 없이 바로 라디오버튼 체크 가능
```abap
CASE 'X'.
  WHEN view.
    gv_title = 1.
  WHEN maintain_flights.
    gv_title = 2.
  WHEN maintain_bookings.
    gv_title = 3.
ENDCASE.
```

<img width="724" height="373" alt="image" src="https://github.com/user-attachments/assets/9bfbf8d0-91fa-4f9b-b11c-d6fcf922a92f" />

</br>
</br>

- 라디오 버튼끼리 그룹 지정 시 하나만 펑션코드 설정하면 됨
<img width="696" height="356" alt="image" src="https://github.com/user-attachments/assets/d7e18577-96db-4a89-8d98-4e2f119d5dd2" />

</br>
</br>
</br>
</br>

### 3) 버튼의 아이콘 지정
- 버튼에 아이콘을 같이 띄울 수 있음
<img width="699" height="434" alt="image" src="https://github.com/user-attachments/assets/ec5b76f3-e4e2-413f-94d2-9006dc726313" />

</br>
</br>
</br>
</br>

---

</br>

## < 실습 코드 >

### 실습 1
</br>


**1) Screen 100 `Layout` 설정**
- `Foreign Key Check` 해제해야 오류 Message 가 안뜸
  
<img width="550" height="506" alt="image" src="https://github.com/user-attachments/assets/d4b1fba2-bbd3-4d9f-93d9-35b6a8e85b0c" />
</br>
</br>
</br>
</br>

**2) `TOP` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include MZPRACTICE04B03_TOP                      - Module Pool      SAPMZPRACTICE04B03
*&---------------------------------------------------------------------*
PROGRAM SAPMZPRACTICE04B03.

TABLES: SDYN_CONN.

DATA: OK_CODE TYPE sy-ucomm,
      ICONFIELD01 TYPE ICONS-TEXT,
      gs_spfli TYPE SPFLI,
      gv_subrc TYPE I.
```
</br>
</br>

**3) `F01` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include          MZPRACTICE04B03_F01
*&---------------------------------------------------------------------*

FORM set_icons USING icon_name CHANGING icon_result.
  CALL FUNCTION 'ICON_CREATE'
    EXPORTING
      name                        = icon_name
    IMPORTING
      RESULT                      = icon_result
    EXCEPTIONS
      ICON_NOT_FOUND              = 1
      OUTPUTFIELD_TOO_SHORT       = 2
      OTHERS                      = 3
             .
    IF sy-subrc <> 0.
      MESSAGE 'Error' TYPE 'E'.
    ENDIF.
ENDFORM.
```
</br>
</br>

**4) `PAI` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include          MZPRACTICE04B03_I01
*&---------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*&      Module  USER_COMMAND_0100  INPUT
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE user_command_0100 INPUT.
  IF OK_CODE = 'BTN01'.
    SELECT SINGLE * FROM SPFLI
      INTO CORRESPONDING FIELDS OF gs_spfli
      WHERE carrid = SDYN_CONN-carrid
        AND connid = SDYN_CONN-connid.
    IF sy-subrc <> 0.
      gv_subrc = 4.
    ELSE.
      gv_subrc = 1.
    ENDIF.
  ENDIF.
ENDMODULE.
```
</br>
</br>

**5) `PBO` 모듈 생성**
```abap
*&---------------------------------------------------------------------*
*& Include          MZPRACTICE04B03_O01
*&---------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*& Module STATUS_0100 OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE status_0100 OUTPUT.
  IF gv_subrc = 4.
    PERFORM set_icons USING 'ICON_LED_RED' CHANGING ICONFIELD01.
  ELSEIF gv_subrc = 1.
    PERFORM set_icons USING 'ICON_LED_GREEN' CHANGING ICONFIELD01.
  ENDIF.
ENDMODULE.
*&---------------------------------------------------------------------*
*& Module CLEAR_OK_CODE OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE clear_ok_code OUTPUT.
  CLEAR: OK_CODE.
ENDMODULE.
```
</br>
</br>

**6) 결과 확인**

<img width="314" height="284" alt="image" src="https://github.com/user-attachments/assets/9cc57410-24da-4d26-a7b8-de86f9cbafa9" />
</br>
</br>
</br>
</br>
</br>
</br>

### 실습 2
- 라디오버튼 활용 실습
- 타이틀 변경 실습 (titlebar)
</br>

**1) Screen 100 `Layout` 설정**

<img width="738" height="307" alt="image" src="https://github.com/user-attachments/assets/17c29bf5-c52d-48cb-a710-43ddc3b44549" />
</br>
</br>
</br>
</br>

**2) `TOP` 모듈 수정**
```abap
*&---------------------------------------------------------------------*
*& Include          MZBC410_SOLUTION2_TOP
*&---------------------------------------------------------------------*
PROGRAM SAPMZBC410_SOLUTION_03_01.

TABLES: SDYN_CONN.

DATA: exit_button TYPE C,
      OK_CODE TYPE SY-UCOMM,
      gs_data TYPE SDYN_CONN,
      gv_subrc TYPE sy-subrc,
      gs_data2 LIKE SDYN_CONN,
      gv_button TYPE I.

DATA: VIEW TYPE C VALUE 'X',
      MAINTAIN_FLIGHTS TYPE C,
      MAINTAIN_BOOKINGS TYPE C,
      gv_title TYPE I.
```
</br>
</br>

**3) `PAI` 모듈 수정**
```abap
*&---------------------------------------------------------------------*
*& Include          MZBC410_SOLUTION_I01
*&---------------------------------------------------------------------*
*&---------------------------------------------------------------------*
*&      Module  USER_COMMAND_0100  INPUT
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE user_command_0100 INPUT.

  IF exit_button = 'X'.
    LEAVE TO SCREEN 0.
  ELSEIF exit_button = 'T'.
    CALL SCREEN 150
    STARTING AT 5 5
    ENDING AT 50 10.
    CLEAR: exit_button.
  ENDIF.

ENDMODULE.

*&---------------------------------------------------------------------*
*&      Module  CHECK_SFLIGHT  INPUT
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE check_sflight INPUT.

  CASE OK_CODE.
    WHEN 'MODE'.
      CASE 'X'.
        WHEN VIEW.
          gv_title = 1.
        WHEN MAINTAIN_FLIGHTS.
          gv_title = 2.
        WHEN MAINTAIN_BOOKINGS.
          gv_title = 3.
        WHEN OTHERS.
      ENDCASE.
    WHEN 'PUSH'.
      gv_button = 1.

      SELECT SINGLE * FROM sflight
        INTO CORRESPONDING FIELDS OF gs_data
        WHERE carrid = SDYN_CONN-carrid
          AND connid = SDYN_CONN-connid
          AND fldate = SDYN_CONN-fldate.

      IF sy-subrc <> 0.
        gv_subrc = 4.
        message text-007 TYPE 'I'.
      ENDIF.
    WHEN OTHERS.
  ENDCASE.

ENDMODULE.
*&---------------------------------------------------------------------*
*&      Module  USER_COMMAND_0150  INPUT
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE user_command_0150 INPUT.
  IF OK_CODE = 'BTN01'.
    LEAVE TO SCREEN 0.
  ENDIF.
ENDMODULE.
```
</br>
</br>

**4) `PBO` 모듈 수정**
```abap
*&---------------------------------------------------------------------*
*& Include          MZBC410_SOLUTION2_O01
*&---------------------------------------------------------------------*
MODULE status_0100 OUTPUT.

  SET PF-STATUS 'S100'.

  IF gv_title = 1.
    SET TITLEBAR 'T100' WITH 'View'.
  ELSEIF gv_title = 2.
    SET TITLEBAR 'T100' WITH 'Maintain flights'.
    LOOP AT SCREEN.
      IF screen-name = 'SDYN_CONN-PLANETYPE'.
        screen-input = 1.
      ENDIF.
      MODIFY SCREEN.
    ENDLOOP.
  ELSEIF gv_title = 3.
    SET TITLEBAR 'T100' WITH 'Maintain bookings'.
  ENDIF.

  IF gv_button = 1.
    IF gv_subrc <> 0.
      CLEAR SDYN_CONN.
      gv_subrc = 0.
    ELSE.
      MOVE-CORRESPONDING gs_data TO SDYN_CONN.
    ENDIF.
  ELSE.
    gv_button = 0.
  ENDIF.

ENDMODULE.
*&---------------------------------------------------------------------*
*& Module CLEAR_OK_CODE OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE clear_ok_code OUTPUT.
  CLEAR: OK_CODE.
ENDMODULE.
*&---------------------------------------------------------------------*
*& Module STATUS_0150 OUTPUT
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
MODULE status_0150 OUTPUT.
 SET PF-STATUS 'S150'.
 SET TITLEBAR 'xxx'.
ENDMODULE.
```
</br>
</br>

**5) 결과 확인**
- 라디오 버튼 클릭에 따라 타이틀이 바뀌고 `Maintain flights` 클릭 시 `Plane type` 인풋이 가능
<img width="607" height="277" alt="image" src="https://github.com/user-attachments/assets/d0bb79eb-a9ef-4b8f-80d3-65a332a3e71a" />
</br>
</br>
</br>
</br>

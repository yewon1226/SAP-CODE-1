## <  핵심 개념 >
</br>

- **1) ABAP 이벤트**
- **2) Selection Screen - Selection Screen Block / Selection Screen Lines**
- **3) AT SELECTION-SCREEN ON <field>**
- **4) Selection Screen 서브스크린 & 탭스트립**
- **5) Message Class**
- **6) Variant**

</br>
</br>

---

</br>

## < Selection Screen >
</br>

### 1) Pushbutton
- Selection Screen 에 버튼을 하나 추가
- 버튼 클릭 시 USER-COMMAND(OKCODE) 발생
```abap
TABLES <screen_fields>.

SELECTION-SCREEN
  PUSHBUTTON <position>(<length>) <text_var>
  USER-COMMAND <okcode>.
```
```abap
INITIALIZATION.
  <text_var> = '<버튼 텍스트>'.

AT SELECTION-SCREEN.
  CASE <screen_fields>-ucomm.
    WHEN '<okcode>'.
      " 버튼 클릭 시 처리 로직
  ENDCASE.
```
- 예시 코드
```abap
TABLES SSCRFIELDS.

DATA gv_btn_text TYPE string.

PARAMETERS p_carr TYPE scarr-carrid.

SELECTION-SCREEN
  PUSHBUTTON /10(20) gv_btn_text USER-COMMAND btn.    " / 은 줄 바꿈

INITIALIZATION.
  gv_btn_text = 'Display details'.

AT SELECTION-SCREEN.
  CASE SSCRFIELDS-ucomm.
    WHEN 'BTN'.
      MESSAGE 'Pushbutton 클릭됨' TYPE 'I'.
  ENDCASE.
```

</br>
</br>

## 2) Selection Screen 필드 제어
- Selection Screen에서 필드의 표시/입력 여부를 화면 출력 직전에 제어
- **`CS`** = 왼쪽 문자열에 오른쪽 문자열이 포함되어 있으면 참
```abap
AT SELECTION-SCREEN OUTPUT.

  LOOP AT SCREEN.
    IF <조건>.
      screen-<속성> = <값>.
      MODIFY SCREEN.
    ENDIF.
  ENDLOOP.
```
- `screen-active` → 0이면 필드 완전 숨김, 1이면 표시
- `screen-invisible` → 1이면 값이 *****로 마스킹되어 보임
- `screen-input` → 0이면 입력 불가(읽기 전용), 1이면 입력 가능
- `screen-output` → 0이면 출력 안 함, 1이면 출력
- `screen-required` → 1이면 필수 입력 표시
- `screen-intensified` → 1이면 필드 강조 표시
- `screen-display_3d` → 1이면 3D 스타일, 0이면 Flat 스타일
```abap
DATA: gs_booking TYPE sbook.

SELECT-OPTIONS:
  so_car FOR gs_booking-carrid,
  so_con FOR gs_booking-connid MODIF ID abc.

AT SELECTION-SCREEN OUTPUT.

  LOOP AT SCREEN.
    IF screen-name CS 'SO_CON'
       OR screen-group1 = 'ABC'.
      screen-active = 0.
      MODIFY SCREEN.
    ENDIF.
  ENDLOOP.
```
</br>
</br>

---

</br>

## < 실습 코드 >
</br>

### 실습 1
</br>

- 문제
  
<img width="554" height="250" alt="image" src="https://github.com/user-attachments/assets/ca025a6b-eab5-4677-bdfb-d307ad114460" />
</br>
</br>
</br>
</br>

- `TOP` 모듈 생성
```abap
DATA: gs_flight TYPE dv_flights.

PARAMETERS: pa_name TYPE c LENGTH 3.
SELECT-OPTIONS: so_car FOR gs_flight-carrid,
                so_con FOR gs_flight-connid.

SELECTION-SCREEN SKIP 2.

SELECTION-SCREEN BEGIN OF BLOCK blk1 WITH FRAME TITLE TEXT-001.
  SELECTION-SCREEN SKIP 2.

  SELECTION-SCREEN BEGIN OF LINE.
    SELECTION-SCREEN COMMENT 1(15) TEXT-003.
    SELECTION-SCREEN COMMENT 35(10) TEXT-004.
    PARAMETERS: pa_abap AS CHECKBOX.
    SELECTION-SCREEN COMMENT 60(10) TEXT-005.
    PARAMETERS: pa_fiori AS CHECKBOX.
  SELECTION-SCREEN END OF LINE.

  SELECTION-SCREEN SKIP 2.
  SELECTION-SCREEN BEGIN OF BLOCK blk2 WITH FRAME TITLE TEXT-002.
    PARAMETERS: pa_all RADIOBUTTON GROUP rad,
                pa_nat RADIOBUTTON GROUP rad,
                pa_int RADIOBUTTON GROUP rad DEFAULT 'X'.
  SELECTION-SCREEN END OF BLOCK blk2.
SELECTION-SCREEN END OF BLOCK blk1.
```
</br>

- `E01` 모듈 생성
```abap
INITIALIZATION.
  so_car-sign = 'I'.
  so_car-option = 'BT'.
  so_car-low = 'AA'.
  so_car-high = 'QF'.
  APPEND so_car.

  CLEAR so_car.
  so_car-sign = 'E'.
  so_car-option = 'EQ'.
  so_car-low = 'LH'.
  APPEND so_car.

AT SELECTION-SCREEN ON RADIOBUTTON GROUP rad.
  IF pa_all = 'X'.
    MESSAGE 'ERROR !' TYPE 'E'.
  ENDIF.
```
</br>

- 결과 확인
  
<img width="554" height="262" alt="image" src="https://github.com/user-attachments/assets/250511f8-7d2d-4ce1-82a2-7ab4724209c0" />
</br>

- PA_ALL 선택하고 실행하면 에러 발생하며 라디오 버튼 그룹만 활성화
<img width="546" height="424" alt="image" src="https://github.com/user-attachments/assets/041c32eb-eb29-4ba4-8681-fb6c6d8ed2b5" />

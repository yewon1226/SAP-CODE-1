## < ABAP 추가적인 문법 >



<img width="1207" height="232" alt="image" src="https://github.com/user-attachments/assets/df21a51a-9963-4e53-92a2-ee5f9c97b680" />

**1) CONCATENATE**
- 여러 문자열을 하나로 이어 붙임
- `SEPARATED BY` → 문자열 사이에 넣을 구분자(공백, 콤마 등)
```abap
CONCATENATE <문자1> <문자2> <문자3> ... INTO <결과변수>
             [SEPARATED BY <구분자>].
```
- CONCATENATE 의 INTO절에 RESPECTING BLANKS 추가 시, 빈칸을 허용함
```abap
CONCATENATE 문자1 문자2 문자3 INTO lv_result RESPECTING BLANKS.
```
```abap
DATA gv_result TYPE string.
PERFORM getToday CHANGING gv_result.
WRITE: gv_result.

FORM getToday CHANGING VALUE(p_result).
  CONCATENATE '오늘은' sy-datum+0(4) '년' sy-datum+4(2) '월' sy-datum+6(2) '일 입니다' INTO p_result.
ENDFORM.
```
</br>
</br>

**2) sy-datum**
- 현재 시스템 날짜가 자동으로 들어 있는 SAP 시스템 필드
```abap
sy-datum  →  YYYYMMDD (8자리 날짜)
```
- `+숫자(숫자)` 는 문자열에서 원하는 위치(offset)와 길이(length)만큼 잘라오는 부분 문자열 표현
- `<offset>` 위치부터 `<length>` 길이만큼 부분 문자열(substring) 을 잘라서 가져오는 문법
```abap
<변수>+<offset>(<length>)
```
</br>

---
## < 실습 코드 >
- 실습 1
- FROM 함수 이용한 날짜 출력
```abap
DATA gv_result TYPE string.
PERFORM getToday CHANGING gv_result.
WRITE: gv_result.

FORM getToday CHANGING VALUE(p_result).
  CONCATENATE '오늘은' sy-datum+0(4) '년' sy-datum+4(2) '월' sy-datum+6(2) '일 입니다' INTO p_result.
ENDFORM.
```
</br>
</br>

- 실습 2
- function group과 function module 이용
  
**1) function group 생성**

<img width="510" height="298" alt="image" src="https://github.com/user-attachments/assets/6df20037-fa62-4ad6-916a-7e099d4ff48f" />
</br>
</br>

**2) function module 생성**

<img width="531" height="135" alt="image" src="https://github.com/user-attachments/assets/db2e443c-dc3f-4e7f-8a91-4de7d08aca43" />
</br>
</br>

**3) importing, exporting, exceptions 표 채우기**

<img width="506" height="98" alt="image" src="https://github.com/user-attachments/assets/093db934-1818-4570-8cb7-ee485303aa09" />
</br>

<img width="509" height="98" alt="image" src="https://github.com/user-attachments/assets/691cef49-9590-451f-94ac-154a8eb7a623" />
</br>

<img width="510" height="119" alt="image" src="https://github.com/user-attachments/assets/bba68691-5626-47db-8631-e231139dab62" />
</br>
</br>

**4) function module 코드 수정**
```abap
FUNCTION z_bc400_03_comp_percentage.
*"----------------------------------------------------------------------
*"*"Local Interface:
*"  IMPORTING
*"     REFERENCE(IV_ACT) TYPE  BC400_ACT
*"     REFERENCE(IV_MAX) TYPE  BC400_MAX
*"  EXPORTING
*"     REFERENCE(EV_PERCENTAGE) TYPE  BC400_PERC
*"  EXCEPTIONS
*"      DIVISION_BY_ZERO
*"----------------------------------------------------------------------

  IF iv_max = 0.
    ev_percentage = 0.
    RAISE division_by_zero.
  ELSE.

  ENDIF.

ENDFUNCTION.
```

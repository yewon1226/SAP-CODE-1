# 프로그래핑 문법과 로직 (11.14)
</br>

### SAP GUI 기본 구성 요소
1. Command Field (커맨드필드)
   
   - TCODE(트랜잭션 코드) 입력하는 칸
2. Title Bar (타이틀바)
   - 현재 화면의 제목 표시
3. Application Toolbar (어플리케이션 툴바)
   - 프로그램 기능 버튼들이 위치하는 영역
</br>

<img width="463" height="363" alt="image" src="https://github.com/user-attachments/assets/cd48b735-5b5d-4984-9c00-e7dc92999f3f" />

</br>
</br>

### TCODE / 명령어
- `/N` : 현재 TCODE 정료
- `/NXXXX` : 현재 창에서 TCODE 종료
- `/ON` : 새창 열기
- `/OXXXX` : 새창열고 TCODE 실행
- `/ne` : 모든 창닫고 로그오프
- `/nend` : 팝업으로 확인 후 닫고 로그오프
- `/i` : 현재 화면 닫기
</br>

### TCODE 생성 방법
- `SE93` 검색 -> Create (생성) 버튼을 클릭 -> `Program and selection screen (report transaction)`을 선택함
  - `Program and dynpro` : 화면(Screen/Dynpro) 번호를 지정하여, 그 화면부터 상호작용을 시작
  - `Program and selection screen` : 선택 화면(Selection Screen)을 먼저 띄워서 사용자에게 조건을 입력받고 결과를 출력
  - `Method of a class`: ABAP Class의 특정 메서드(Method)를 실행하여 비즈니스 로직을 시작
  - `Transaction with parameters` : 기존 TCODE를 실행하되, 특정 파라미터를 미리 세팅하여 자동 실행
- 생성한 TCODE를 창에 입력하면 이동. ex) `YPROGB03_ASSIGNMENT1`
    
  <img width="370" height="368" alt="image" src="https://github.com/user-attachments/assets/c0b9c4cf-b765-4e4a-b6f5-02971aa88c8d" />

</br>
</br>

### SAP Input Help
- 특정 입력 필드에서 값 목록을 보여주는 기능을 총칭
- 모두 같은 개념으로 F4 키를 누르면 뜨는 팝업
  
- 1) Search Help
  2) Value Help
  3) Possible Entry
  4) F4 Help
  5) Input Help
</br>

### ABAP 기본 개념
- SAP 시스템에서 사용하는 프로그래밍 언어
- 초기에는 COBOL 기반의 절차지향 언어, 이후 객체지향(OOP) 기능 추가
- 소문자 구분 없음 → 내부적으로는 대문자로 처리
- 단, 문자열(‘HQ0’) 내부의 값은 자동 대문자 변환이 되지 않음 → 직접 대문자로 입력해야 함
- 옵션을 통해 소문자 값 전달도 가능
</br>

### SAP ERP란?
- 기업의 다양한 데이터와 프로세스를 통합하여 관리하는 시스템
</br>

### SAP 주요 모듈
- FI(financial accounting) : 재무회계 관리를 위한 모듈. 회사 데이터 처리와 재무 보고서 작성
-	CO(controlling) : 내부 회계 및 경영 회계를 관리, 비용관리/수익성분석/예산처리
-	MM (matrials managements) : 자재 관리하는 모듈, 구매/입고/조회를 관리함
-	PP(product planning) : 제조 및 생산과정을 관리하고 계획
-	SD(sales and distribution) : 판매와 유통관리를 위한 모듈, 주문/배송/물류 관리
-	HR(Human Resource) : 인사관리를 위한 모듈. 인사정보/급여. 교육관리
</br>

### SAP 시스템 버전
1. SAP ECC (ERP Central Component)
   
   - 기존 SAP Business Suite의 핵심 ERP
   - R/3 기반 ERP 시스템
3. SAP S/4 HANA (2015~)
   
   - SAP의 최신 ERP 제품
   - In-Memory DB인 SAP HANA 기반으로 성능 대폭 향상
   - 실시간 분석 및 처리 가능
</br>

### SAP 3-Tier 구조
1) Presentation Layer (프레젠테이션 계층)
   
   - 사용자가 SAP를 사용하는 화면(UI)
   - SAP GUI, 웹(Fiori) 등이 해당

3) Application Layer (애플리케이션 계층)
   - ABAP 프로그램이 실행되는 계층
   - 비즈니스 로직 처리 (주문 생성, 재고 계산 등)
   - Presentation ↔ Database 사이에서 중간 역할

3) Database Layer (데이터베이스 계층)
   - 모든 SAP 데이터를 저장하는 곳
   - HANA, Oracle 등 DBMS 사용
</br>

### SAP Client 구성
- SAP는 여러 Client를 두어 데이터를 독립적으로 관리
- 일반 Client 번호 예시:
  
  - 100 : 개발(DEV)
  - 200 : 품질(QAS)
  - 300 : 운영(PRD)
- Cross-Client(800번): 개발·품질 공용 설정, 클라이언트 구분 없이 적용
</br>

### SAP Object 종류
- Standard Object: SAP에서 제공하는 기본 오브젝트(프로그램, 테이블 등)
- CBO (Customer Bolt-On): 고객사 개발 오브젝트(프로그램, 테이블, 기타)
  
  - CBO(Customer Bolt-On) 네이밍 규칙
    
    - SAP에서 새로 개발하는 오브젝트는 Z 또는 Y로 시작 (이관 가능)

      - Z: 일반 커스텀 오브젝트
      - Y: 회사 내부 표준 오브젝트
   - 예시
     - 패키지: ZPACB##_01
     - 프로그램: /OSE09, /NSE09
       
       - O : 새로운 SAP GUI 창(세션)을 열고 트랜잭션 실행
       - N : 현재 세션에서 트랜잭션 실행
</br>

### 패키지(Package)와 로컬 객체(Local Object)
1) Package
   
   - 이관 대상 Object를 담는 패키지
   - 개발 완료 후 다른 서버(QAS, PRD)로 이관 가능

2) Local Object ($TMP)
   
   - 개인 계정에서 사용하는 임시 패키지
   - 이관 불가, 개인 테스트용
</br>

### SAP 주요 개발 툴 (T-Code)
- SAP 개발 시 자주 사용하는 트랜잭션 코드(T-Code)와 기능 정리

| T-Code | 기능 |
|--------|-------|
| **SE51** | Screen Painter (화면 개발) |
| **SE41** | Menu Painter (메뉴 개발) |
| **SE38** | ABAP Editor (프로그램 작성) |
| **SE37** | Function Builder (함수 모듈 개발) |
| **SE24** | Class Builder (클래스 개발) |
| **SE11** | ABAP Dictionary – **가장 중요** (테이블, 도메인, 뷰 등 데이터 정의) |
| **SE80** | Object Navigator (ABAP Workbench) – **가장 중요**, 오브젝트 통합 관리 |
| **SE93** | 트랜잭션 코드(T-Code)를 생성·조회·관리하는 화면 |

</br>

### Transport(이관) 흐름
- 개발 → 품질 → 운영 순으로 안전하게 이동
- **Tip:** STMS(Transaction Management System)에서 **안쪽 오브젝트부터 순서대로 릴리즈** 후 이관
- 릴리즈 = 이관하기 전에 ‘개발 완료’라고 확정하는 버튼

| 흐름 | 설명 | 도구 |
|------|------|------|
| 개발(DEV) → 품질(QAS) | 개발 완료 후 기능 검증 | CTS (Change and Transport System) |
| 품질(QAS) → 운영(PRD) | 테스트 완료 후 실제 업무 환경 적용 | CTS |
<img width="451" height="231" alt="image" src="https://github.com/user-attachments/assets/da843ad7-23e0-42f0-ae7e-474d71d2361f" />

</br>
</br>

- 순서대로 코드 문법 체크 => 활성화(activate) => 디버그
<img width="508" height="43" alt="image" src="https://github.com/user-attachments/assets/552be000-918d-4fbd-a0cd-735d7deef1bd" />
</br>
</br>

- 상위 레벨에 어디에 들어가 있는지 파악 가능
<img width="506" height="47" alt="image" src="https://github.com/user-attachments/assets/3e423dce-8130-46d1-8f1a-a9f0e6a42f96" />
</br>
</br>
</br>
</br>


### ABAP 프로그램 유형
- SAP에서 자주 사용하는 ABAP 프로그램 유형(Type)과 특징 정리

| Type | 용도 | 특징 |
|------|------|------|
| **1 (Report Program)** | 조회용(R) | 데이터를 조회하고 리포트 출력 (R 기능) |
| **M (Screen Program)** | 화면 기반 CRUD | 생성, 조회, 수정, 삭제 기능 가능 |
</br>

---
</br>

## < ABAP 기본 문법 >
- 모든 문장은 마지막에 마침표(.)
- 문자열은 반드시 홑따옴표 `' '` 사용
  
  - `" "`(쌍따옴표)는 문자열 아님 → 주석
</br>

**1) PARAMETERS**
- 사용자로부터 입력값을 받기 위한 키워드
- 타입을 안 적으면 기본 타입은 C(문자) 길이 1
- 옵션들은 대부분 순서에 상관없이 쓸 수 있음
```abap
PARAMETERS <변수명> TYPE <데이터타입>.
```
```abap
PARAMETERS pa_name TYPE string.  " 문자열 입력값 받음
PARAMETERS pa_num  TYPE I.       " 정수형 입력값 받음
PARAMETERS pa_num  TYPE C LENGTH 4.
PARAMETERS pa_num(4)  TYPE C.      " 위와 같은 코드
```
</br>

**1-1) PARAMETERS 옵션 - OBLIGATORY**
- 필수 입력값. 사용자가 값을 입력하지 않으면 프로그램 실행 불가.
```abap
PARAMETERS pv_data TYPE c OBLIGATORY.      " pv_data는 반드시 입력해야 함
```
</br>

**1-2) PARAMETERS 옵션 - DEFAULT '값'**
- 해당 파라미터가 처음 실행될 때 자동으로 기본값을 넣어줌.
```abap
PARAMETERS pv_data TYPE c DEFAULT 'Hi'.      " 프로그램 실행 시 pv_data에 자동으로 'Hi' 값이 들어감
```
</br>

**1-3) PARAMETERS 옵션 - LOWER CASE**
- 소문자 입력 허용.
- 기본적으로 PARAMETERS는 입력값을 대문자로 변환함 → LOWER CASE 사용 시 그대로 유지.
```abap
PARAMETERS pv_data2 TYPE c LOWER CASE.
```
</br>

**1-4) PARAMETERS 옵션 - VISIBLE LENGTH n**
- 입력필드가 화면에 표시되는 길이만 제한.
- 실제 필드 길이와 화면 표시 길이는 다르게 설정 가능.
```abap
PARAMETERS pv_data2(10) TYPE c VISIBLE LENGTH 2.      " 데이터 길이는 10이지만 화면에는 입력창이 2칸만 보임
```
</br>
</br>

**2) WRITE**
- 화면에 값을 출력하는 키워드
```abap
WRITE <값>. 또는 WRITE: <값1>, <값2>.
```
```abap
WRITE 'Hello World!'.       " 문자열 출력
WRITE: 'Hello', pa_name.    " 문자열과 변수 값 함께 출력
WRITE: 'YOUR input: ', pa_num.
WRITE: 'Result: ', gv_result.

WRITE:/ 'Result: ',
      / gv_result,
      / pa_num.             " / + 띄어쓰기 : 줄바꿈 효과가 남
```
</br>
</br>

**3) NEW-LINE**
- 화면 출력 시 줄바꿈
```abap
NEW-LINE.
```
</br>
</br>

**4) DATA**
- 변수를 선언하는 키워드
```abap
DATA <변수명> TYPE <데이터타입>.
```
```abap
DATA gv_result TYPE I.  " 정수형 변수 선언
```
</br>
</br>

**5) MOVE**
- 값을 다른 변수에 할당
```abap
MOVE <원본> TO <대상>.
```
```abap
MOVE pa_num TO gv_result.  " pa_num 값을 gv_result에 복사
```
</br>
</br>

**6) ADD**
- 산술 연산으로 값을 더함
```abap
ADD <숫자/변수> TO <변수>.
```
```abap
ADD 1 TO gv_result.  " gv_result에 1 더하기
```
</br>
</br>

**7) RADIOBUTTON GROUP**
- 동일한 그룹 안에서 하나만 선택 가능한 옵션 버튼
```abap
PARAMETERS pv_rad1 RADIOBUTTON GROUP rad1.      " pv_rad1과 pv_rad2는 같은 그룹(rad1)
PARAMETERS pv_rad2 RADIOBUTTON GROUP rad1.      " 둘 중 한 개만 'X' 값을 가질 수 있음

pv_rad1 RADIOBUTTON GROUP rad1 DEFAULT 'X'.      " 실행 시 기본으로 pv_rad1이 선택됨
```   
</br>
</br>

**8) AS CHECKBOX**
- 체크박스 형태 입력.
- 체크됨 → `'X'`, 체크 안됨 → `' '` (공백)
```abap
PARAMETERS pv_chk AS CHECKBOX.
```
</br>
</br>

**9) 주석(Comment)**
- `"` 또는 `*` 사용
  
  - `"` : 한 줄의 끝까지 주석
  - `*` : 라인 맨 앞에 쓰면 전체 라인을 주석 처리
```abap
PARAMETERS pa_num TYPE I. " 숫자타입 pa_num 입력값 받음
DATA gv_result TYPE I.    " 변수 선언
```
</br>
</br>

---
</br>

## < 실습 코드 >
### 실습 1
```abap
REPORT ZPROGB03_0001.
PARAMETERS pa_num TYPE I. " 숫자타입 pa_num 입력값 받음
DATA gv_result TYPE I.  " 숫자타입 gv_result 변수 선언

MOVE pa_num TO gv_result. " pa_num 값을 gv_result에 넣음

ADD 1 TO gv_result.   " gv_result에 1을 더함

WRITE: 'YOUR input: ', pa_num.  " 문자와 pa_num 값 함께 출력

NEW-LINE. " 줄바꿈

WRITE: 'Result: ', gv_result.   " 문자와 gv_result 값 함께 출력
```
</br>
</br>

### 실습 2
```abap
REPORT ZBC400_03_HELLO.

PARAMETERS pa_name TYPE string.

WRITE 'Hello World!'.

NEW-LINE.

WRITE: 'Hello', pa_name.
```
</br>
</br>

### 실습 3
```abap
REPORT yprogb03_0002.

PARAMETERS input TYPE I.
ADD 10 TO input.
WRITE input.
```
</br>
</br>

### 실습 4
```abap
PARAMETERS: pv_data(10)  TYPE c OBLIGATORY  DEFAULT 'Hi',
            pv_data2(10) TYPE c LOWER CASE VISIBLE LENGTH 2.

" OBLIGATORY : 필수값 처리
" LOWER CASE : 소문자 허용
" DEFAULT : 기본값 적용
" VISIBLE LENGTH : 화면에 보여지는 입력필드의 길이 저장

PARAMETERS: pv_rad1
            RADIOBUTTON GROUP rad1 DEFAULT 'X',
            pv_rad2
            RADIOBUTTON GROUP rad1,
            pv_chk  AS CHECKBOX.

WRITE: pv_data, pv_data2.

NEW-LINE.

WRITE: 'Radio, Check', pv_rad1, pv_rad2, pv_chk.
```

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (11.17).md
</br>

### 데이터 요소(Data Element) 타입으로 올 수 있는 3가지 종류
- `DATA`는 메모리와 값을 갖는 변수 생성, `TYPE`은 값 없이 타입만 정의
  
#### 1) Standard Data Type
   - SAP가 제공하는 기본 데이터 타입
      #### 1-1) Complete Type
      | Type       | 설명                                                                 |
      |------------|----------------------------------------------------------------------|
      | D          | 날짜(Date)                                                             |
      | T          | 시간(Time)                                                             |
      | I          | 4바이트 정수(Integer 4)                                               |
      | INT8       | 8바이트 정수(Integer 8)                                               |
      | F          | 부동 소수점(Float)                                                     |
      | STRING     | 가변 길이 문자열(Variable-length string), 사용자가 입력하는 만큼 동적 할당됨 |
      | XSTRING    | 가변 길이 이진(Binary) 문자열, 사용자가 입력하는 만큼 동적 할당됨      |
      | DECFLOAT16 | 16자리 부동 소수점(decimal floating)                                  |
      | DECFLOAT34 | 34자리 부동 소수점(decimal floating)                                  |
      
      #### 1-2) Incomplete Type
      | Type | 설명                                                      |
      |------|-----------------------------------------------------------|
      | C    | 문자(Character), 길이 지정 필요                            |
      | N    | 숫자형 문자(Numeric character), 길이 지정 필요              |
      | X    | 16진수(Hexadecimal), 길이 지정 필요                       |
      | P    | 고정소수점. Packed Decimal(BCD), 소수점 위치 지정 필요                 |
     
        - P TYPE
        - `총 자릿수 = LENGTH * 2 - 1`
          - LENGTH : P 타입 선언 시 지정하는 바이트 수
          - *2 → 1바이트 = 2자리 숫자를 저장
          - -1 → 마지막 절반 바이트는 부호(+, -)용
          - 총 자릿수가 DECIMALS 자릿수보다 작으면 에러
          
            ```abap
            DATA lv_amount TYPE P LENGTH 5 DECIMALS 2.
            ```
            </br>
      
#### 2) Local Type
   - 특정 프로그램 내에서 정의하여 사용하는 타입
   - 다른 프로그램에서는 사용할 수 없음
       #### 2-1) TYPES
       - 로컬 타입을 정의할 때 사용하는 키워드, 실제 변수를 만드는 것이 아님
        </br>
         
       ```abap
       TYPES <타입명> TYPE <데이터타입/구조>.
       ```
       ```abap
       TYPES tv_c_type TYPE C LENGTH 8.
       TYPES tv_n_type TYPE N LENGTH 5.
       TYPES tv_p_type TYPE P LENGTH 3 DECIMALS 2.
    
       TYPES ty_employee TYPE string.         " 문자열 타입 정의
       DATA lv_emp_name TYPE ty_employee.     " 타입 사용 변수 선언
       ```

       #### 2-2) LIKE
       - 기존 변수나 데이터 요소의 타입과 속성을 그대로 가져와 새로운 변수 선언
        </br>
         
       ```abap
       DATA <새변수> LIKE <기존변수|데이터요소>.
       ```
       ```abap
       DATA gv_amount TYPE P LENGTH 7 DECIMALS 2.   " 기존 변수 선언
       DATA lv_amount LIKE gv_amount.               " gv_amount와 같은 타입으로 선언
       ```
     </br>
  
#### 3) Global Data Type
   - SE11에서 정의되어 모든 프로그램에서 사용 가능한 타입
   - 데이터 요소, 구조, 테이블 타입 등으로 활용 가능

     #### 3-1) Data Element Type
      - 하나의 값(필드 하나)을 표현하는 타입
      - 길이/형식 같은 기본 속성을 정의함
   
      #### 3-2) Structure Type
      - 여러 필드가 모여 하나의 덩어리를 이루는 타입
      - 하나의 레코드(행) 같은 구조
        
      #### 3-3) Table Type (Internal Table)
      - 동일한 구조를 여러 개 담는 “내부 테이블”을 위한 타입
      - 여러 행을 저장하는 컬렉션 형태

</br>
</br>

### ABAP 변수와 타입 선언: 초기값 vs 기본값 정리
#### 1) 초기값 (Initial Value)
- 모든 변수에는 타입에 따라 자동으로 존재하는 값
- 변수 값을 초기화하면 이 값으로 초기값이 변경됨
```abap
DATA gv_count TYPE I.   " 초기값 0 자동 존재
DATA gv_char  TYPE C.   " 초기값 공백
```

#### 2) 기본값 (Default Value)
- 변수 선언 시 임의로 지정한 값
- 초기값과 달리 개발자가 지정한 값으로 변수 시작
```abap
DATA gv_count TYPE I VALUE 10.  " 기본값 10
DATA gv_name  TYPE C LENGTH 5 VALUE 'ABAP'.  " 기본값 'ABAP'
```
</br>
</br>

---

</br>

## < ABAP 기본 문법 >
#### 1) VALUE
- 변수를 선언하면서 초기값을 지정할 때 사용
</br>
 
```abap
DATA <변수명> TYPE <데이터타입> VALUE <초기값>.
```
```abap
DATA gv_count TYPE I VALUE 10.               " 정수형 변수 초기값 10
DATA lv_name  TYPE string VALUE 'ABAP'.      " 문자형 변수 초기값 'ABAP'
```
</br>

#### 2) CONSTANTS
- 변하지 않는 값(상수)을 선언할 때 사용
- 선언 후 값 변경 불가
```abap
CONSTANTS <상수명> TYPE <데이터타입> VALUE <값>.
```
```abap
CONSTANTS: gc_str TYPE string VALUE 'OKOK',
           gc_num TYPE I VALUE 100.
```
</br>

#### 3) WRITE
- (필드) : 필드 길이에 맞춰 출력
- text-001 : SE51에서 정의한 텍스트 요소, 자리 표시자(&1, &2) 사용 가능
- text-001 다국어 처리 방법 : `Goto → Translation 선택 -> 원하는 언어(EN/KO) 문자열 입력 → 저장 -> 실행 시 환경 언어에 맞춰 자동 출력`
```abap
WRITE: 'My selected variable : '(GRE),
       gc_num,
       text-001.
```
- WRITE 구문에서 필드 길이 지정
- (n) : 출력 시 지정한 길이만큼 공간 확보
```abap
WRITE: (10) gv_data,   " gv_data 값을 10자리 폭으로 출력
       (8)  gv_data2.  " gv_data2 값을 8자리 폭으로 출력
```
</br>

#### 4) MOVE
- 값을 다른 변수에 대입할 때 사용하는 구문(현재는 `=` 와 동일하게 동작)
```abap
MOVE <source> TO <target>.
```
```abap
DATA gv_num1 TYPE I VALUE 10.
DATA gv_num2 TYPE I.

MOVE gv_num1 TO gv_num2.     " gv_num2 = 10
```
</br>

#### 5) CLEAR
- 변수 또는 내부 테이블의 값을 초기값으로 리셋할 때 사용 (타입별 초기값으로 설정됨)
```abap
CLEAR <변수명>.
```
```abap
DATA gv_num TYPE I VALUE 10.
DATA gv_text TYPE c LENGTH 5 VALUE 'ABAP'.

CLEAR gv_num.    " 결과: 0
CLEAR gv_text.   " 결과: '     ' (공백)
```
</br>

#### 6) STRLEN
- 문자열의 길이(문자 수)를 구할 때 사용
```abap
<변수> = STRLEN( <문자열> ).
```
```abap
DATA gv_text TYPE string VALUE 'ABAP'.
DATA gv_len  TYPE i.

gv_len = STRLEN( gv_text ).     " 결과: 4
```
</br>

#### 7) IF문
- 조건에 따라 코드 블록을 실행할 때 사용
- 괄호 양 옆에 띄어쓰기 필수
  
  - 비교 연산자 : EQ (=), NE (≠), GT (>), LT (<), GE (≥), LE (≤), = (같다), <> (같지 않다), > (크다), < (작다), >= (크거나 같다), <= (작거나 같다)
  - 논리 연산자 : AND (그리고), OR (또는), NOT (부정)
  - 초기값 확인 : IS INITIAL (초기값인지 확인), IS NOT INITIAL (초기값이 아닌지 확인)
```abap
IF <조건1> AND <조건2>.
    " 두 조건 모두 참일 때 실행
ELSEIF <조건1> OR <조건3>.
    " 조건1 또는 조건3 중 하나라도 참이면 실행
ELSEIF NOT gv_flag.
    " gv_flag가 FALSE일 때 실행
ELSEIF gv_var IS NOT INITIAL.
    " gv_var가 초기값이 아닐 때 실행
ELSE.
    " 위 조건이 모두 아니면 실행
ENDIF.
```
```abap
DATA gv_num1 TYPE i VALUE 10.
DATA gv_num2 TYPE i VALUE 0.
DATA gv_flag TYPE abap_bool VALUE abap_false.
DATA gv_text TYPE string.

IF gv_num1 > 5 AND gv_num2 = 0.
    WRITE '조건 1과 2 모두 만족'.
ELSEIF gv_num1 = 5 OR gv_num2 = 1.
    WRITE '조건 1 또는 2 만족'.
ELSEIF NOT gv_flag.
    WRITE 'gv_flag가 FALSE'.
ELSEIF gv_text IS NOT INITIAL.
    WRITE 'gv_text 값 있음'.
ELSE.
    WRITE '모든 조건 불만족'.
ENDIF.
```
</br>

#### 8) CASE문
- 하나의 변수 값에 따라 여러 경우를 처리할 때 사용
```abap
CASE <변수>.
    WHEN <값1>.
        <실행문>.
    WHEN <값2>.
        <실행문>.
    WHEN OTHERS.
        <실행문>.
ENDCASE.
```
```abap
DATA gv_code TYPE c LENGTH 1 VALUE 'B'.

CASE gv_code.
    WHEN 'A'.
        WRITE 'Apple'.
    WHEN 'B'.
        WRITE 'Banana'.
    WHEN OTHERS.
        WRITE 'Unknown'.
ENDCASE.
```
</br>

#### 9) MESSAGE
- 프로그램 실행 중 사용자에게 알림, 경고, 오류 등을 출력
```abap
MESSAGE '<메시지 내용>' TYPE '<메시지 타입>'.
```
```abap
MESSAGE '나이를 입력해주세요' TYPE 'E'.  " 오류 메시지
```

</br>
</br>

---
</br>

## < 연산자(Operators) >
- ABAP에서 사용되는 기본 산술 연산자
```abap
+   : 더하기
-   : 빼기
*   : 곱하기
/   : 나누기
**  : 지수(제곱) → 2 ** 3 = 8
DIV : 정수 나눗셈의 몫
MOD : 나머지
```
```abap
DATA a TYPE i VALUE 10.
DATA b TYPE i VALUE 3.
DATA r TYPE i.

r = a + b.      " 13
r = a ** b.     " 1000 (10의 3승)
r = a DIV b.    " 3   (몫)
r = a MOD b.    " 1   (나머지)
```
</br>

### 내장함수
- `abs()` : 숫자의 절대값을 반환
- `strlen()` : 문자열 길이를 반환
- `sqrt()` : 숫자의 제곱근을 반환
- `ipow()` : 정수 거듭제곱 계산 (base^exp)
```abap
DATA: gv_num TYPE I,
      gv_len TYPE string,
      gv_sqrt TYPE I,
      gv_ipow TYPE I.

gv_num = abs( -20 ).
gv_len = strlen( 'Hello World' ).
gv_sqrt = sqrt( abs( 9 ) ).
gv_ipow = ipow( base = 5 exp = 3 ).

write:/ '절대값 abs : ', gv_num,     " 20
      / '문자열길이 len : ', gv_len,  " 11
      / '제곱근 sqrt : ', gv_sqrt,   " 3
      / '지수 ipow : ', gv_ipow.    " 125
```
</br>

### 문자열 처리 함수
- `&&` : 두 문자열을 간단히 이어 붙일 때 사용.
- `CA` : 왼쪽 문자열에 오른쪽 문자열의 문자 중 하나라도 포함되어 있으면 TRUE. 대소문자 구분함.
- `CONCATENATE` : 여러 문자열을 순서대로 연결. `SEPARATED BY`로 각 문자열 사이에 넣을 구분자 지정 가능.
```abap
DATA lv_result TYPE string.
lv_result = 'Hello' && ' World'.    " 결과: 'Hello World'

DATA lv_str TYPE string.
lv_str = 'ABC123'.
IF lv_str CA '123'.
  WRITE: / '숫자를 포함함'.
ENDIF.

DATA: lv_text1 TYPE string VALUE '여기는 서울',
      lv_text2 TYPE string VALUE '날씨가 맑습니다',
      result   TYPE string.
CONCATENATE lv_text1 '이고' lv_text2 '입니다'
INTO result SEPARATED BY space.
WRITE: / result.
" 결과: '여기는 서울 이고 날씨가 맑습니다 입니다'
```
</br>
</br>

---

</br>

## < 실습 코드 >
### 실습 1
```abap
" 변수 선언 시
" => gv_ 글로벌 Data obj
" => lv_ 로컬 Data obj
" 타입 선언 시
" => tv_ : Type value
" 파라미터 선언 시
" => pv_ : 첫 글자에 Parameter 약자 P
" 상수 선언 시
" => gc_ : 첫 글자에 Constants 약자

" 연습
TYPES: tv_char(10) TYPE C,
       tv_dec TYPE P LENGTH 3 DECIMALS 2.

PARAMETERS: pv_data TYPE C LENGTH 3 DEFAULT 'HI'.

DATA: gv_dec TYPE tv_dec,
      gv_date TYPE D,
      gv_char2 TYPE tv_char,
      gv_num TYPE I VALUE 20,
      gv_carrname TYPE S_CARRNAME,
      gv_conn TYPE S_CONN_ID.
DATA: gv_carrname2 LIKE gv_carrname VALUE 'TEST'.

CONSTANTS: gc_str TYPE string VALUE 'OKOK',
           gc_num TYPE I VALUE 100.

WRITE: 'My selected variable : '(GRE),
       gc_num,
       text-001.

" Message Class / Text symbols 를 사용하여 메세지 관리를 하는데,
" Text symbols 에서는 변수 사용할 수 없음
" 변수 사용하려면 Message Class를 사용하자
```
</br>
</br>

### 실습 2
```abap
PARAMETERS name(10) TYPE C.
WRITE: name, 'trainee can learn ABAP programming.'(GRE).

" GRE 더블클릭해서 Text symbols의 값 trainee can learn ABAP programming. 로 설정 -> Translation 선택 -> 원하는 언어(EN/KO) 문자열 입력 → 저장
```
</br>
</br>

### 실습 3
```abap
PARAMETERS: pa_num1 TYPE i,
            pa_num2 TYPE i.

DATA: gv_result TYPE i.

gv_result = pa_num1 + pa_num2.    " 5 + 2 = 7
gv_result = pa_num1 - pa_num2.    " 5 - 2 = 3
gv_result = pa_num1 * pa_num2.    " 5 + 2 = 7
gv_result = pa_num1 / pa_num2.    " 5 / 2 = 3 -> 정수끼리 나눗셈 후 반올림
gv_result = pa_num1 ** pa_num2.   " 5 ** 2 = 25
gv_result = pa_num1 DIV pa_num2.  " 5 DIV 2 = 2 -> 반올림 없음
gv_result = pa_num1 MOD pa_num2.  " 5 MOD 2 = 1

WRITE:/ gv_result.
*Pretty printer(코드정리) 사용시 Shift + F1
```
</br>
</br>

### 실습 4
```abap
PARAMETERS pa_age TYPE I.

IF pa_age IS INITIAL.
    MESSAGE '나이를 입력해주세요' TYPE 'E'.

ELSEIF pa_age GE 8 AND pa_age LE 13.
    WRITE '초등학생입니다.'.

ELSEIF pa_age GT 13 AND pa_age LE 16.
    WRITE '중학생입니다.'.

ELSEIF pa_age GT 16 AND pa_age LT 20.
    WRITE '고등학생입니다.'.

ELSE.
    WRITE '성인입니다.'.
ENDIF.
```
</br>
</br>

### 실습 5
```abap
PARAMETERS pa_curr TYPE C LENGTH 3.

CASE pa_curr.
  WHEN 'USD'.
    WRITE: '달러를 선택하였습니다.'.
  WHEN 'EUR'.
    WRITE: '유로를 선택하였습니다.'.
  WHEN 'KRW'.
    WRITE: '한화를 선택하였습니다.'.
  WHEN OTHERS.
    MESSAGE 'USD, EUR, KRW 중 하나를 입력하세요' TYPE 'E'.
ENDCASE.
```
</br>
</br>

### 실습 6
```abap
PARAMETERS: pa_check AS CHECKBOX.

CASE 'X'.
  WHEN pa_check.  " 체크박스에 체크 됐을 때
    WRITE: '체크되었습니다'.
  WHEN OTHERS.    " 체크박스에 체크가 안됐을 때
    WRITE: '체크되지 않았습니다.'.
ENDCASE.
```
</br>
</br>

### 실습 7
```abap
PARAMETERS score TYPE I.
PARAMETERS pa_check AS CHECKBOX.

IF ( score LE 100 AND score GE 80 ).
  IF ( pa_check EQ 'X' ).
    WRITE '성적 : A 우수상'.
  else.
    WRITE '성적 : A'.
  ENDIF.
ELSEIF ( score LT 80 AND score GE 60 ).
  WRITE '성적 : B'.
ELSEIF ( score LT 60 AND score GE 40 ).
  WRITE '성적 : C'.
ELSE.
  WRITE '성적 : F'.
ENDIF.
```
```abap
PARAMETERS score TYPE I.
PARAMETERS pa_check AS CHECKBOX.

IF ( score <= 100 AND score >= 80 ).
  IF pa_check EQ 'X'.
    WRITE '성적 : A 우수상'.
  else.
    WRITE '성적 : A'.
  ENDIF.
ELSEIF ( score < 80 AND score >= 60 ).
  WRITE '성적 : B'.
ELSEIF ( score < 60 AND score >= 40 ).
  WRITE '성적 : C'.
ELSE.
  WRITE '성적 : F'.
ENDIF.
```
</br>
</br>

### 실습 8
```abap
PARAMETERS: pa_int1 TYPE i,
            pa_int2 TYPE i,
            pa_op   TYPE c.

TYPES: ty_result TYPE p LENGTH 16 DECIMALS 2.

DATA gv_result TYPE ty_result.


CASE pa_op.
  WHEN '+'.
    gv_result = pa_int1 + pa_int2.
  WHEN '-'.
    gv_result = pa_int1 - pa_int2.
  WHEN '*'.
    gv_result = pa_int1 * pa_int2.
  WHEN '/'.
    IF ( pa_int1 = 0 OR pa_int2 = 0 ).
      MESSAGE '0을 나눌 순 없습니다.' TYPE 'E'.
    ENDIF.
    gv_result = pa_int1 / pa_int2.
  WHEN '%'.
    PERFORM CALC_PERCENTAGE USING pa_int1 pa_int2 CHANGING gv_result.
  WHEN OTHERS.
    MESSAGE '타당하지 않는 연산자입니다.' TYPE 'E'.
ENDCASE.

WRITE: gv_result.

FORM CALC_PERCENTAGE USING VALUE(PV_ACT) TYPE I
                           VALUE(PV_MAX) TYPE I
                     CHANGING VALUE(CV_RESULT) TYPE ty_result.
  IF ( PV_MAX = 0 ).
    MESSAGE '0이 들어올 수 없습니다.' TYPE 'E'.
  ELSE.
    CV_RESULT = ( PV_ACT / PV_MAX ) * 100.
  ENDIF.
ENDFORM.
```

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (11.18).md
</br>

# 반복문

## 📌 ABAP 반복문 관련 시스템 변수

| 시스템 변수 | 기능 / 의미 | 반복문과의 관계 |
|-------------|------------|----------------|
| **sy-subrc** | ABAP 문법 실행 결과 코드 <br> - 0: 성공 / 데이터 존재 <br> - 4: 조건에 맞는 데이터 없음 <br> - 8: 키 조합 오류 | SELECT, 함수, 조건문 실행 후 결과 확인 |
| **sy-dbcnt** | SELECT … ENDSELECT 루프 인덱스 (몇 번째 DB 레코드를 읽었는지) | SELECT 루프에서 자동 증가 |
| **sy-tabix** | 내부 테이블 LOOP 행 번호 | LOOP AT 내부 테이블 반복 시 현재 행 번호 |
| **sy-index** | DO / WHILE 반복문 인덱스 | 일반 반복문(DO, DO n TIMES, WHILE)에서 반복 횟수 |
</br>
</br>

### 1) DO … ENDDO
- 반복 횟수를 지정하지 않으면 무한 반복
- `EXIT`나 `CHECK` 등으로 빠져나와야 함
- `sy-index` 사용 가능
```abap
DO.
  " 반복 코드
ENDDO.
```
```abap
PARAMETERS: pa_cnt TYPE i.

DO.
  IF SY-INDEX > pa_cnt.
    EXIT.
  ENDIF.
  WRITE:/ sy-index.
ENDDO.
```
```abap
DATA lv_cnt TYPE i VALUE 0.

DO.
  lv_cnt = lv_cnt + 1.
  IF lv_cnt > 3.
    EXIT.
  ENDIF.
ENDDO.
```
</br>

### 2) DO n TIMES … ENDDO
- 지정한 n번 반복
- 반복 횟수는 sy-index에 자동 저장됨(1부터 시작)
- `sy-index` 사용 가능
```abap
DO n TIMES.
  " 반복 코드
ENDDO.
```
```abap
PARAMETERS: pa_cnt TYPE i.

DO pa_cnt TIMES.
  WRITE:/ sy-index.
ENDDO.
```
```abap
DO 5 TIMES.
  WRITE: / '횟수:', sy-index.
ENDDO.
```
</br>

### 3) WHILE … ENDWHILE
- 조건이 TRUE일 동안 반복
- 조건이 FALSE가 되면 종료
- `sy-index` 사용 가능
```abap
WHILE 조건.
  " 반복 코드
ENDWHILE.
```
```abap
PARAMETERS: pa_cnt TYPE i.

WHILE sy-index < pa_cnt.
  WRITE:/ sy-index.
ENDWHILE.
```
```abap
DATA lv_i TYPE i VALUE 1.

WHILE lv_i <= 5.
  WRITE: / lv_i.
  lv_i = lv_i + 1.
ENDWHILE.
```
</br>

### 4) SELECT … ENDSELECT
- DB를 row-by-row 방식으로 조회
- SELECT된 각 레코드를 반복 처리
- `sy-dbcnt` 사용 가능
```abap
SELECT <필드목록>                  " <필드목록> : 가져올 컬럼 이름 (예: carrid, connid)
  FROM <테이블명>                  " <테이블명> : DB 테이블 이름 (예: sflight)
  INTO <워크에어리어 변수>          " <워크에어리어 변수> : 데이터를 담을 ABAP 변수/구조
  [WHERE <조건문>]                 " WHERE : 선택 조건 (선택 사항)
  [ORDER BY <정렬필드>].            " ORDER BY : 정렬 조건 (선택 사항)
  
  " 처리 로직 작성 (레코드 하나씩 처리)
  
ENDSELECT.
```
```abap
DATA: gv_carrid TYPE scarr-carrid. " S_CARR_ID랑 동일
" Transparent Table 이라 세부적으로 들어갈 수 있음

" 만약 조건이 없으면 테이블의 전체 건수 만큼 루프문 실행
" 조건이 있으면 조건에 맞는 데이터를 가져옴
SELECT carrid
  INTO gv_carrid
  FROM scarr
  WHERE carrid='AA'.
    " 여기서 데이터 처리 로직 구현
    WRITE:/ sy-dbcnt, gv_carrid.
ENDSELECT.
```
```abap
DATA: wa_sflight TYPE sflight.  " 작업 영역 선언

" sflight 테이블 전체 레코드를 하나씩 읽어서 처리
SELECT * 
  FROM sflight
  INTO wa_sflight.

  WRITE: / wa_sflight-carrid, wa_sflight-connid, wa_sflight-fldate.

ENDSELECT.
```
</br>

### 5) LOOP AT … ENDLOOP
- 내부 테이블을 한 행씩 반복 처리
- 현재 행 번호는 sy-tabix
- `sy-tabix` 사용 가능
- `TABLE OF` : 특정 구조나 타입을 가지는 내부 테이블을 선언할 때 사용
- `LINE OF` : 내부 테이블에서 한 행(row)의 타입을 가져올 때 사용
```abap
LOOP AT <internal_table> INTO <work_area> [FROM <시작행>] [TO <끝행>] [WHERE <조건>].

  " 반복 처리 로직 작성 (각 행마다 실행)

ENDLOOP.
```
```abap
DATA: gs_sflight TYPE BC400_S_FLIGHT,      " Structure
      gt_sflight LIKE TABLE OF gs_sflight. " gt : 글로벌 테이블
" DATA: gs_sflight2 LIKE LINE OF gt_sflight. " Structure

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE @gt_sflight  " DB 테이블에서 데이터 가져와서 internal 테이블에 넣음
  WHERE CARRID = 'AA'
    AND CONNID = '0017'.

IF sy-subrc = 0. " 만약 데이터 조회 성공한다면 (데이터 존재시)
  " Internal Table에 조회한 데이터들이 들어와 있는 상황
  " gt_flight를 한 건씩 돌면서 처리. 이 때 gs_flight 에 담아서 처리
  LOOP AT gt_sflight INTO gs_sflight. " Work-area라고 부름
    " gt_sflight 와 gs_sflights 는 필드 구조가 동일해야함.
    WRITE:/ sy-tabix,
            gs_sflight-carrid,
            gs_sflight-connid,
            gs_sflight-fldate.
  ENDLOOP.
ENDIF.
```
```abap
DATA: lt_data TYPE TABLE OF sflight,
      wa_data TYPE sflight.

SELECT * FROM sflight INTO TABLE lt_data.

LOOP AT lt_data INTO wa_data.
  WRITE: / wa_data-carrid, wa_data-connid.
ENDLOOP.
```
</br>
</br>

---

</br>

# ABAP Message Class (SE91) & 메시지 타입 정리
### 1) Message Class (SE91)
- 메시지를 번호로 관리하는 저장소. 이름은 Z나 Y로 시작.
- WITH 뒤에 메시지의 & 자리에 들어갈 값 지정
- 메시지는 `&` 로 변수 값을 받을 수 있음. 최대 4개까지 가능 → &1, &2, &3, &4 또는 단순 & 순서대로.
- 다국어(번역) 지원 → SAP 로그인 언어에 따라 자동으로 해당 언어 메시지 표시됨
</br>

### 2) 메시지 타입 정리

| 타입 | 이름 | 동작 | 상세 설명 |
|------|------|------|------------|
| **I** | Information | 팝업 메시지 표시 | 단순 정보 안내. OK 누르면 계속 진행 |
| **S** | Success | 상태바(하단)에 녹색 메시지 | 성공 메시지. 실행 계속됨 |
| **W** | Warning | **하단 상태바에 노란색 경고 메시지 표시** | 엔터 누르면 계속 진행. 단, *입력 화면(Selection-Screen)* 안에서만 유효 |
| **E** | Error | **하단 상태바에 빨간색 에러 메시지 표시 후 처리 중단** | AT SELECTION-SCREEN에서는 입력 화면으로 돌아감. 프로그램 실행 중에는 현재 이벤트 종료 |
| **A** | Abort | 비정상 종료 | 메시지 출력 후 프로그램 즉시 종료 |
| **X** | Exception | Short Dump 발생 | 시스템 덤프 생성(SAP 오류 강제 발생) |
</br>

### 3) MESSAGE-ID 미사용
- <메시지클래스> 반드시 명시해야 함
```abap
MESSAGE <type><번호>(<메시지클래스>) WITH 값1 값2 ...
```
```abap
REPORT ZPROGB03_0006.

PARAMETERS: pa_name TYPE string.
CONSTANTS: gc_const TYPE string VALUE 'CODE'.
MESSAGE i002(ZMCB03) WITH pa_name gc_const.
```
</br>

### 4) MESSAGE-ID 사용
- 프로그램 가장 위( REPORT 문 뒤 ) 선언
- 메시지 호출 시 클래스 이름 생략 가능
```abap
REPORT <프로그램명> MESSAGE-ID <메시지클래스>.
```
```abap
REPORT ZPROGB03_0006 MESSAGE-ID ZMCB03.          " MESSAGE-ID 사용

PARAMETERS: pa_name TYPE string.
CONSTANTS: gc_const TYPE string VALUE 'CODE'.
MESSAGE i002 WITH pa_name gc_const.              " 생략
```
</br>
</br>

---
</br>

## 디버깅
1. 소스코드에 BREAK-POINT. 키워드
2. 커멘드필드창에 /h 입력
3. 소스코드의 특정 라인 선택
</br>

### 디버깅 창에서 application toolbar의 버튼 4개

1. F5 한줄씩 실행 (메서드 안쪽까지 들어감)
2. F6 함수 블럭을 넘기고 다음 라인 실행. 함수 내부에서 실행 시 F5와 같이 동작함.
3. F7 함수 블럭 안에서, 메인 소스의 현재 위치 바로 다음줄로 이동
4. F8 다음 Break Point로 이동
```abap
BREAK-POINT.
```
</br>
</br>

---

</br>

## < 실습 코드 >
### 실습 1
- 숫자 2개 사이 값의 홀수 출력
```abap
PARAMETERS: pa_num1 TYPE I,   " 입력받은 두 숫자
            pa_num2 TYPE I.
DATA: gv_num TYPE I,
      gv_num1 LIKE gv_num,
      gv_num2 LIKE gv_num.           " 출력할 숫자 검사를 시작할 변수 선언

IF ( pa_num1 > pa_num2 ).     " 앞에 숫자 값이 더 클 때
  gv_num = pa_num2 + 1.
  gv_num1 = pa_num1.
  gv_num2 = pa_num2.
ELSE.
  gv_num = pa_num1 + 1.
  gv_num1 = pa_num2.
  gv_num2 = pa_num1.
ENDIF.

DO.
  IF ( sy-index > gv_num1 - gv_num2 - 1 ).
    EXIT.
  ENDIF.
  IF ( gv_num MOD 2 = 1 ).
    WRITE / gv_num.
  ENDIF.
  gv_num = gv_num + 1.
ENDDO.
```
</br>
</br>

### 실습 2
- 두 숫자 사이 3의 배수 구하기
```abap
PARAMETERS: pa_small TYPE I, pa_big TYPE I.
CONSTANTS: gc_const TYPE I VALUE 3.

IF ( ( pa_small IS INITIAL ) OR ( pa_big IS INITIAL ) ).
  MESSAGE TEXT-001 TYPE 'E'.
ENDIF.

IF ( pa_big <= pa_small ).
  MESSAGE TEXT-002 TYPE 'E'.
ENDIF.

DO.
  IF ( pa_small > pa_big ).
    EXIT.
  ELSEIF ( pa_small MOD gc_const = 0 ).
    WRITE / pa_small.
  ENDIF.
  pa_small = pa_small + 1.
ENDDO.
```
</br>
</br>

### 실습 3
```abap
PARAMETERS: pa_int1 TYPE I,
            pa_int2 TYPE I,
            pa_op TYPE C.

DATA gv_result TYPE P LENGTH 16 DECIMALS 2.


CASE pa_op.
  WHEN '+'.
    gv_result = pa_int1 + pa_int2.
  WHEN '-'.
    gv_result = pa_int1 - pa_int2.
  WHEN '*'.
    gv_result = pa_int1 * pa_int2.
  WHEN '/'.
    IF ( pa_int1 = 0 OR pa_int2 = 0 ).
      MESSAGE '0을 나눌 순 없습니다.' TYPE 'E'.
    ENDIF.
    gv_result = pa_int1 / pa_int2.
  WHEN OTHERS.
    MESSAGE '타당하지 않는 연산자입니다.' TYPE 'E'.
ENDCASE.

WRITE: gv_result.
```

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (11.19).md
</br>


</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (11.20).md
</br>

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (11.21).md
</br>

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (11.24).md
</br>

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (11.25).md
</br>

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (11.26).md
</br>

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (11.27).md
</br>

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (11.28).md
</br>

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (12.01).md
</br>

</br>
</br>
</br>
</br>

# 프로그래핑 문법과 로직 (12.02).md
</br>

</br>
</br>
</br>
</br>

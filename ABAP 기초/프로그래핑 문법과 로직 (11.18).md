# 반복문
### 1) DO … ENDDO
- 반복 횟수를 지정하지 않으면 무한 반복
- `EXIT`나 `CHECK` 등으로 빠져나와야 함
```abap
DO.
  " 반복 코드
ENDDO.
```
```abap
DATA lv_cnt TYPE i VALUE 0.

DO.
  lv_cnt = lv_cnt + 1.
  IF lv_cnt > 3.
    EXIT.
  ENDIF.
ENDDO.
```
</br>

### 2) DO n TIMES … ENDDO
- 지정한 n번 반복
- 반복 횟수는 sy-index에 자동 저장됨(1부터 시작)
```abap
DO n TIMES.
  " 반복 코드
ENDDO.
```
```abap
DO 5 TIMES.
  WRITE: / '횟수:', sy-index.
ENDDO.
```
</br>

### 3) WHILE … ENDWHILE
- 조건이 TRUE일 동안 반복
- 조건이 FALSE가 되면 종료
```abap
WHILE 조건.
  " 반복 코드
ENDWHILE.
```
```abap
DATA lv_i TYPE i VALUE 1.

WHILE lv_i <= 5.
  WRITE: / lv_i.
  lv_i = lv_i + 1.
ENDWHILE.
```
</br>

### 4) SELECT … ENDSELECT
- DB를 row-by-row 방식으로 조회
- SELECT된 각 레코드를 반복 처리
```abap
SELECT fields
  FROM table
  INTO workarea.

  " 처리 로직

ENDSELECT.
```
```abap
DATA wa TYPE sflight.

SELECT * FROM sflight
  INTO wa.

  WRITE: / wa-carrid, wa-connid.

ENDSELECT.
```
</br>

### 5) LOOP AT … ENDLOOP
- 내부 테이블을 한 행씩 반복 처리
- 현재 행 번호는 sy-tabix
```abap
LOOP AT itab INTO wa.
  " 처리 로직
ENDLOOP.
```
```abap
DATA: lt_data TYPE TABLE OF sflight,
      wa_data TYPE sflight.

SELECT * FROM sflight INTO TABLE lt_data.

LOOP AT lt_data INTO wa_data.
  WRITE: / wa_data-carrid, wa_data-connid.
ENDLOOP.
```
</br>

# 📌 ABAP 시스템 변수(System Fields) — 반복문 중심 정리

ABAP 반복문에서 주로 사용되는 시스템 변수를 중심으로 정리했습니다.

---

## 1️⃣ 시스템 변수 표

| 시스템 변수 | 주요 용도 | 반복문과의 관계(중요) | 예시 |
|-------------|----------|------------------------|-------|
| **sy-mandt** | SAP 클라이언트 번호 | 반복문과 무관 | `100`, `200` |
| **sy-uname** | 로그인 사용자 ID | 반복문과 무관 | `USER01` |
| **sy-langu** | 언어 코드 | 반복문과 무관 | `EN`, `KO` |
| **sy-datum** | 시스템 날짜 | 반복문과 무관 | `20251118` |
| **sy-uzeit** | 시스템 시간 | 반복문과 무관 | `152355` |
| **sy-tcode** | 현재 트랜잭션 코드 | 반복문과 무관 | `SE38`, `SE11` |
| **sy-repid** | 실행 중 프로그램 이름 | 반복문과 무관 | `ZTEST` |
| **⭐ sy-subrc** | ABAP 문법 실행 결과 코드 | 반복문 자체보다는 조건문/SELECT 후 결과판별에서 중요 | `0=성공`, `4=데이터없음`, `8=키오류` |
| **⭐⭐ sy-dbcnt** | SELECT-ENDSELECT 문에서 읽은 행 수 | **SELECT 루프 인덱싱** — SELECT가 몇 번째 행인지 | 1, 2, 3 … |
| **⭐⭐ sy-tabix** | 내부 테이블 LOOP 행 번호 | **LOOP AT 인덱싱** — 내부 테이블의 현재 읽는 행 번호 | 1, 2, 3 … |
| **⭐⭐ sy-index** | DO / WHILE 반복 인덱스 | **일반 반복문 인덱싱** — DO, DO n TIMES, WHILE 반복 횟수 | 1, 2, 3 … |

---

## 2️⃣ 반복문별 사용 요약

| 반복문 종류 | 사용되는 시스템 변수 | 의미 |
|-------------|----------------------|-------|
| **SELECT … ENDSELECT** | **sy-dbcnt** | DB 레코드를 몇 개 읽었는지(1부터 증가) |
| **LOOP AT internal table** | **sy-tabix** | 내부 테이블 현재 행 번호 |
| **DO / WHILE** | **sy-index** | 반복문 반복 횟수(1부터 증가) |

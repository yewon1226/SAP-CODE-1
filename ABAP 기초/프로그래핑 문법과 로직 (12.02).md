## < Table Join 방법 >
### 1) DDIC(Database) View를 활용
- DB 레벨에서 여러 테이블을 미리 조인하여 가상 테이블(View) 생성
- 재사용 가능, SQL 최적화, 코드 간결
- 조건 변경에는 유연하지 않음

```abap
SELECT <필드1> <필드2> ...
  FROM <DatabaseView>
  WHERE <조건>.
```
```
SELECT carrid connid carrname      
  FROM zabc        " zabc는 이미 여러 테이블을 조인해 만든 Database View
  WHERE carrid = 'LH'.
```
</br>
</br>
</br>

**1-1) Database View**
- 여러 테이블 조인 가능
- WHERE 절 설정 가능 (Selection Condition)
- JOIN 종류: 무조건 `INNER JOIN`
- ABAP 프로그램에서 TYPE과 SELECT 모두 사용 가능
</br>

**1-2) Projection View**
- 하나의 테이블에서 특정 필드만 추출 → Projection
- JOIN 없음
- ABAP 프로그램에서 TYPE/SELECT 모두 사용 가능
</br>

**1-3) Maintenance View**
- 여러 테이블을 묶어서 한 화면에서 CRUD 가능
- JOIN 방식: 무조건 `LEFT OUTER JOIN`
- ABAP 프로그램에서 SELECT 불가 (테이블 유지 용도)
</br>

**1-4) Help View**
- Search Help(F4 도움창)에서만 사용
- JOIN 방식: 무조건 LEFT OUTER JOIN
- 프로그램에서 SELECT로 사용 불가
</br>
</br>
</br>

### 2) 프로그램에서 직접 조인
- ABAP 프로그램 안에서 SELECT문에서 직접 JOIN 수행
- 조건을 동적으로 처리 가능, 유연성 높음
- 코드 길어지고, DB 최적화는 View보다 어려움
</br>

- `INNER JOIN` : 두 테이블 모두에 있는 데이터만 반환 (교집합)
- `LEFT OUTER JOIN` : 왼쪽 테이블 기준, 오른쪽 테이블 없으면 NULL 포함
- `RIGHT OUTER JOIN` : 오른쪽 테이블 기준, 왼쪽 테이블 없으면 NULL 포함
</br>

- `-` : 필드 접근용 (JOIN 에서만 안씀)
- `~` : JOIN 사용 시에만 사용
```abap
SELECT <테이블1~필드>, <테이블2~필드>
  INTO TABLE <내테이블>
  FROM <테이블1>
  INNER JOIN <테이블2>
  ON <테이블1~키> = <테이블2~키>
  WHERE <조건>.
```
- `INNER JOIN` 예제
```abap
SELECT SCARR~CARRID
       SPFLI~CONNID
       SCARR~CARRNAME
       SPFLI~CITYFROM
  INTO TABLE lt_flight
  FROM SCARR as A INNER JOIN SPFLI as B
    ON SCARR~CARRID = SPFLI~CARRID      " spfli와 scarr 모두 존재하는 carrid만 결과에 포함
  WHERE SCARR~CARRID = 'AA'.

  IF sy-subrc = 0.
    cl_demo_output=>display( lt_flight ).
  ENDIF.
```
- `LEFT OUTER JOIN` 예제
```abap
DATA: BEGIN OF ls_flight,
        carrid   TYPE s_carr_id,
        connid   TYPE s_conn_id,
        carrname TYPE s_carrname,
        cityfrom TYPE s_from_cit,
      END OF ls_flight.
DATA: lt_flight LIKE TABLE OF ls_flight.

SELECT A~carrid B~connid A~carrname B~cityfrom
  INTO TABLE lt_flight
  FROM scarr AS A LEFT OUTER JOIN spfli AS B
    ON A~carrid = B~carrid
  WHERE A~carrid BETWEEN 'NG' AND 'UA'.

SORT lt_flight BY carrid.

IF sy-subrc = 0.
  LOOP AT lt_flight INTO ls_flight.
    WRITE:/ ls_flight-carrid,
            ls_flight-connid,
            ls_flight-carrname,
            ls_flight-cityfrom.
  ENDLOOP.
ENDIF.
```
</br>
</br>

---

</br>

## < 실습 코드 >

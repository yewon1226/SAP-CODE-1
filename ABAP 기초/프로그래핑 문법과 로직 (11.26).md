# Table Join 방법
### 1) Database View 이용
- DB 레벨에서 여러 테이블을 미리 조인하여 가상 테이블(View) 생성
- 재사용 가능, SQL 최적화, 코드 간결
- 조건 변경에는 유연하지 않음
```abap
SELECT <필드1> <필드2> ...
  FROM <DatabaseView>
  WHERE <조건>.
```
```
SELECT carrid connid carrname      
  FROM zabc        " zabc는 이미 여러 테이블을 조인해 만든 Database View
  WHERE carrid = 'LH'.
```
</br>

### 2) 프로그램에서 직접 조인
- ABAP 프로그램 안에서 SELECT문에서 직접 JOIN 수행
- 조건을 동적으로 처리 가능, 유연성 높음
- 코드 길어지고, DB 최적화는 View보다 어려움
```abap
SELECT <테이블1~필드>, <테이블2~필드>
  INTO TABLE <내테이블>
  FROM <테이블1>
  INNER JOIN <테이블2>
  ON <테이블1~키> = <테이블2~키>
  WHERE <조건>.
```
```abap
SELECT SCARR~CARRID
       SPFLI~CONNID
       SCARR~CARRNAME
       SPFLI~CITYFROM
  INTO TABLE lt_flight
  FROM SCARR as A INNER JOIN SPFLI as B
    ON SCARR~CARRID = SPFLI~CARRID
  WHERE SCARR~CARRID = 'AA'.

  IF sy-subrc = 0.
    cl_demo_output=>display( lt_flight ).
  ENDIF.
```
</br>
</br>

---

</br>

## < ABAP 추가 문법 >
</br>

**1) APPENDING**
- SELECT 결과를 기존 내부 테이블 뒤에 이어서 추가
- 기존 데이터는 그대로 유지
- 필드명이 같은 컬럼끼리 자동 매칭
- 구문 비교:
  - `INTO TABLE itab` → 내부테이블 기존 내용 삭제 후 새 데이터
  - `APPENDING CORRESPONDING FIELDS OF TABLE itab` → 기존 데이터 유지 후 추가
```abap
SELECT <필드1> <필드2> ...
  FROM <테이블>
  APPENDING CORRESPONDING FIELDS OF TABLE <itab>  " `INTO` 대신 `APPENDING` 넣기
  WHERE <조건>.
```
</br>
</br>

**2) CLIENT SPECIFIED**
- SAP ABAP에서 일반적으로 SELECT는 현재 클라이언트(sy-mandt) 기준으로만 데이터 조회.
- CLIENT SPECIFIED를 사용하면 MANDT 값을 직접 지정하여 다른 클라이언트 데이터도 조회 가능.
- 주의: 잘못 사용하면 보안/데이터 일관성 문제 발생 가능.
```abap
SELECT fields
  INTO <TABLE|STRUCTURE>
  FROM dbtable
  CLIENT SPECIFIED
  WHERE mandt = '값'.
```
```abap
DATA: lt_scarr TYPE TABLE OF SCARR.

SELECT *
  INTO CORRESPONDING FIELDS OF TABLE lt_scarr
  FROM SCARR
  CLIENT SPECIFIED
  WHERE mandt BETWEEN '000' AND '800'.

IF sy-subrc = 0.
  cl_demo_output=>display( lt_scarr ).
ENDIF.
```



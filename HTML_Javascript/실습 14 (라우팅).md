### SAPUI5 라우팅을 이용한 화면 이동 (Main → Detail)
- manifest.json의 routing 설정을 통해 Main 화면에서 버튼 클릭 시 navTo()로 Detail 화면으로 이동하며, URL 파라미터를 전달하고 attachPatternMatched()로 해당 값을 수신해 Text에 표시하는 예제임
- 뒤로가기 가능
</br>

<img width="418" height="188" alt="image" src="https://github.com/user-attachments/assets/6ff00437-2c2c-41fd-bb9e-e67573481034" />

</br>
</br>

<img width="403" height="183" alt="image" src="https://github.com/user-attachments/assets/193ed346-c941-4dbf-8a33-13b531a02b7b" />


- manifest.json
```java
"routing": {
    "config": {
      "routerClass": "sap.m.routing.Router",
      "controlAggregation": "pages",
      "controlId": "app",
      "transition": "slide",
      "type": "View",
      "viewType": "XML",
      "path": "ycl2project10.view",
      "async": true,
      "viewPath": "ycl2project10.view"
    },
    "routes": [
      {
        "name": "RouteMain",
        "pattern": "mainParam",
        "target": [
          "TargetMain"
        ]
      },
      {
        "name": "RouteDetail",
        "pattern": "detail/{param1}/:param2:",
        "target": [
          "TargetDetail"
        ]
      }
    ],
    "targets": {
      "TargetMain": {
        "id": "Main",
        "name": "Main"
      },
      "TargetDetail": {
        "id": "Detail",
        "name": "Detail"
      }
    }
  }
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project10.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text text="Main page" />
        <Button text="화면 이동" press="onPress" />
    </Page>
</mvc:View>
```
</br>

- Detail.view.xml
```html
<mvc:View controllerName="ycl2project10.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page2" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text id="idText" text="Detail page" />
    </Page>
</mvc:View>
```
</br>

- Detail.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project10.controller.Detail", {
        onInit() {
            // 컨트롤러 실행시 최초 1번
            const oRouter = this.getOwnerComponent().getRouter();
            oRouter.getRoute("RouteDetail").attachPatternMatched(this._ooo, this);
        },
        _ooo: function(oEvent) {
            // route pattern matched 이벤트는
            // URL이 일치할 때마다 실행

            let sParam1 = oEvent.getParameters().arguments.param1;
            this.byId("idText").setText(sParam1);
        }
        // onInit과 attachPatternMatched 함수(_ooo) 차이점 명확하게 이해하기
    }); 
});
```
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project10.controller.Main", {
        onInit() {
        },
        onPress: function() {
            let oRouter = this.getOwnerComponent().getRouter();
            oRouter.navTo("RouteDetail", {
                param1 : "hihi",
                param2 : "okok"
            }, false);      // 파라미터가 /detail/hihi/okok 이렇게 나옴
            // Parameter 1 : 이동할 대상 routes의 name
            // Parameter 2 : 화면 이동 시 전달할 파라미터들 지정
            // Parameter 3 : router 히스토리 초기화 여부
        },
        onNavButtonPress: function() {
            // let oRouter = this.getOwnerComponent().getRouter();
            // oRouter.navTo("RouteMain", {
            //     mainParam : "comeback main view"
            // }, false); 
        }
    });
});
```
</br>

---

### 라우팅 파라미터를 이용한 Detail→Main 화면 복귀
- 기존 코드가 Main→Detail 이동만 했다면, 이번 코드는 Detail 화면의 NavButton 클릭 시 mainParam("comeback main view")을 전달해 Main 화면으로 돌아오며 그 값을 표시하도록 확장한 버전
</br>

<img width="450" height="199" alt="image" src="https://github.com/user-attachments/assets/8c77bde0-5c5e-4e90-80bc-ff6082dbf002" />
</br>
</br>

<img width="378" height="200" alt="image" src="https://github.com/user-attachments/assets/413fa743-a391-41ed-8ded-2ce7605f29d7" />
</br>
</br>
</br>

- manifest.json
- "pattern": ":mainParam:" 으로 바꿔야 라우터가 파라미터가 있어도 되고 없어도 되는 Route로 인식해서 첫 진입(기본 Main)과 파라미터 이동(Detail→Main) 모두 정상 작동함
```java
"routes": [
  {
    "name": "RouteMain",
    "pattern": ":mainParam:",    // 콜론(:)으로 감싸면 optional parameter
    "target": ["TargetMain"]
  },
  {
    "name": "RouteDetail",
    "pattern": "detail/{param1}/:param2:",
    "target": ["TargetDetail"]
  }
]
```
</br>

- Main.view.xml
```html
<mvc:View controllerName="ycl2project10.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text id="idTextMain" text="Main page" />
        <Button text="화면 이동" press="onPress" />
    </Page>
</mvc:View>
```
</br>

- Detail.view.xml
```html
<mvc:View controllerName="ycl2project10.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
    <Page id="page2" showNavButton="true" navButtonPress="onNavButtonPress" title="{i18n>title}">
        <Text id="idText" text="Detail page" />
    </Page>
</mvc:View>
```
</br>

- Main.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project10.controller.Main", {
        onInit() {
            const oRouter = this.getOwnerComponent().getRouter();
            oRouter.getRoute("RouteMain").attachPatternMatched(this._onPatternMatched, this);
        },
        _onPatternMatched: function(oEvent) {
            let sParam = oEvent.getParameters().arguments.mainParam;
            this.byId("idTextMain").setText(sParam);
        },
        onPress: function() {
            let oRouter = this.getOwnerComponent().getRouter();
            oRouter.navTo("RouteDetail", {
                param1 : "hihi",
                param2 : "okok"
            }, false);      // 파라미터가 /detail/hihi/okok 이렇게 나옴
            // Parameter 1 : 이동할 대상 routes의 name
            // Parameter 2 : 화면 이동 시 전달할 파라미터들 지정
            // Parameter 3 : router 히스토리 초기화 여부
        }
    });
});
```
</br>

- Detail.controller.js
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], (Controller) => {
    "use strict";

    return Controller.extend("ycl2project10.controller.Detail", {
        onInit() {
            // 컨트롤러 실행시 최초 1번
            const oRouter = this.getOwnerComponent().getRouter();
            oRouter.getRoute("RouteDetail").attachPatternMatched(this._ooo, this);
        },
        _ooo: function(oEvent) {
            // route pattern matched 이벤트는
            // URL이 일치할 때마다 실행

            let sParam1 = oEvent.getParameters().arguments.param1;
            this.byId("idText").setText(sParam1);
        },
        // onInit과 attachPatternMatched 함수(_ooo) 차이점 명확하게 이해하기
        onNavButtonPress: function() {
            let oRouter = this.getOwnerComponent().getRouter();
            oRouter.navTo("RouteMain", {
                mainParam: "comeback main view"
            }, false);
        }
    }); 
});
```

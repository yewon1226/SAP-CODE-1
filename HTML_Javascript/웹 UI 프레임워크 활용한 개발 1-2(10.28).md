# 10/28 기록
### SAPUI5 Model 정리
- Model: 데이터를 관리해주는 역할
- 클라이언트(Client) 모델
  - 종류: JSON, XML, Resource
  - 특징: 프로젝트 내부에서만 사용, 서버 요청 없음 → 바로 화면에 사용 가능 (데이터가 이미 로컬에 있음)
- 서버(Server) 모델
  - 종류: OData V2, OData V4
  - 특징: 서버와 통신, 서버에 요청 필요 → 서버 응답 받아 화면에 사용
</br>

### SAPUI5 JSONModel 사용 정리
- `getModel`
  - View 또는 컨트롤러에서 등록된 모델을 가져오는 함수
  - 가져온 모델 객체를 통해 데이터 조회/수정 가능
```java
var oModel = View.getModel(sName)
```
</br>

- `setModel`
  - 모델을 View 또는 컨트롤러에 연결하는 역할
  - 연결된 모델은 화면(UI) 요소와 바인딩 가능
```java
View.setModel(oModel, sName)
```
</br>

- 모듈 정의 및 불러오기
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel"
], function(Controller, JSONModel) {
    "use strict";
});
```
</br>

- 컨트롤러에서 생성한 모델
- 다른 View에서는 접근 불가 → 컨트롤러/해당 View 내부에서만 사용 가능 (local(지역) 모델)
- `setModel(oModel, "customer")` → View에서 "customer"라는 이름으로 접근
- `setModel(oModel)` → 기본 모델, 이름 없이 접근 가능
```java
onInit: function() {
    // 1. JSONModel 생성
    var oModel = new sap.ui.model.json.JSONModel({
        name: "홍길동",
        age: 30
    });

    // 2. 현재 View에 모델 연결 (컨트롤러 전용)
    this.getView().setModel(oModel, "customer");
}
```
</br>

- manifest.json에서 정의한 모델
- manifest.json에서 정의 → 앱 전체에서 전역 모델(Global Model)
- `this.getView().getModel()` → 기본 모델(""). 이름 없이 접근 가능. 
- `this.getView().getModel("customer")` →  이름 있는 모델. "customer" 같은 이름으로 접근.
```java
{
  "sap.ui5": {
    "models": {
      "": { // 기본 모델
        "type": "sap.ui.model.json.JSONModel",
        "settings": {
          "data": { "name": "홍길동", "age": 30 }
        }
      },
      "customer": { // 이름 있는 전역 모델
        "type": "sap.ui.model.json.JSONModel",
        "settings": {}
      }
    }
  }
}
```
</br>

### 바인딩(Binding)
- 모델(Model)과 화면(View)을 연결하여 데이터를 자동으로 표시하고 동기화하는 기능
</br>

### 바인딩 방식(mode)
- one-time : 모델 → 뷰, 일회성 바인딩(최초 1회만 화면에 표시)
- one-way : 모델 → 뷰, 단방향 바인딩(모델 데이터 변경 시 화면 자동 갱신)
- two-way : 모델 ↔ 뷰, 양방향 바인딩(모델과 화면 모두 동기화, 뷰 변경 시 모델에도 반영)
</br>

### 모델 종류
- JSON Model: 클라이언트 데이터(JSON) 관리, 기본 two-way
- XML Model: 클라이언트 XML 데이터 관리, 기본 two-way
- Resource Model: 다국어(i18n) 문자열 관리, 기본 one-way
- OData V2 Model: 서버 데이터 통신, 기본 one-way
- OData V4 Model: 최신 서버 데이터 통신, 기본 one-way
</br>

### SAPUI5 JSON Model 바인딩 접근
- 컨트롤러에서 생성한 모델 (Local Model)
```java
onInit() {
    // 객체 데이터
    let oData = { 
        inputValue: {
            firstName: "Park",
            lastName: "Gildong"
        }
    };

    let aData = { 
        inputValue: [{
            firstName: "Park",
            lastName: "Gildong"
        }]
    };

    // JSONModel 생성
    let oModel = new JSONModel(oData);
    let aModel = new JSONModel(aData);

    // View에 모델 연결
    this.getView().setModel(oModel, "local");
    this.getView().setModel(oModel, "array");
}
```
</br>
</br>

- XML View에서 바인딩 접근
- 배열 데이터 접근
```html
<Page id="page" title="{array>/inputValue/0/firstName}">
    <!-- array의 name 배열 첫 번째 객체(인덱스 0번)의 firstName -->
</Page>
```
- 객체 데이터 접근
```html
<Page id="page" title="{local>/inputValue/firstName}">
    <!-- local의 firstName -->
</Page>
```
- 다중 속성 바인딩
```html
<Page id="page" title="{local>/inputValue/firstName} {local>/inputValue/lastName}">
    <!-- local 모델의 name 객체 속성 firstName과 lastName 바인딩 -->
</Page>
```

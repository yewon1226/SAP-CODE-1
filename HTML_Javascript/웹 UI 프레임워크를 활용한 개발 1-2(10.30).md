# 10/30 기록
### Element Binding
- UI 요소를 모델의 특정 데이터(객체)에 연결

### Context
- 바인딩 시 자동 생성되는 객체로 모델 정보, 데이터 경로, 현재 인덱스 등을 가짐
- 리스트 구조(List, Table)에서 각 항목마다 개별 context 생성
</br>

### JSONModel.loadData
- 외부 JSON 파일을 모델에 불러와 데이터로 채우는 함수
```java
oModel.loadData("파일 경로");
```
```java
let oModel = new JSONModel();
oModel.loadData(sap.ui.require.toUrl("ycl2project082/model/data.json"));
this.getView().setModel(oModel, "main");
```
</br>

### Element Binding (`bindElement`)
- 컨테이너(VBox 등)에 모델 객체를 연결해, 자식 컨트롤이 해당 객체를 기준으로 데이터를 참조하게 함
- JS 함수 형식
```java
control.bindElement({
    path: "모델 경로",
    model: "모델 이름"
});
```
</br>

### 직접 경로 바인딩 (bindElement 불필요한 경우)
- bindElement 필요 없음
```html
<Text binding="{/company}" text="{state}" />
```
</br>

### 컨텍스트 바인딩 (bindElement 필요한 경우)
- 여러 속성을 바인딩할 때 사용
</br>
  
1) 이름 없는 기본 모델
- controller.js 파일
```java
onInit() {
            let oModel = new JSONModel();
            oModel.loadData(sap.ui.require.toUrl("ycl2project082/model/data.json"));
            this.getView().setModel(oModel);

            this.byId("idVBox").bindElement("/company");
}
```
- view.xml 파일
```html
<VBox id="idVBox" class="sapUiSmallMargin">
    <Text text="VBox안에 데이터 : {main>name}" />
    <Text text="VBox안에 데이터 : {main>street}" />
    <Text text="VBox안에 데이터 : {main>city}" />
    <Text text="VBox안에 데이터 : {main>state}" />
</VBox>
```
</br>
</br>

2) 이름 있는 모델
- controller.js 파일
```java
onInit() {
            let oModel = new JSONModel();
            oModel.loadData(sap.ui.require.toUrl("ycl2project082/model/data.json"));
            this.getView().setModel(oModel, "main");

            this.byId("idVBox").bindElement({
                path : "/company",
                model : "main"
            });
}
```
- view.xml 파일
```html
<VBox id="idVBox" class="sapUiSmallMargin">
    <Text text="VBox안에 데이터 : {main>name}" />
    <Text text="VBox안에 데이터 : {main>street}" />
    <Text text="VBox안에 데이터 : {main>city}" />
    <Text text="VBox안에 데이터 : {main>state}" />
</VBox>
```
</br>
</br>

### onSelectionChange
- `sap.m.Table`에서 사용자가 행(Row)을 선택할 때 실행되는 이벤트
```java
onSelectionChange: function(oEvent) {
    // 이벤트 처리 로직
}
```
</br>

### getSource()
- 이벤트를 발생시킨 컨트롤 객체를 반환
```java
let oTable = oEvent.getSource(); // 클릭한 테이블 객체
```
</br>

- `oEvent.getSource()` → 이벤트를 발생시킨 테이블 객체
- `oEvent.getParameters()` → 선택된 행 데이터, 인덱스 등 파라미터 정보
```java
onSelectionChange: function(oEvent) {
    let oBindingContext = oEvent.getParameters().listItem.getBindingContext("customer");
    this.byId("idBookings").setBindingContext(oBindingContext, "customer");
}
```
</br>


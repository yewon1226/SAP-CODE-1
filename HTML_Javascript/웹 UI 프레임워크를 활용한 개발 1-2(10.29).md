# 10/29 기록
### getData()
- 모델이 가지고 있는 전체 데이터를 JavaScript 객체 형태로 가져오는 함수
```java
oModel.getData();
```
```java
let oModel = this.getView().getModel("local");
let oData = oModel.getData();
console.log(oData);
```
</br>

### getProperty(path)
- 모델 안의 특정 경로(`path`)에 있는 데이터만 가져옴
```java
oModel.getProperty("/경로");
```
```java
let firstName = oModel.getProperty("/name/firstName");
console.log(firstName); // "Hong"
```
</br>

### setData(data, merge)
- 모델의 데이터를 전체 교체하거나, 기존 데이터와 병합
- 병합여부 → true면 기존 데이터 유지하면서 합침. false면 전체 교체 (기본값)
- true일 때 새로 전달한 속성이 기존 데이터에 있으면 덮어쓰고, 새로 전달한 속성이 없으면 기존 값 그대로 유지
```java
oModel.setData(새로운데이터객체, 병합여부);
```
```java
oModel.setData({
    name: { firstName: "Kim", lastName: "Yuna" },
    inpValue: "NewValue"
}, true);
```
</br>

### setProperty(path, value)
- 모델 안의 특정 경로(`path`)에 있는 데이터만 부분 변경
```java
oModel.setProperty("/경로", 변경할값);
```
```java
oModel.setProperty("/name/firstName", "Park");
oModel.setProperty("/inpValue", "Hello!");
```
</br>

### < 예제 1 >
- 아래는 같은 기능을 하는 코드
```java
oModel.setProperty("/name/firstName", oModel.getProperty("/dialogFirstName"));
oModel.setProperty("/name/lastName", oModel.getProperty("/dialogLastName"));
oModel.setProperty("/inpValue", oModel.getProperty("/dialogInputValue"));

let allDatas = oModel.getData();
allDatas.name.firstName = allDatas.dialogFirstName;
allDatas.name.lastName = allDatas.dialogLastName;
allDatas.inpValue = allDatas.dialogInputValue;
oModel.setData(allDatas, true);
```
</br>

### < 실습 1 >
- 계산기 : 계산한 내역을 모델에 추가하여 table에서 조회함
</br>

- controller.js 파일
```java
sap.ui.define([
    "sap/ui/core/mvc/Controller",
    "sap/ui/model/json/JSONModel",
    "sap/m/MessageBox"
], (Controller, JSONModel, MessageBox) => {
    "use strict";

    return Controller.extend("ycl2project082.controller.Main", {
        onInit() {
        let oData = { 
                calcDatas : [ 
                    { key : "PLUS", text : "+"},
                    { key : "MINUS", text : "-"},
                    { key : "MULTIPL", text : "*"},
                    { key : "DIVIDE", text : "/"}
                ],
                total_result : []
            };
            let oModel = new JSONModel(oData);
            this.getView().setModel(oModel, "select");
        },
        onCalc: function() {
            let oModel = this.getView().getModel("select");
            let Number1 = Number(this.byId("idNumber1").getValue());
            let Number2 = Number(this.byId("idNumber2").getValue());

            let oSelect = this.byId("idselect").getSelectedItem().getKey();
            let result;

            if(oSelect === "PLUS") {
                oSelect="+";
                result = Number1+Number2;
            }
            else if(oSelect === "MINUS") {
                oSelect="-";
                result = Number1-Number2;
            }
            else if(oSelect == "MULTIPL") {
                oSelect="*";
                result = Number1*Number2;
            }
            else if(oSelect === "DIVIDE") {
                oSelect="/";
                result = Number1/Number2;
            }

            let total_result = oModel.getProperty("/total_result");
            total_result.push({
                number1: Number1,
                number2: Number2,
                key: oSelect,
                result: result
            });
            oModel.setProperty("/total_result", total_result);
            MessageBox.show(`계산 결과는 ${result} 입니다!`);
        }
    });
});
```
</br>

- view.xml 파일
```html
<mvc:View controllerName="ycl2project083.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:t="sap.ui.table"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <Input id="idNumber1" width="100%" />
            <Select 
                id="idselect" 
                items="{select>/calcDatas}"
                width="100%" 
                showSecondaryValues="true">
                <core:ListItem 
                    key="{select>key}" 
                    text="{select>text}" 
                    additionalText="{select>key}"/>
            </Select>
            <Input id="idNumber2" width="100%" />
            <Button text="계산하기" press="onCalc"
                    width="100%" type="Emphasized" />

            <t:Table rows="{select>/total_result}">
                <t:columns>
                    <t:Column>
                        <Label text="Number1" />
                        <t:template>
                            <Text text="{select>number1}" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="key" />
                        <t:template>
                            <Text text="{select>key}" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Number2" />
                        <t:template>
                            <Text text="{select>number2}" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="=" />
                        <t:template>
                            <Text text="=" />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Result" />
                        <t:template>
                            <Text text="{select>result}" />
                        </t:template>
                    </t:Column>
                </t:columns>
            </t:Table>
    </Page>
</mvc:View>
```

# SQL 명령어
### SQL 명령어 (1/6) : SQL 기본 명령어 
</br>

### <SQL 기본 명령어 분류>
- 데이터 정의어(DDL), 데이터 조작어(DML), 데이터 제어어(DCL), 트랜젝션 제어어(TCL) 4가지로 분류
<img width="737" height="322" alt="image" src="https://github.com/user-attachments/assets/fa88cf0c-9ec0-4aff-b3dc-24c196566d45" />

</br>
</br>

### <DBA, Data Analyst 역할>
- DBA(DataBase Administrator) 역할: 데이터베이스 관리자이며, 기업 내에서 데이터베이스를 관리
- Data Analyst 역할: 데이터 분석을 통해, 새로운 인사이트를 도출
<img width="713" height="243" alt="image" src="https://github.com/user-attachments/assets/7ea02d75-f35e-4f88-8cac-ea6f1d815a96" />


</br>
</br>

</br>
</br>

---

### SQL 명령어 (2/6) : 데이터 정의어(DDL)
</br>

### <데이터 정의어(DDL, Data Definition Language)>
- 테이블을 생성, 변경, 삭제할 때 사용하는 명령어
<img width="824" height="275" alt="image" src="https://github.com/user-attachments/assets/39ea8e3b-64bd-40fb-8de9-14fcd489fb9d" />

</br>
</br>

### <테이블 데이터 타입 및 제약조건>
- 테이블은 각 열마다 반드시 1가지 데이터 타입으로 정의되어야 함
- 테이블은 각 열마다 제약조건을 정의할 수 있음
1. PK(PRIMARY KEY): 중복되어 나타날 수 없는 단일 값. NOT NULL. (NULL: 값이 없는 상태)
2. NOT NULL: NULL 허용하지 않음
<img width="434" height="341" alt="image" src="https://github.com/user-attachments/assets/472b2dea-9a5f-482b-8ad2-b6e49c198770" />
<img width="475" height="365" alt="image" src="https://github.com/user-attachments/assets/7fbd9eeb-dee6-4d84-9bac-2fb57c638efa" />

</br>
</br>

</br>
</br>

### 1. CREATE TABLE
- 새 테이블을 생성
```sql
CREATE TABLE 테이블명 (
  컬럼명1 데이터타입 제약조건,
  컬럼명2 데이터타입 제약조건,
  ...
);
```
```sql
CREATE TABLE 회원테이블 (
  회원번호 INT PRIMARY KEY,
  이름 VARCHAR(20),
  가입일자 DATE NOT NULL,
  수신동의 BIT
);
```
</br>

### 2. SELECT
- 테이블에서 특정 열 조회
```sql
SELECT 컬럼명1, 컬럼명2, ... FROM 테이블명 WHERE 조건;
```
```sql
SELECT * FROM 회원테이블;                        // 모든 열을 조회
SELECT 이름, 가입일자 FROM 회원테이블;            // 이름과 가입일자 열만 조회
SELECT * FROM 회원테이블 WHERE 수신동의 = 1;      // 수신동의가 '참'(1)인 회원만 조회
SELECT 회원번호, 이름 AS 성명 FROM 회원테이블;     // 특정 열 이름 변경하여 조회 (이름을 성명으로)
```
</br>

### 3. ALTER TABLE ADD
- 테이블 열 추가
```sql
ALTER TABLE 테이블명 ADD 컬럼명 데이터타입;
```
```sql
ALTER TABLE 회원테이블 ADD 성별 VARCHAR(2);
```
</br>

### 4. ALTER TABLE MODIFY
- 테이블 열 데이터 타입 변경
```sql
ALTER TABLE 테이블명 MODIFY 컬럼명 새_데이터타입;
```
```sql
ALTER TABLE 회원테이블 MODIFY 성별 VARCHAR(20);
```
</br>

### 5. ALTER TABLE CHANGE
- 테이블 열 이름 변경 (데이터타입도 변경 가능)
```sql
ALTER TABLE 테이블명 CHANGE 기존컬럼명 새컬럼명 데이터타입;
```
```sql
ALTER TABLE 회원테이블 CHANGE 성별 성 VARCHAR(2);
```
</br>

### 6. ALTER TABLE RENAME
- 테이블 이름 변경
```sql
ALTER TABLE 기존테이블명 RENAME 새테이블명;
```
```sql
ALTER TABLE 회원테이블 RENAME 회원정보;
```
</br>

### 7. DROP TABLE
- 테이블 삭제
```sql
DROP TABLE 테이블명;
```
```sql
DROP TABLE 회원정보;   	// 회원정보 테이블 삭제
```
</br>
</br>

### - 예제
```sql
/* Practice 이름으로 데이터베이스 생성*/
CREATE DATABASE Practice;

/* Practice 데이터베이스 사용*/
USE Practice;


/***************테이블 생성(Create)***************/
/* 회원테이블 생성 */
CREATE TABLE 회원테이블 (
회원번호 INT PRIMARY KEY,
이름 VARCHAR(20),
가입일자 DATE NOT NULL,
수신동의 BIT
);

/* 기본키(PRIMARY KEY): 중복되어 나타날 수 없는 단일 값 + NOT NULL */
/* NOT NULL: NULL 허용하지 않음 */

/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;
  
  
/***************테이블 열 추가*******************/  
/* 성별 열 추가 */  
ALTER TABLE 회원테이블 ADD 성별 VARCHAR(2);
 
/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;
 
 
/***************테이블 열 데이터 타입 변경***************/  
/* 성별 열 타입 변경 */  
ALTER TABLE 회원테이블 MODIFY 성별 VARCHAR(20);
 
 
/***************테이블 열 이름 변경**************/  
/* 성별 -> 성 열 이름 변경 */  
ALTER TABLE 회원테이블 CHANGE 성별 성 VARCHAR(2);
 
 
/***************테이블명 변경**************/  
/* 테이블명 변경 */  
ALTER TABLE 회원테이블 RENAME 회원정보;
 
/* 회원테이블 조회 --> 이름이 변경되었기 때문에 조회되지 않음*/
SELECT  *  FROM  회원테이블;
  
/* 회원정보 조회 */
SELECT  *  FROM  회원테이블; 
  
  
/***************테이블 삭제**************/  
/* 테이블 삭제 */  
DROP TABLE 회원정보;
 
/* 회원정보 조회 --> 삭제되었기 때문에 조회되지 않음*/
SELECT  *  FROM  회원테이블;
```
</br>

---

### SQL 명령어 (3/6) : 데이터 조작어(DML) 
</br>

### <데이터 조작어(DML, Data Manipulation Language)>
- 데이터를 삽입, 조회, 수정, 삭제할 때 사용하는 명령어
<img width="940" height="233" alt="image" src="https://github.com/user-attachments/assets/ed7dbe0a-22a4-426d-9bda-2837587830e8" />
</br>
</br>

### 1. INSERT
- 테이블에 데이터 삽입
- 제약 조건 위반 예시
  
  - 중복된 기본키 삽입 시 오류 발생
  - NOT NULL 컬럼에 NULL 삽입 시 오류 발생
  - 데이터 타입과 맞지 않는 값 삽입 시 오류 발생
```sql
INSERT INTO 테이블명 VALUES (값1, 값2, ...);
```
```sql
INSERT INTO 회원테이블 VALUES (1001, '홍길동', '2020-01-02', 1);
INSERT INTO 회원테이블 VALUES (1002, '이순신', '2020-01-03', 0);
INSERT INTO 회원테이블 VALUES (1003, '장영실', '2020-01-04', 1);
INSERT INTO 회원테이블 VALUES (1004, '유관순', '2020-01-05', 0);
```
</br>

### 2. SELECT
- 테이블에서 특정 열 조회
```sql
SELECT 컬럼명1, 컬럼명2, ... FROM 테이블명 WHERE 조건;
```
```sql
SELECT * FROM 회원테이블;                        // 모든 열을 조회
SELECT 이름, 가입일자 FROM 회원테이블;            // 이름과 가입일자 열만 조회
SELECT * FROM 회원테이블 WHERE 수신동의 = 1;      // 수신동의가 '참'(1)인 회원만 조회
SELECT 회원번호, 이름 AS 성명 FROM 회원테이블;     // 특정 열 이름 변경하여 조회 (이름을 성명으로)
```
</br>

### 3. UPDATE
- 테이블의 기존 데이터를 수정
```sql
UPDATE 테이블명 SET 컬럼명 = 새값 WHERE 조건;    
```
```sql
UPDATE 회원테이블 SET 수신동의 = 0;                            // 전체 행의 수신동의 값을 0으로 변경
UPDATE 회원테이블 SET 수신동의 = 1 WHERE 이름 = '홍길동';       // 이름이 '홍길동'인 회원만 수신동의 값을 1로 변경
```
</br>

### 4. DELETE
- 테이블의 특정 데이터 삭제
```sql
DELETE FROM 테이블명 WHERE 조건;
```
```sql
DELETE FROM 회원테이블 WHERE 이름 = '홍길동';        // 이름이 '홍길동'인 회원만 삭제
DELETE FROM 회원테이블;                             // 모든 데이터 삭제
```
</br>
</br>

### - 예제
```sql
/* Practice 데이터베이스 사용*/
USE Practice;

/***************테이블 생성(Create)***************/
/* 회원테이블 생성 */
CREATE TABLE 회원테이블 (
회원번호 INT PRIMARY KEY,
이름 VARCHAR(20),
가입일자 DATE NOT NULL,
수신동의 BIT
);


/***************데이터 삽입*******************/  
INSERT INTO 회원테이블 VALUES (1001, '홍길동', '2020-01-02', 1);
INSERT INTO 회원테이블 VALUES (1002, '이순신', '2020-01-03', 0);
INSERT INTO 회원테이블 VALUES (1003, '장영실', '2020-01-04', 1);
INSERT INTO 회원테이블 VALUES (1004, '유관순', '2020-01-05', 0);

/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;


/***************조건 위반*******************/
/* PRIMARY KEY 제약 조건 위반 */
INSERT INTO 회원테이블 VALUES (1004, '장보고', '2020-01-06', 0);

/* NOT NULL 제약 조건 위반 */
INSERT INTO 회원테이블 VALUES (1005, '장보고', NULL, 0);

/* 데이터 타입 조건 위반 */
INSERT INTO 회원테이블 VALUES (1005, '장보고', 1, 0);

 
/***************데이터 조회***************/  
/* 모든 열 조회 */  
SELECT  *  
  FROM  회원테이블;
 
/* 특정 열 조회 */  
SELECT  회원번호,
		이름
  FROM  회원테이블;

/* 특정 열 이름 변경하여 조회 */  
SELECT  회원번호,
		이름 AS 성명
  FROM  회원테이블;


/***************데이터 수정*******************/
/* 모든 데이터 수정 */
UPDATE 회원테이블
   SET 수신동의 = 0;
  
  
/* 회원테이블 조회 */  
SELECT  *
  FROM  회원테이블;

/* 특정 조건 데이터 수정 */ 
UPDATE 회원테이블
   SET 수신동의 = 1
 WHERE 이름 = '홍길동';
 
/* 회원테이블 조회 */  
SELECT  *
  FROM  회원테이블;
  
  
/***************데이터 삭제*******************/  
/* 특정 데이터 삭제 */ 
DELETE 
  FROM 회원테이블
 WHERE 이름 = '홍길동';
 
/* 회원테이블 조회 */  
SELECT  *
  FROM  회원테이블;
  
/* 모든 데이터 삭제 */ 
DELETE 
  FROM 회원테이블;
 
/* 회원테이블 조회 */  
SELECT  *
  FROM  회원테이블;
```

</br>

---

### SQL 명령어 (4/6) : 데이터 제어어(DCL)
</br>

### <데이터 제어어(DCL, Data Control Language)>
- 데이터 접근 권한 부여 및 제거할 때 사용하는 명령어
- 데이터베이스 관리자(DBA)가 특정 사용자(User)에게 데이터 접근 권한을 부여 및 제거할 때 사용하는 명령어
<img width="940" height="279" alt="image" src="https://github.com/user-attachments/assets/c225c29a-e50b-4460-ad7d-df1c7b4ec49e" />
</br>
</br>

### 1. SELECT (사용자 확인)
- 현재 등록된 사용자 목록 확인
```sql
SELECT * FROM  USER;
```
```sql
SELECT user, host FROM USER;   -- 계정명과 호스트만 확인
```

### 2. CREATE USER
- 새로운 사용자(계정) 생성
```sql
CREATE USER '계정명'@'호스트' IDENTIFIED BY '비밀번호';
```
```sql
CREATE USER 'TEST'@'localhost' IDENTIFIED BY 'TEST';     // 로컬에서만 접속 가능한 TEST 계정
CREATE USER 'kim'@'%' IDENTIFIED BY 'Abc123!';           // 모든 호스트에서 접속 가능한 kim 계정
```
</br>

### 3. SET PASSWORD / ALTER USER
- 기존 사용자의 비밀번호 변경
```sql
SET PASSWORD FOR '계정명'@'호스트' = '새비밀번호';				// 구버전 방식

ALTER USER '계정명'@'호스트' IDENTIFIED BY '새비밀번호';			// 권장 방식
```
```sql
SET PASSWORD FOR 'TEST'@'localhost' = '1234';  					// 구버전 방식

ALTER USER 'kim'@'%' IDENTIFIED BY 'NewPass!';  				// 권장 방식
```
</br>

### 4. DROP USER
- 사용자 계정 삭제
```sql
DROP USER '계정명'@'호스트';
```
```sql
DROP USER 'TEST'@'localhost';   	// TEST 계정 삭제
```
</br>

### 5. GRANT (권한 부여)
- 사용자에게 권한 부여
```sql
GRANT 권한목록 ON 데이터베이스.테이블 TO '계정명'@'호스트';
GRANT ALL ON 데이터베이스.테이블 TO '계정명'@'호스트';
```
```sql
GRANT SELECT, DELETE ON Practice.회원테이블 TO 'TEST'@'localhost';   		// 조회, 삭제만 허용
GRANT ALL ON Practice.회원테이블 TO 'TEST'@'localhost';              		// 모든 권한 허용
```
</br>

### 6. REVOKE (권한 제거)
- 사용자에게 부여된 권한 제거
```sql
REVOKE 권한목록 ON 데이터베이스.테이블 FROM '계정명'@'호스트';
REVOKE ALL ON 데이터베이스.테이블 FROM '계정명'@'호스트';
```
```sql
REVOKE DELETE ON Practice.회원테이블 FROM 'TEST'@'localhost';   		// DELETE 권한만 제거
REVOKE ALL ON Practice.회원테이블 FROM 'TEST'@'localhost';      		// 모든 권한 제거
```
</br>
</br>

### - 예제
```sql
/***************사용자 확인***************/
/* MYSQL 데이터베이스 사용 */
USE MYSQL;

/* 사용자 확인 */
SELECT  *
  FROM  USER;
  
/***************사용자 추가***************/

/* 사용자 아이디 및 비밀번호 생성 */
CREATE USER 'TEST'@LOCALHOST IDENTIFIED BY 'TEST';

/* 사용자 확인 */
SELECT  *
  FROM  USER;
  
/* 사용자 비밀번호 변경 */
SET PASSWORD FOR 'TEST'@LOCALHOST = '1234';

  
/***************권한 부여 및 제거***************/ 
/** 권한: CREATE, ALTER, DROP, INSERT, DELETE, UPDATE, SELECT 등  **/

/* 특정 권한 부여 */
GRANT SELECT, DELETE ON PRACTICE.회원테이블 TO 'TEST'@LOCALHOST;

/* 특정 권한 제거 */
REVOKE DELETE ON PRACTICE.회원테이블 FROM 'TEST'@LOCALHOST;

/* 모든 권한 부여 */
GRANT ALL ON Practice.회원테이블 TO 'TEST'@LOCALHOST;

/* 모든 권한 제거 */
REVOKE ALL ON Practice.회원테이블 FROM 'TEST'@LOCALHOST;


/***************사용자 삭제***************/ 

/* 사용자 삭제 */
DROP USER 'TEST'@LOCALHOST;

/* 사용자 확인 */
SELECT  *
  FROM  USER;
```
</br>

---

### SQL 명령어 (5/6) : 트랜젝션 제어어(TCL)
</br>

### <트랜젝션 제어어(TCL, Transaction Control Language)>
- 트랜젝션 제어어는 데이터 조작어(DML) 명령어 실행, 취소, 임시저장할 때 사용
</br>

### <트랜젝션 (Transaction)>
- 분할할 수 없는 최소 단위이며 논리적인 작업 단위
<img width="768" height="301" alt="image" src="https://github.com/user-attachments/assets/ae3393fd-ef66-43b0-919e-48349afa09aa" />
</br>
</br>

### <실행(COMMIT), 취소(ROLLBACK)>
- 실행(COMMIT): 모든 작업을 최종 실행
- 취소(ROLLBACK): 모든 작업을 되돌림
<img width="946" height="342" alt="image" src="https://github.com/user-attachments/assets/c28027d6-9c59-459e-85fd-1a886fd25c1c" />
</br>
</br>
</br>

### <임시저장(SAVEPOINT)>
- ROLLBACK 저장점을 지정하는 명령어
<img width="780" height="284" alt="image" src="https://github.com/user-attachments/assets/2766fa62-370c-4d4a-9258-164cced71121" />

1. 실행: COMMIT 
2. 취소: ROLLBACK 
3. 임시저장: SAVEPOINT

</br>
</br>

### 1. BEGIN
- 트랜잭션 시작 (자동 커밋을 잠시 끄고 수동으로 제어)
```sql
BEGIN;
```
</br>

### 2. ROLLBACK
- 트랜잭션 취소 (트랜잭션 시작 이후 실행된 변경 사항을 원상 복구)
```sql
ROLLBACK;
```
```sql
BEGIN;
INSERT INTO 회원테이블 VALUES (1001, '홍길동', '2020-01-02', 1);
	ROLLBACK;    // 홍길동 데이터 삽입 취소
```
</br>

### 3. COMMIT
- 트랜잭션 확정 (트랜잭션 안에서 실행한 변경 사항을 DB에 반영)
```sql
COMMIT;
```
```sql
BEGIN;
INSERT INTO 회원테이블 VALUES (1005, '장보고', '2020-01-06', 1);
COMMIT;   // 장보고 데이터 확정 저장
```
</br>

### 4. SAVEPOINT
- 트랜잭션 내에서 특정 시점(저장점)을 설정
- 나중에 ROLLBACK TO 저장점으로 해당 지점까지 되돌릴 수 있음
```sql
SAVEPOINT 저장점이름;
```
```sql
SAVEPOINT S1;
```
</br>

### 4. ROLLBACK TO 저장점
- 전체 트랜잭션을 취소하지 않고 특정 SAVEPOINT까지만 취소
```sql
ROLLBACK TO 저장점이름;
```
```sql
ROLLBACK TO S2;   	// S2 시점으로 되돌림
```
</br>
</br>

### - 예제
```sql
/* Practice 데이터베이스 사용*/
USE Practice;

/***************테이블 생성(Create)***************/
/* (회원테이블 존재할 시, 회원테이블 삭제) */
DROP TABLE 회원테이블;

/* 회원테이블 생성 */
CREATE TABLE 회원테이블 (
회원번호 INT PRIMARY KEY,
이름 VARCHAR(20),
가입일자 DATE NOT NULL,
수신동의 BIT
);

/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;


/***************BEGIN + 취소(ROLLBACK)*******************/  
/* 트랜젝션 시작 */
BEGIN;

/* 데이터 삽입 */
INSERT INTO 회원테이블 VALUES (1001, '홍길동', '2020-01-02', 1);

/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;

/* 취소 */
ROLLBACK;


/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;


/***************BEGIN + 실행(COMMIT)*******************/  
/* 트랜젝션 시작 */
BEGIN;

/* 데이터 삽입 */
INSERT INTO 회원테이블 VALUES (1005, '장보고', '2020-01-06', 1);

/* 실행 */
COMMIT;

/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;


/***************임시 저장(SAVEPOINT)*******************/ 
/* (회원테이블에 데이터 존재할 시, 데이터 모두 삭제) */
DELETE FROM 회원테이블;

/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;

/* 트랜젝션 시작 */
BEGIN;

/* 데이터 삽입 */
INSERT INTO 회원테이블 VALUES (1005, '장보고', '2020-01-06', 1);

/* SAVEPOINT 지정 */
SAVEPOINT S1;

/* 1005 회원 이름 수정 */
UPDATE  회원테이블
   SET  이름 = '이순신';
 
/* SAVEPOINT 지정 */
SAVEPOINT S2;

/* 1005 회원 데이터 삭제 */
DELETE 
  FROM  회원테이블;
 
/* SAVEPOINT 지정 */
SAVEPOINT S3;

/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;

/* SAVEPOINT S2 저장점으로 ROLLBACK */
ROLLBACK TO S2;
 
/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;

/* 실행 */
COMMIT;

/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;
```
</br>

---

### SQL 명령어 (5/6) : 트랜젝션 제어어(TCL)
</br>

### < SQL 기본명령어, 테이블 >
- SQL 기본명령어는 4가지
<img width="737" height="322" alt="image" src="https://github.com/user-attachments/assets/c08af4fc-ad08-49a3-9ce3-48d6c3a9251e" />
</br>
</br>
</br>
</br>

- 테이블, 데이터 타입 및 제약 조건
<img width="484" height="400" alt="image" src="https://github.com/user-attachments/assets/523670d3-763f-4f12-9eaf-c1773b0dacab" />
</br>
</br>
</br>
</br>

### < 데이터 정의어, 조작어 >
- 데이터정의어(DDL)
<img width="437" height="434" alt="image" src="https://github.com/user-attachments/assets/d38d5b8c-0fd8-4230-8692-13cc77db619f" />
</br>
</br>
</br>
</br>

- 데이터조작어(DML)
<img width="467" height="466" alt="image" src="https://github.com/user-attachments/assets/ce23d26f-21db-4ec9-adba-4d5e9bf81da7" />
</br>
</br>
</br>
</br>

### < 데이터 제어어, 트랜젝션 제어어 >
- 데이터 제어어(DCL)
<img width="610" height="468" alt="image" src="https://github.com/user-attachments/assets/1305222e-31bf-48b9-880f-e229a76fe0d1" />
</br>
</br>
</br>
</br>

- 트렌젝션 제어어(TCL)
<img width="673" height="361" alt="image" src="https://github.com/user-attachments/assets/c4093e81-bbe7-4262-9358-c1e5c742229c" />
